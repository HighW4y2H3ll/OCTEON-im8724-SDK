<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-app-hotplug.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-app-hotplug.c File Reference</h1>
<p>Provides APIs for applications to register for hotplug.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx-app-hotplug_8h_source.html">cvmx-app-hotplug.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-spinlock_8h_source.html">cvmx-spinlock.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-mbox_8h_source.html">cvmx-mbox.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-debug_8h_source.html">cvmx-debug.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-app-hotplug.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-app-hotplug_8c__incl.png" border="0" usemap="#cvmx-app-hotplug_8c_map" alt=""/></div>
<map name="cvmx-app-hotplug_8c_map" id="cvmx-app-hotplug_8c">
<area shape="rect" id="node3" href="cvmx-app-hotplug_8h.html" title="Header file for the hotplug APIs." alt="" coords="2015,83,2172,112"/><area shape="rect" id="node108" href="cvmx-spinlock_8h.html" title="Implementation of spinlocks." alt="" coords="2237,160,2365,189"/><area shape="rect" id="node112" href="cvmx-mbox_8h.html" title="Encapsulation of OCTEON mailbox interrupts." alt="" coords="2432,83,2547,112"/><area shape="rect" id="node114" href="cvmx-debug_8h.html" title="Interface to debug exception handler." alt="" coords="2291,83,2408,112"/><area shape="rect" id="node5" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="2144,160,2213,189"/><area shape="rect" id="node44" href="cvmx-coremask_8h.html" title="Module to support operations on bitmap of cores." alt="" coords="5,392,147,421"/><area shape="rect" id="node104" href="cvmx-interrupt_8h.html" title="Interface to the Mips interrupts." alt="" coords="1819,160,1955,189"/><area shape="rect" id="node106" href="cvmx-bootmem_8h.html" title="Simple allocate only memory allocator." alt="" coords="1979,160,2120,189"/><area shape="rect" id="node7" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="2484,315,2617,344"/><area shape="rect" id="node29" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="573,315,696,344"/><area shape="rect" id="node31" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="2772,315,2900,344"/><area shape="rect" id="node34" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="2965,469,3069,499"/><area shape="rect" id="node36" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="1977,237,2100,267"/><area shape="rect" id="node38" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="2124,237,2233,267"/><area shape="rect" id="node40" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="396,237,519,267"/><area shape="rect" id="node50" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="2257,237,2385,267"/><area shape="rect" id="node52" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="1432,237,1528,267"/><area shape="rect" id="node81" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="2112,315,2216,344"/><area shape="rect" id="node84" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="2409,237,2519,267"/><area shape="rect" id="node87" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="2543,237,2681,267"/><area shape="rect" id="node89" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="1804,237,1903,267"/><area shape="rect" id="node9" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="2869,392,2965,421"/><area shape="rect" id="node42" href="cvmx-app-init_8h.html" title="Header file for simple executive application initialization." alt="" coords="179,315,307,344"/><area shape="rect" id="node55" href="cvmx-csr-enums_8h.html" title="Definitions for enumerations used with Octeon CSRs." alt="" coords="976,315,1123,344"/><area shape="rect" id="node57" href="cvmx-csr-typedefs_8h.html" title="Configuration and status register (CSR) address and type definitions for Octeon." alt="" coords="1147,315,1309,344"/><area shape="rect" id="node59" href="cvmx-agl-defs_8h.html" title="cvmx&#45;agl&#45;defs.h" alt="" coords="843,392,973,421"/><area shape="rect" id="node61" href="cvmx-ase-defs_8h.html" title="cvmx&#45;ase&#45;defs.h" alt="" coords="997,392,1133,421"/><area shape="rect" id="node63" href="cvmx-asxx-defs_8h.html" title="cvmx&#45;asxx&#45;defs.h" alt="" coords="1157,392,1299,421"/><area shape="rect" id="node65" href="cvmx-asx0-defs_8h.html" title="cvmx&#45;asx0&#45;defs.h" alt="" coords="1323,392,1464,421"/><area shape="rect" id="node67" href="cvmx-bbp-defs_8h.html" title="cvmx&#45;bbp&#45;defs.h" alt="" coords="1488,392,1624,421"/><area shape="rect" id="node69" href="cvmx-bbxa-defs_8h.html" title="cvmx&#45;bbxa&#45;defs.h" alt="" coords="1648,392,1792,421"/><area shape="rect" id="node71" href="cvmx-bbxbx-defs_8h.html" title="cvmx&#45;bbxbx&#45;defs.h" alt="" coords="171,392,323,421"/><area shape="rect" id="node73" href="cvmx-bbxc-defs_8h.html" title="cvmx&#45;bbxc&#45;defs.h" alt="" coords="347,392,491,421"/><area shape="rect" id="node75" href="cvmx-bch-defs_8h.html" title="cvmx&#45;bch&#45;defs.h" alt="" coords="515,392,651,421"/><area shape="rect" id="node77" href="cvmx-bgxx-defs_8h.html" title="cvmx&#45;bgxx&#45;defs.h" alt="" coords="675,392,819,421"/><area shape="rect" id="node79" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="1816,392,1949,421"/><area shape="rect" id="node91" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="1973,392,2101,421"/><area shape="rect" id="node95" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="1931,315,2037,344"/><area shape="rect" id="node99" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="1800,315,1907,344"/><area shape="rect" id="node116" href="cvmx-core_8h.html" title="Module to support operations on core such as TLB config, etc." alt="" coords="2389,160,2496,189"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a34e0af17e995e3d46a3d4d8f79a4fa81">IDLE_CORE_BLOCK_NAME</a>&nbsp;&nbsp;&nbsp;&quot;idle-core-loop&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a967bd5a4d72d4374b3faee0d1cd3d019">HPLUG_MAKE_XKPHYS</a>(x)&nbsp;&nbsp;&nbsp;((1ULL &lt;&lt; 63) | (x))</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a7602bf2c527b6180777590747ba04134">__cvmx_app_hotplug_sync</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#aff9aea5dee0d880aaba41038b1a30ad7">__cvmx_app_hotplug_reset</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a7f705aca19dc1c0a509b3a332b0dcbeb">__cvmx_app_hotplug_shutdown</a> (struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> *self, uint64_t *registers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a861812bdd816afd6b58da010fd67ef34">__cvmx_app_hotplug_addcores</a> (struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> *self, uint64_t *registers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a53715c0dde4f812e073cee1527882695">__cvmx_app_hotplug_delcores</a> (struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> *self, uint64_t *registers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#afcd8a217a6a041b0c03c4bb37ca98cf2">cvmx_app_hotplug_register</a> (void(*fn)(void *), void *arg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine registers an application for hotplug.  <a href="#afcd8a217a6a041b0c03c4bb37ca98cf2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#aa6cdb9818f2ea90dbeb762956c973a16">cvmx_app_hotplug_register_cb</a> (<a class="el" href="structcvmx__app__hotplug__callbacks.html">cvmx_app_hotplug_callbacks_t</a> *cb, void *arg, int app_shutdown)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine deprecates the the cvmx_app_hotplug_register method.  <a href="#aa6cdb9818f2ea90dbeb762956c973a16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#aa3488a6b3249105705b66af5057dd570">cvmx_app_hotplug_remove_self_from_core_mask</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a31b5a9aa00c0d7a77149a52dbb6ba317">is_core_being_unplugged</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if the running core is being unplugged, else it returns 0.  <a href="#a31b5a9aa00c0d7a77149a52dbb6ba317"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#afaaa4181d926b3729fbbfa146f4a24e8">cvmx_app_hotplug_activate</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Activate the current application core for receiving hotplug shutdown requests.  <a href="#afaaa4181d926b3729fbbfa146f4a24e8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a9d320250c7067703815311feb1222930">cvmx_app_hotplug_shutdown_complete</a> (const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *pcm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine is only required if <a class="el" href="cvmx-app-hotplug_8c.html#afdedbe2d3bf7d5c48cdb94d332b37eb9" title="This routine sends a shutdown request to a running target application.">cvmx_app_hotplug_shutdown_request()</a> was called with wait=0.  <a href="#a9d320250c7067703815311feb1222930"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a195033e478170ddaafea5ec9d4f15f12">cvmx_app_hotplug_shutdown_disable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable recognition of any incoming shutdown request.  <a href="#a195033e478170ddaafea5ec9d4f15f12"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a21caa2e9ae2a1ac71e7cf58187a4e675">cvmx_app_hotplug_shutdown_enable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Re-enable recognition of incoming shutdown requests.  <a href="#a21caa2e9ae2a1ac71e7cf58187a4e675"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#ae800de0a1eb1bd00f86cad7b6c779f43">cvmx_app_hotplug_core_shutdown</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Request shutdown of the currently running core.  <a href="#ae800de0a1eb1bd00f86cad7b6c779f43"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a5ff8fa41c61d306237fc2f13e52cbf48">is_core_being_hot_plugged</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if the running core is being hotplugged, else it returns 0.  <a href="#a5ff8fa41c61d306237fc2f13e52cbf48"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcvmx__app__hotplug__global.html">cvmx_app_hotplug_global_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a122118e25fbf0821292cc6aa9568d1e3">cvmx_app_get_hotplug_global_ptr</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#ab988136779f99b46eaf817b9d1490c1c">cvmx_app_hotplug_get_info</a> (const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *pcm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the hotplug info structure (cvmx_app_hotplug_info_t) pointer for the application running on the given coremask.  <a href="#ab988136779f99b46eaf817b9d1490c1c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a5e1cd0756e46ac088971d745dee5c726">cvmx_app_hotplug_get_index</a> (const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *pcm)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the hotplug application index structure for the application running on the given coremask.  <a href="#a5e1cd0756e46ac088971d745dee5c726"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a3e078bcb65db5fc4ce944820042eaf88">cvmx_app_hotplug_get_info_at_index</a> (int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the hotplug info structure (cvmx_app_hotplug_info_t) pointer for the application with the specified index.  <a href="#a3e078bcb65db5fc4ce944820042eaf88"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#aa7cd1bfb6931dae9cecfaefda1ff7f01">is_app_hotpluggable</a> (int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines if SE application at the index specified is hotpluggable.  <a href="#aa7cd1bfb6931dae9cecfaefda1ff7f01"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#afdedbe2d3bf7d5c48cdb94d332b37eb9">cvmx_app_hotplug_shutdown_request</a> (const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *pcm, int wait)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine sends a shutdown request to a running target application.  <a href="#afdedbe2d3bf7d5c48cdb94d332b37eb9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a1ac552b3e1d9203fc160c1b1451f8a4e">cvmx_app_hotplug_call_add_cores_callback</a> (int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine invokes the invoked the cores_added callbacks.  <a href="#a1ac552b3e1d9203fc160c1b1451f8a4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a64df7fb48bfaf64e59b10e2c3719ae54">cvmx_app_hotplug_unplug_cores</a> (int index, const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *pcm, int wait)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine sends a request to a running target application to unplug a specified set cores.  <a href="#a64df7fb48bfaf64e59b10e2c3719ae54"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a30d57e4d288d8c1a836b5743f757acbe">is_app_under_boot_or_shutdown</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns 1 if any app is currently being currently booted , hotplugged or shutdown.  <a href="#a30d57e4d288d8c1a836b5743f757acbe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a8c072282009b13d923bf203585a833ce">set_app_under_boot</a> (int val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets or clear the app_under_boot value.  <a href="#a8c072282009b13d923bf203585a833ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#adbcb67a28e18eb6f54ac2baf3ab7f81a">set_app_under_shutdown</a> (int val)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets or clear the app_under_shutdown value.  <a href="#adbcb67a28e18eb6f54ac2baf3ab7f81a"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcvmx__app__hotplug__global.html">cvmx_app_hotplug_global_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#ad001c1936ceaad7029efced7cebd30d8">hotplug_global_ptr</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a69cd226a572d23199a8410f7fb48583b">cvmx_app_hotplug_disabled</a> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED <a class="el" href="structcvmx__spinlock__t.html">cvmx_spinlock_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a33eb2c0c973d70f35e71554f2c0b7cca">cvmx_app_hotplug_sync_lock</a> = { CVMX_SPINLOCK_UNLOCKED_VAL }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED <a class="el" href="structcvmx__spinlock__t.html">cvmx_spinlock_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#aa4686d1b28bba1341c8aefd4f3c4c0be">cvmx_app_hotplug_lock</a> = { CVMX_SPINLOCK_UNLOCKED_VAL }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED <br class="typebreak"/>
<a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a58374bd5400b4a630eb1bea19b9e071e">cvmx_app_hotplug_info_ptr</a> = NULL</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a52312b2051aa1868c3955ab1b3161340">__cvmx_shutdown_handler</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#a84de2ffdf013bc75d971a5dd044bbd92">__cvmx_addcores_handler</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#af24a6fc1995d09ad982715bbfd3885a9">__cvmx_delcores_handler</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-app-hotplug_8c.html#af69ce2da4851b5934fb0998102eaf5b7">__hotplug_info_check</a> [(sizeof(<a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a>)==1024)?1:-1]</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Provides APIs for applications to register for hotplug. </p>
<p>It also provides APIs for requesting shutdown of a running target application.</p>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd></dd></dl>
<hr/>
 <hr/><h2>Define Documentation</h2>
<a class="anchor" id="a967bd5a4d72d4374b3faee0d1cd3d019"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::HPLUG_MAKE_XKPHYS" ref="a967bd5a4d72d4374b3faee0d1cd3d019" args="(x)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HPLUG_MAKE_XKPHYS</td>
          <td>(</td>
          <td class="paramtype">x&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((1ULL &lt;&lt; 63) | (x))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a34e0af17e995e3d46a3d4d8f79a4fa81"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::IDLE_CORE_BLOCK_NAME" ref="a34e0af17e995e3d46a3d4d8f79a4fa81" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IDLE_CORE_BLOCK_NAME&nbsp;&nbsp;&nbsp;&quot;idle-core-loop&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a861812bdd816afd6b58da010fd67ef34"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_app_hotplug_addcores" ref="a861812bdd816afd6b58da010fd67ef34" args="(struct cvmx_mbox *self, uint64_t *registers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __cvmx_app_hotplug_addcores </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>registers</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a53715c0dde4f812e073cee1527882695"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_app_hotplug_delcores" ref="a53715c0dde4f812e073cee1527882695" args="(struct cvmx_mbox *self, uint64_t *registers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __cvmx_app_hotplug_delcores </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>registers</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aff9aea5dee0d880aaba41038b1a30ad7"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_app_hotplug_reset" ref="aff9aea5dee0d880aaba41038b1a30ad7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __cvmx_app_hotplug_reset </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7f705aca19dc1c0a509b3a332b0dcbeb"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_app_hotplug_shutdown" ref="a7f705aca19dc1c0a509b3a332b0dcbeb" args="(struct cvmx_mbox *self, uint64_t *registers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __cvmx_app_hotplug_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> *&nbsp;</td>
          <td class="paramname"> <em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>registers</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7602bf2c527b6180777590747ba04134"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_app_hotplug_sync" ref="a7602bf2c527b6180777590747ba04134" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __cvmx_app_hotplug_sync </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a122118e25fbf0821292cc6aa9568d1e3"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_get_hotplug_global_ptr" ref="a122118e25fbf0821292cc6aa9568d1e3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structcvmx__app__hotplug__global.html">cvmx_app_hotplug_global_t</a>* cvmx_app_get_hotplug_global_ptr </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afaaa4181d926b3729fbbfa146f4a24e8"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_activate" ref="afaaa4181d926b3729fbbfa146f4a24e8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_activate </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Activate the current application core for receiving hotplug shutdown requests. </p>
<p>This routine makes sure that each core belonging to the application is enabled to receive the shutdown notification and also provides a barrier sync to make sure that all cores are ready. </p>

</div>
</div>
<a class="anchor" id="a1ac552b3e1d9203fc160c1b1451f8a4e"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_call_add_cores_callback" ref="a1ac552b3e1d9203fc160c1b1451f8a4e" args="(int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_call_add_cores_callback </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine invokes the invoked the cores_added callbacks. </p>

</div>
</div>
<a class="anchor" id="ae800de0a1eb1bd00f86cad7b6c779f43"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_core_shutdown" ref="ae800de0a1eb1bd00f86cad7b6c779f43" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_app_hotplug_core_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Request shutdown of the currently running core. </p>
<p>Should be called by the application when it has been registered with app_shutdown option set to 1. </p>

</div>
</div>
<a class="anchor" id="a5e1cd0756e46ac088971d745dee5c726"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_get_index" ref="a5e1cd0756e46ac088971d745dee5c726" args="(const struct cvmx_coremask *pcm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_get_index </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *&nbsp;</td>
          <td class="paramname"> <em>pcm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the hotplug application index structure for the application running on the given coremask. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcm</em>&nbsp;</td><td>Coremask of application. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns hotplug application index on success. -1 on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ab988136779f99b46eaf817b9d1490c1c"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_get_info" ref="ab988136779f99b46eaf817b9d1490c1c" args="(const struct cvmx_coremask *pcm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a>* cvmx_app_hotplug_get_info </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *&nbsp;</td>
          <td class="paramname"> <em>pcm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the hotplug info structure (cvmx_app_hotplug_info_t) pointer for the application running on the given coremask. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcm</em>&nbsp;</td><td>Coremask of application. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns hotplug info struct on success, NULL on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a3e078bcb65db5fc4ce944820042eaf88"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_get_info_at_index" ref="a3e078bcb65db5fc4ce944820042eaf88" args="(int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a>* cvmx_app_hotplug_get_info_at_index </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the hotplug info structure (cvmx_app_hotplug_info_t) pointer for the application with the specified index. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>index of application. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns hotplug info struct on success, NULL on failure </dd></dl>

</div>
</div>
<a class="anchor" id="afcd8a217a6a041b0c03c4bb37ca98cf2"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_register" ref="afcd8a217a6a041b0c03c4bb37ca98cf2" args="(void(*fn)(void *), void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_register </td>
          <td>(</td>
          <td class="paramtype">void(*)(void *)&nbsp;</td>
          <td class="paramname"> <em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine registers an application for hotplug. </p>
<p>It installs a handler for any incoming shutdown request. It also registers a callback routine from the application. This callback is invoked when the application receives a shutdown notification.</p>
<p>This routine only needs to be called once per application.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fn</em>&nbsp;</td><td>Callback routine from the application. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>Argument to the application callback routine. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Return 0 on success, -1 on failure </dd></dl>

</div>
</div>
<a class="anchor" id="aa6cdb9818f2ea90dbeb762956c973a16"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_register_cb" ref="aa6cdb9818f2ea90dbeb762956c973a16" args="(cvmx_app_hotplug_callbacks_t *cb, void *arg, int app_shutdown)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_register_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__app__hotplug__callbacks.html">cvmx_app_hotplug_callbacks_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>app_shutdown</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine deprecates the the cvmx_app_hotplug_register method. </p>
<p>This registers application for hotplug and the application will have CPU hotplug callbacks. Various callbacks are specified in cb. cvmx_app_hotplug_callbacks_t documents the callbacks</p>
<p>This routine only needs to be called once per application.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cb</em>&nbsp;</td><td>Callback routine from the application. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>Argument to the application callback routins </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>app_shutdown</em>&nbsp;</td><td>When set to 1 the application will invoke core_shutdown on each core. When set to 0 core shutdown will be called invoked automatically after invoking the application callback. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Return index of app on success, -1 on failure </dd></dl>

</div>
</div>
<a class="anchor" id="aa3488a6b3249105705b66af5057dd570"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_remove_self_from_core_mask" ref="aa3488a6b3249105705b66af5057dd570" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_app_hotplug_remove_self_from_core_mask </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d320250c7067703815311feb1222930"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_shutdown_complete" ref="a9d320250c7067703815311feb1222930" args="(const struct cvmx_coremask *pcm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_shutdown_complete </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *&nbsp;</td>
          <td class="paramname"> <em>pcm</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine is only required if <a class="el" href="cvmx-app-hotplug_8c.html#afdedbe2d3bf7d5c48cdb94d332b37eb9" title="This routine sends a shutdown request to a running target application.">cvmx_app_hotplug_shutdown_request()</a> was called with wait=0. </p>
<p>This routine waits for the application shutdown to complete.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcm</em>&nbsp;</td><td>Coremask the application is running on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="a195033e478170ddaafea5ec9d4f15f12"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_shutdown_disable" ref="a195033e478170ddaafea5ec9d4f15f12" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_app_hotplug_shutdown_disable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable recognition of any incoming shutdown request. </p>

</div>
</div>
<a class="anchor" id="a21caa2e9ae2a1ac71e7cf58187a4e675"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_shutdown_enable" ref="a21caa2e9ae2a1ac71e7cf58187a4e675" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_app_hotplug_shutdown_enable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Re-enable recognition of incoming shutdown requests. </p>

</div>
</div>
<a class="anchor" id="afdedbe2d3bf7d5c48cdb94d332b37eb9"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_shutdown_request" ref="afdedbe2d3bf7d5c48cdb94d332b37eb9" args="(const struct cvmx_coremask *pcm, int wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_shutdown_request </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *&nbsp;</td>
          <td class="paramname"> <em>pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wait</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine sends a shutdown request to a running target application. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pcm</em>&nbsp;</td><td>Coremask the application is running on. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait</em>&nbsp;</td><td>1 - Wait for shutdown completion 0 - Do not wait </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="a64df7fb48bfaf64e59b10e2c3719ae54"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_unplug_cores" ref="a64df7fb48bfaf64e59b10e2c3719ae54" args="(int index, const struct cvmx_coremask *pcm, int wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_app_hotplug_unplug_cores </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcvmx__coremask.html">cvmx_coremask</a> *&nbsp;</td>
          <td class="paramname"> <em>pcm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wait</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine sends a request to a running target application to unplug a specified set cores. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>is the index of the target application </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pcm</em>&nbsp;</td><td>Coremask of the cores to be unplugged from the app. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait</em>&nbsp;</td><td>1 - Wait for shutdown completion 0 - Do not wait </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success, -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="aa7cd1bfb6931dae9cecfaefda1ff7f01"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::is_app_hotpluggable" ref="aa7cd1bfb6931dae9cecfaefda1ff7f01" args="(int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_app_hotpluggable </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines if SE application at the index specified is hotpluggable. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>index of application. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns -1 on error. 0 -&gt; The application is not hotpluggable 1 -&gt; The application is hotpluggable </dd></dl>

</div>
</div>
<a class="anchor" id="a30d57e4d288d8c1a836b5743f757acbe"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::is_app_under_boot_or_shutdown" ref="a30d57e4d288d8c1a836b5743f757acbe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_app_under_boot_or_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if any app is currently being currently booted , hotplugged or shutdown. </p>
<p>Only one app can be under a boot, hotplug or shutdown condition. Before booting an app this methods should be used to check whether boot or shutdown activity is in progress and proceed with the boot or shutdown only when there is no other activity. </p>

</div>
</div>
<a class="anchor" id="a5ff8fa41c61d306237fc2f13e52cbf48"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::is_core_being_hot_plugged" ref="a5ff8fa41c61d306237fc2f13e52cbf48" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_core_being_hot_plugged </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if the running core is being hotplugged, else it returns 0. </p>

</div>
</div>
<a class="anchor" id="a31b5a9aa00c0d7a77149a52dbb6ba317"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::is_core_being_unplugged" ref="a31b5a9aa00c0d7a77149a52dbb6ba317" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int is_core_being_unplugged </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns 1 if the running core is being unplugged, else it returns 0. </p>

</div>
</div>
<a class="anchor" id="a8c072282009b13d923bf203585a833ce"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::set_app_under_boot" ref="a8c072282009b13d923bf203585a833ce" args="(int val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_app_under_boot </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets or clear the app_under_boot value. </p>
<p>This when set signifies that an app is being currently booted or hotplugged with a new core.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>sets the app_under_boot to the specified value. This should be set to 1 while app any is being booted and cleared after the application has booted up.</td></tr>
  </table>
  </dd>
</dl>
<p>LR: Need to add return value to make this into a working lock </p>

</div>
</div>
<a class="anchor" id="adbcb67a28e18eb6f54ac2baf3ab7f81a"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::set_app_under_shutdown" ref="adbcb67a28e18eb6f54ac2baf3ab7f81a" args="(int val)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_app_under_shutdown </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>val</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets or clear the app_under_shutdown value. </p>
<p>This when set signifies that an app is being currently shutdown or some cores of an app are being shutdown.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>val</em>&nbsp;</td><td>sets the app_under_shutdown to the specified value. This should be set to 1 while any app is being shutdown and cleared after the shutdown of the app is complete. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a84de2ffdf013bc75d971a5dd044bbd92"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_addcores_handler" ref="a84de2ffdf013bc75d971a5dd044bbd92" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> <a class="el" href="cvmx-app-hotplug_8c.html#a84de2ffdf013bc75d971a5dd044bbd92">__cvmx_addcores_handler</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    .handler = <a class="code" href="cvmx-app-hotplug_8c.html#a861812bdd816afd6b58da010fd67ef34">__cvmx_app_hotplug_addcores</a>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af24a6fc1995d09ad982715bbfd3885a9"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_delcores_handler" ref="af24a6fc1995d09ad982715bbfd3885a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> <a class="el" href="cvmx-app-hotplug_8c.html#af24a6fc1995d09ad982715bbfd3885a9">__cvmx_delcores_handler</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    .handler = <a class="code" href="cvmx-app-hotplug_8c.html#a53715c0dde4f812e073cee1527882695">__cvmx_app_hotplug_delcores</a>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a52312b2051aa1868c3955ab1b3161340"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__cvmx_shutdown_handler" ref="a52312b2051aa1868c3955ab1b3161340" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED struct <a class="el" href="structcvmx__mbox.html">cvmx_mbox</a> <a class="el" href="cvmx-app-hotplug_8c.html#a52312b2051aa1868c3955ab1b3161340">__cvmx_shutdown_handler</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    .handler = <a class="code" href="cvmx-app-hotplug_8c.html#a7f705aca19dc1c0a509b3a332b0dcbeb">__cvmx_app_hotplug_shutdown</a>
}
</pre></div>
</div>
</div>
<a class="anchor" id="af69ce2da4851b5934fb0998102eaf5b7"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::__hotplug_info_check" ref="af69ce2da4851b5934fb0998102eaf5b7" args="[(sizeof(cvmx_app_hotplug_info_t)==1024)?1:&#45;1]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="cvmx-app-hotplug_8c.html#af69ce2da4851b5934fb0998102eaf5b7">__hotplug_info_check</a>[(sizeof(<a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a>)==1024)?1:-1]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a69cd226a572d23199a8410f7fb48583b"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_disabled" ref="a69cd226a572d23199a8410f7fb48583b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="cvmx-app-hotplug_8c.html#a69cd226a572d23199a8410f7fb48583b">cvmx_app_hotplug_disabled</a> = false<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a58374bd5400b4a630eb1bea19b9e071e"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_info_ptr" ref="a58374bd5400b4a630eb1bea19b9e071e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__app__hotplug__info.html">cvmx_app_hotplug_info_t</a>* <a class="el" href="cvmx-app-hotplug_8c.html#a58374bd5400b4a630eb1bea19b9e071e">cvmx_app_hotplug_info_ptr</a> = NULL<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa4686d1b28bba1341c8aefd4f3c4c0be"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_lock" ref="aa4686d1b28bba1341c8aefd4f3c4c0be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__spinlock__t.html">cvmx_spinlock_t</a> <a class="el" href="cvmx-app-hotplug_8c.html#aa4686d1b28bba1341c8aefd4f3c4c0be">cvmx_app_hotplug_lock</a> = { CVMX_SPINLOCK_UNLOCKED_VAL }<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a33eb2c0c973d70f35e71554f2c0b7cca"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::cvmx_app_hotplug_sync_lock" ref="a33eb2c0c973d70f35e71554f2c0b7cca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__spinlock__t.html">cvmx_spinlock_t</a> <a class="el" href="cvmx-app-hotplug_8c.html#a33eb2c0c973d70f35e71554f2c0b7cca">cvmx_app_hotplug_sync_lock</a> = { CVMX_SPINLOCK_UNLOCKED_VAL }<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad001c1936ceaad7029efced7cebd30d8"></a><!-- doxytag: member="cvmx&#45;app&#45;hotplug.c::hotplug_global_ptr" ref="ad001c1936ceaad7029efced7cebd30d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcvmx__app__hotplug__global.html">cvmx_app_hotplug_global_t</a>* <a class="el" href="cvmx-app-hotplug_8c.html#ad001c1936ceaad7029efced7cebd30d8">hotplug_global_ptr</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
