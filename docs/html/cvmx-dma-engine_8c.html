<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-dma-engine.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-dma-engine.c File Reference</h1>
<p>Interface to the PCI / PCIe DMA engines.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx_8h_source.html">cvmx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-bootmem_8h_source.html">cvmx-bootmem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-cmd-queue_8h_source.html">cvmx-cmd-queue.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-dma-engine_8h_source.html">cvmx-dma-engine.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-cfg_8h_source.html">cvmx-helper-cfg.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-fpa_8h_source.html">cvmx-helper-fpa.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-fpa_8h_source.html">cvmx-fpa.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-dma-engine.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-dma-engine_8c__incl.png" border="0" usemap="#cvmx-dma-engine_8c_map" alt=""/></div>
<map name="cvmx-dma-engine_8c_map" id="cvmx-dma-engine_8c">
<area shape="rect" id="node3" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="1640,237,1709,267"/><area shape="rect" id="node85" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="2496,315,2595,344"/><area shape="rect" id="node99" href="cvmx-bootmem_8h.html" title="Simple allocate only memory allocator." alt="" coords="2435,83,2576,112"/><area shape="rect" id="node101" href="cvmx-cmd-queue_8h.html" title="Support functions for managing command queues used for various hardware blocks." alt="" coords="2256,83,2411,112"/><area shape="rect" id="node106" href="cvmx-dma-engine_8h.html" title="Interface to the PCI / PCIe DMA engines." alt="" coords="2467,237,2624,267"/><area shape="rect" id="node110" href="cvmx-helper-cfg_8h.html" title="Helper Functions for the Configuration Framework." alt="" coords="2707,83,2851,112"/><area shape="rect" id="node118" href="cvmx-helper-fpa_8h.html" title="Helper functions for FPA setup." alt="" coords="2895,315,3039,344"/><area shape="rect" id="node5" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="435,392,568,421"/><area shape="rect" id="node27" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="1867,392,1989,421"/><area shape="rect" id="node29" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="31,392,159,421"/><area shape="rect" id="node32" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="2300,547,2404,576"/><area shape="rect" id="node34" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="1965,315,2088,344"/><area shape="rect" id="node36" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="965,315,1075,344"/><area shape="rect" id="node38" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="1768,315,1891,344"/><area shape="rect" id="node48" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="1149,315,1277,344"/><area shape="rect" id="node50" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="1352,315,1448,344"/><area shape="rect" id="node77" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="224,392,328,421"/><area shape="rect" id="node80" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="1472,315,1581,344"/><area shape="rect" id="node83" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="1605,315,1744,344"/><area shape="rect" id="node7" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="5,469,101,499"/><area shape="rect" id="node40" href="cvmx-app-init_8h.html" title="Header file for simple executive application initialization." alt="" coords="1477,392,1605,421"/><area shape="rect" id="node42" href="cvmx-coremask_8h.html" title="Module to support operations on bitmap of cores." alt="" coords="869,469,1011,499"/><area shape="rect" id="node53" href="cvmx-csr-enums_8h.html" title="Definitions for enumerations used with Octeon CSRs." alt="" coords="1307,392,1453,421"/><area shape="rect" id="node55" href="cvmx-csr-typedefs_8h.html" title="Configuration and status register (CSR) address and type definitions for Octeon." alt="" coords="1680,392,1843,421"/><area shape="rect" id="node57" href="cvmx-agl-defs_8h.html" title="cvmx&#45;agl&#45;defs.h" alt="" coords="1211,469,1341,499"/><area shape="rect" id="node59" href="cvmx-ase-defs_8h.html" title="cvmx&#45;ase&#45;defs.h" alt="" coords="1365,469,1501,499"/><area shape="rect" id="node61" href="cvmx-asxx-defs_8h.html" title="cvmx&#45;asxx&#45;defs.h" alt="" coords="1525,469,1667,499"/><area shape="rect" id="node63" href="cvmx-asx0-defs_8h.html" title="cvmx&#45;asx0&#45;defs.h" alt="" coords="1691,469,1832,499"/><area shape="rect" id="node65" href="cvmx-bbp-defs_8h.html" title="cvmx&#45;bbp&#45;defs.h" alt="" coords="1856,469,1992,499"/><area shape="rect" id="node67" href="cvmx-bbxa-defs_8h.html" title="cvmx&#45;bbxa&#45;defs.h" alt="" coords="2016,469,2160,499"/><area shape="rect" id="node69" href="cvmx-bbxbx-defs_8h.html" title="cvmx&#45;bbxbx&#45;defs.h" alt="" coords="1035,469,1187,499"/><area shape="rect" id="node71" href="cvmx-dpi-defs_8h.html" title="cvmx&#45;dpi&#45;defs.h" alt="" coords="2184,469,2315,499"/><area shape="rect" id="node73" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="2440,469,2573,499"/><area shape="rect" id="node75" href="cvmx-mio-defs_8h.html" title="cvmx&#45;mio&#45;defs.h" alt="" coords="2597,469,2733,499"/><area shape="rect" id="node87" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="2757,469,2885,499"/><area shape="rect" id="node91" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="2621,392,2728,421"/><area shape="rect" id="node95" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="2491,392,2597,421"/><area shape="rect" id="node103" href="cvmx-atomic_8h.html" title="This file provides atomic operations." alt="" coords="2307,160,2429,189"/><area shape="rect" id="node112" href="cvmx-helper-util_8h.html" title="Small helper utilities." alt="" coords="2729,160,2873,189"/><area shape="rect" id="node116" href="cvmx-helper_8h.html" title="Helper functions for common, but complicated tasks." alt="" coords="2851,237,2968,267"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f">cvmx_dma_engine_get_num</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of DMA engimes supported by this chip.  <a href="#a0ee5845e7d112441f7056164eccacb1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a090dfae9a2ee5a226a7f529f4da6e35b">cvmx_dma_engine_initialize</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the DMA engines for use.  <a href="#a090dfae9a2ee5a226a7f529f4da6e35b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a49edd5f940a2a82820c19b48ad008632">EXPORT_SYMBOL</a> (cvmx_dma_engine_initialize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#ac02aea577bbe5174ea4e6a879bcab2d8">cvmx_dma_engine_shutdown</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shutdown all DMA engines.  <a href="#ac02aea577bbe5174ea4e6a879bcab2d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a647d24091ffa4e0810922fb2bfd80b03">EXPORT_SYMBOL</a> (cvmx_dma_engine_shutdown)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a53d1631c0ef8f3cd0f1476b999446d61">cvmx_dma_engine_submit</a> (int engine, <a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a> header, int num_buffers, <a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a> buffers[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Submit a series of DMA command to the DMA engines.  <a href="#a53d1631c0ef8f3cd0f1476b999446d61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a5cc210922555fbe353e57a5b009e3378">__cvmx_dma_engine_build_internal_pointers</a> (<a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a> *buffers, uint64_t address, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a5cc210922555fbe353e57a5b009e3378"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a02b9abaaf9e4a2e1ccff3b02209b9424">__cvmx_dma_engine_build_external_pointers</a> (<a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a> *buffers, uint64_t address, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a02b9abaaf9e4a2e1ccff3b02209b9424"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a92cbfa2eec74caed96e0716590f372fb">cvmx_dma_engine_transfer</a> (int engine, <a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a> header, uint64_t first_address, uint64_t last_address, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Build the first and last pointers based on a DMA engine header and submit them to the engine.  <a href="#a92cbfa2eec74caed96e0716590f372fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#adbf39062e4488f08dc365247d9421346">cvmx_dma_set_cmd_que_pool_config</a> (int64_t pool, uint64_t buffer_size, uint64_t buffer_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the FPA pool data for dma engine in internal data structure.  <a href="#adbf39062e4488f08dc365247d9421346"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a523ff576b1527cb2e24aeffcecee85f5">cvmx_dma_get_cmd_que_pool_config</a> (<a class="el" href="structcvmx__fpa__pool__config.html">cvmx_fpa_pool_config_t</a> *cmd_que_pool_cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the FPA pool data for dma engine from internal data structure.  <a href="#a523ff576b1527cb2e24aeffcecee85f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#a307f461bec81b8069171988f4e7cb36d">EXPORT_SYMBOL</a> (cvmx_dma_engine_transfer)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CVMX_SHARED <a class="el" href="structcvmx__dma__config__t.html">cvmx_dma_config_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8c.html#aeb1335445278b0bb289c5851a5dcf96b">dma_config</a> = {.command_queue_pool = {2,1024,0}}</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Interface to the PCI / PCIe DMA engines. </p>
<p>These are only avialable on chips with PCI / PCIe.</p>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd>127394 </dd></dl>
<hr/>
 <hr/><h2>Function Documentation</h2>
<a class="anchor" id="a02b9abaaf9e4a2e1ccff3b02209b9424"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::__cvmx_dma_engine_build_external_pointers" ref="a02b9abaaf9e4a2e1ccff3b02209b9424" args="(cvmx_dma_engine_buffer_t *buffers, uint64_t address, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_dma_engine_build_external_pointers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a> *&nbsp;</td>
          <td class="paramname"> <em>buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 Function used by <a class="el" href="cvmx-dma-engine_8c.html#a92cbfa2eec74caed96e0716590f372fb" title="Build the first and last pointers based on a DMA engine header and submit them to...">cvmx_dma_engine_transfer()</a> to build the PCI / PCIe address list. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffers</em>&nbsp;</td><td>Location to store the list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>Address to build list for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Length of the memory pointed to by address</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of PCI / PCIe address chunks created. The number of words used will be segments + (segments-1)/4 + 1. </dd></dl>

</div>
</div>
<a class="anchor" id="a5cc210922555fbe353e57a5b009e3378"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::__cvmx_dma_engine_build_internal_pointers" ref="a5cc210922555fbe353e57a5b009e3378" args="(cvmx_dma_engine_buffer_t *buffers, uint64_t address, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_dma_engine_build_internal_pointers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a> *&nbsp;</td>
          <td class="paramname"> <em>buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 Function used by <a class="el" href="cvmx-dma-engine_8c.html#a92cbfa2eec74caed96e0716590f372fb" title="Build the first and last pointers based on a DMA engine header and submit them to...">cvmx_dma_engine_transfer()</a> to build the internal address list.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffers</em>&nbsp;</td><td>Location to store the list </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>address</em>&nbsp;</td><td>Address to build list for </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Length of the memory pointed to by address</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of internal pointer chunks created </dd></dl>

</div>
</div>
<a class="anchor" id="a0ee5845e7d112441f7056164eccacb1f"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_engine_get_num" ref="a0ee5845e7d112441f7056164eccacb1f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_get_num </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the number of DMA engimes supported by this chip. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of DMA engines </dd></dl>

</div>
</div>
<a class="anchor" id="a090dfae9a2ee5a226a7f529f4da6e35b"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_engine_initialize" ref="a090dfae9a2ee5a226a7f529f4da6e35b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_initialize </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the DMA engines for use. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

<p><p>It allocate pools for dma command queues</p>
</p>

</div>
</div>
<a class="anchor" id="ac02aea577bbe5174ea4e6a879bcab2d8"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_engine_shutdown" ref="ac02aea577bbe5174ea4e6a879bcab2d8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Shutdown all DMA engines. </p>
<p>The engines must be idle when this function is called.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a53d1631c0ef8f3cd0f1476b999446d61"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_engine_submit" ref="a53d1631c0ef8f3cd0f1476b999446d61" args="(int engine, cvmx_dma_engine_header_t header, int num_buffers, cvmx_dma_engine_buffer_t buffers[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_submit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a>&nbsp;</td>
          <td class="paramname"> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a>&nbsp;</td>
          <td class="paramname"> <em>buffers</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Submit a series of DMA command to the DMA engines. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>engine</em>&nbsp;</td><td>Engine to submit to (0 to <a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f" title="Return the number of DMA engimes supported by this chip.">cvmx_dma_engine_get_num()</a>-1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>Command header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_buffers</em>&nbsp;</td><td>The number of data pointers </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffers</em>&nbsp;</td><td>Command data pointers</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a92cbfa2eec74caed96e0716590f372fb"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_engine_transfer" ref="a92cbfa2eec74caed96e0716590f372fb" args="(int engine, cvmx_dma_engine_header_t header, uint64_t first_address, uint64_t last_address, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_transfer </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a>&nbsp;</td>
          <td class="paramname"> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>first_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>last_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Build the first and last pointers based on a DMA engine header and submit them to the engine. </p>
<p>The purpose of this function is to simplify the building of DMA engine commands by automatically converting a simple address and size into the apropriate internal or PCI / PCIe address list. This function does not support gather lists, so you will need to build your own lists in that case.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>engine</em>&nbsp;</td><td>Engine to submit to (0 to <a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f" title="Return the number of DMA engimes supported by this chip.">cvmx_dma_engine_get_num()</a>-1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>DMA Command header. Note that the nfst and nlst fields do not need to be filled in. All other fields must be set properly. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>first_address</em>&nbsp;</td><td>Address to use for the first pointers. In the case of INTERNAL, INBOUND, and OUTBOUND this is an Octeon memory address. In the case of EXTERNAL, this is the source PCI / PCIe address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_address</em>&nbsp;</td><td>Address to use for the last pointers. In the case of EXTERNAL, INBOUND, and OUTBOUND this is a PCI / PCIe address. In the case of INTERNAL, this is the Octeon memory destination address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the transfer to perform.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a523ff576b1527cb2e24aeffcecee85f5"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_get_cmd_que_pool_config" ref="a523ff576b1527cb2e24aeffcecee85f5" args="(cvmx_fpa_pool_config_t *cmd_que_pool_cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_dma_get_cmd_que_pool_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__fpa__pool__config.html">cvmx_fpa_pool_config_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cmd_que_pool_cfg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the FPA pool data for dma engine from internal data structure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd_que_pool_cfg</em>&nbsp;</td><td>pointer to fpa data structure to get data into </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adbf39062e4488f08dc365247d9421346"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::cvmx_dma_set_cmd_que_pool_config" ref="adbf39062e4488f08dc365247d9421346" args="(int64_t pool, uint64_t buffer_size, uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_dma_set_cmd_que_pool_config </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the FPA pool data for dma engine in internal data structure. </p>
<p>Sets the internal FPA pool data structure for dma comamnd queue. </p>

</div>
</div>
<a class="anchor" id="a307f461bec81b8069171988f4e7cb36d"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::EXPORT_SYMBOL" ref="a307f461bec81b8069171988f4e7cb36d" args="(cvmx_dma_engine_transfer)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_dma_engine_transfer&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a647d24091ffa4e0810922fb2bfd80b03"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::EXPORT_SYMBOL" ref="a647d24091ffa4e0810922fb2bfd80b03" args="(cvmx_dma_engine_shutdown)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_dma_engine_shutdown&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a49edd5f940a2a82820c19b48ad008632"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::EXPORT_SYMBOL" ref="a49edd5f940a2a82820c19b48ad008632" args="(cvmx_dma_engine_initialize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_dma_engine_initialize&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aeb1335445278b0bb289c5851a5dcf96b"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.c::dma_config" ref="aeb1335445278b0bb289c5851a5dcf96b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__dma__config__t.html">cvmx_dma_config_t</a> <a class="el" href="cvmx-dma-engine_8h.html#aeb1335445278b0bb289c5851a5dcf96b">dma_config</a> = {.command_queue_pool = {2,1024,0}}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
