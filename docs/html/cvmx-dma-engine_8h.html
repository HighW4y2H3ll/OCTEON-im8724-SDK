<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-dma-engine.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-dma-engine.h File Reference</h1>
<p>Interface to the PCI / PCIe DMA engines.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx-dpi-defs_8h_source.html">cvmx-dpi-defs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-fpa_8h_source.html">cvmx-fpa.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-dma-engine.h:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-dma-engine_8h__incl.png" border="0" usemap="#cvmx-dma-engine_8h_map" alt=""/></div>
<map name="cvmx-dma-engine_8h_map" id="cvmx-dma-engine_8h">
<area shape="rect" id="node3" href="cvmx-dpi-defs_8h.html" title="cvmx&#45;dpi&#45;defs.h" alt="" coords="5,392,136,421"/><area shape="rect" id="node5" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="2983,83,3081,112"/><area shape="rect" id="node7" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="2968,237,3096,267"/><area shape="rect" id="node9" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="3905,160,3975,189"/><area shape="rect" id="node96" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="2771,392,2904,421"/><area shape="rect" id="node108" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="2848,160,2955,189"/><area shape="rect" id="node112" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="2979,160,3085,189"/><area shape="rect" id="node11" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="3367,315,3500,344"/><area shape="rect" id="node33" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="4004,315,4127,344"/><area shape="rect" id="node35" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="3017,315,3145,344"/><area shape="rect" id="node38" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="3864,469,3968,499"/><area shape="rect" id="node40" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="4028,237,4151,267"/><area shape="rect" id="node42" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="4175,237,4284,267"/><area shape="rect" id="node44" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="3780,237,3903,267"/><area shape="rect" id="node54" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="4308,237,4436,267"/><area shape="rect" id="node56" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="3327,237,3423,267"/><area shape="rect" id="node98" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="3623,315,3727,344"/><area shape="rect" id="node101" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="4460,237,4569,267"/><area shape="rect" id="node104" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="4593,237,4732,267"/><area shape="rect" id="node13" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="2928,392,3024,421"/><area shape="rect" id="node46" href="cvmx-app-init_8h.html" title="Header file for simple executive application initialization." alt="" coords="3801,315,3929,344"/><area shape="rect" id="node48" href="cvmx-coremask_8h.html" title="Module to support operations on bitmap of cores." alt="" coords="3792,392,3933,421"/><area shape="rect" id="node59" href="cvmx-csr-enums_8h.html" title="Definitions for enumerations used with Octeon CSRs." alt="" coords="3196,315,3343,344"/><area shape="rect" id="node61" href="cvmx-csr-typedefs_8h.html" title="Configuration and status register (CSR) address and type definitions for Octeon." alt="" coords="1464,315,1627,344"/><area shape="rect" id="node63" href="cvmx-agl-defs_8h.html" title="cvmx&#45;agl&#45;defs.h" alt="" coords="160,392,291,421"/><area shape="rect" id="node65" href="cvmx-ase-defs_8h.html" title="cvmx&#45;ase&#45;defs.h" alt="" coords="315,392,451,421"/><area shape="rect" id="node67" href="cvmx-asxx-defs_8h.html" title="cvmx&#45;asxx&#45;defs.h" alt="" coords="475,392,616,421"/><area shape="rect" id="node69" href="cvmx-asx0-defs_8h.html" title="cvmx&#45;asx0&#45;defs.h" alt="" coords="640,392,781,421"/><area shape="rect" id="node71" href="cvmx-bbp-defs_8h.html" title="cvmx&#45;bbp&#45;defs.h" alt="" coords="805,392,941,421"/><area shape="rect" id="node73" href="cvmx-bbxa-defs_8h.html" title="cvmx&#45;bbxa&#45;defs.h" alt="" coords="965,392,1109,421"/><area shape="rect" id="node75" href="cvmx-bbxbx-defs_8h.html" title="cvmx&#45;bbxbx&#45;defs.h" alt="" coords="1133,392,1285,421"/><area shape="rect" id="node77" href="cvmx-bbxc-defs_8h.html" title="cvmx&#45;bbxc&#45;defs.h" alt="" coords="1309,392,1453,421"/><area shape="rect" id="node79" href="cvmx-bch-defs_8h.html" title="cvmx&#45;bch&#45;defs.h" alt="" coords="1477,392,1613,421"/><area shape="rect" id="node81" href="cvmx-bgxx-defs_8h.html" title="cvmx&#45;bgxx&#45;defs.h" alt="" coords="1637,392,1781,421"/><area shape="rect" id="node83" href="cvmx-bts-defs_8h.html" title="cvmx&#45;bts&#45;defs.h" alt="" coords="1805,392,1939,421"/><area shape="rect" id="node85" href="cvmx-ciu2-defs_8h.html" title="cvmx&#45;ciu2&#45;defs.h" alt="" coords="1963,392,2101,421"/><area shape="rect" id="node87" href="cvmx-ciu3-defs_8h.html" title="cvmx&#45;ciu3&#45;defs.h" alt="" coords="2125,392,2264,421"/><area shape="rect" id="node89" href="cvmx-ciu-defs_8h.html" title="cvmx&#45;ciu&#45;defs.h" alt="" coords="2288,392,2419,421"/><area shape="rect" id="node91" href="cvmx-cprix-defs_8h.html" title="cvmx&#45;cprix&#45;defs.h" alt="" coords="2443,392,2587,421"/><area shape="rect" id="node93" href="cvmx-dbg-defs_8h.html" title="cvmx&#45;dbg&#45;defs.h" alt="" coords="2611,392,2747,421"/></map>
</div>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-dma-engine_8h__dep__incl.png" border="0" usemap="#cvmx-dma-engine_8hdep_map" alt=""/></div>
<map name="cvmx-dma-engine_8hdep_map" id="cvmx-dma-engine_8hdep">
<area shape="rect" id="node3" href="cvmx-config-init_8c.html" title="cvmx&#45;config&#45;init.c" alt="" coords="5,83,149,112"/><area shape="rect" id="node5" href="cvmx-dma-engine_8c.html" title="Interface to the PCI / PCIe DMA engines." alt="" coords="173,83,331,112"/></map>
</div>

<p><a href="cvmx-dma-engine_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__dma__engine__header__word0__t.html">cvmx_dma_engine_header_word0_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__dma__engine__header__word1__t.html">cvmx_dma_engine_header_word1_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">union &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcvmx__dma__config__t.html">cvmx_dma_config_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal data structure to hold dma related configuration (Only FPA configuration for now).  <a href="structcvmx__dma__config__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a5033cee0e91034e80d6bec509d226521">cvmx_dma_engine_header_t</a></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a591f6425ca6ece80f2abe49e8760c833">cvmx_dma_engine_transfer_t</a> { <br/>
&nbsp;&nbsp;<a class="el" href="cvmx-dma-engine_8h.html#a591f6425ca6ece80f2abe49e8760c833a0262ac3abe599a4d4cfc4ceea8e929f3">CVMX_DMA_ENGINE_TRANSFER_OUTBOUND</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-dma-engine_8h.html#a591f6425ca6ece80f2abe49e8760c833ad0f98cb4c05e0eb82cc6016602bdf64d">CVMX_DMA_ENGINE_TRANSFER_INBOUND</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-dma-engine_8h.html#a591f6425ca6ece80f2abe49e8760c833a47ffb09075b41c4d384eee2cd07ca76a">CVMX_DMA_ENGINE_TRANSFER_INTERNAL</a> =  2, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-dma-engine_8h.html#a591f6425ca6ece80f2abe49e8760c833ad57b317db834e6279b348d2b61d399bb">CVMX_DMA_ENGINE_TRANSFER_EXTERNAL</a> =  3
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a277af0eac145748120f9acaf1f265815">cvmx_fpa_get_dma_pool</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the pool used by dma engine comamnd queue.  <a href="#a277af0eac145748120f9acaf1f265815"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#ab4c8fad38efeb44287ee97d59fcc6762">cvmx_fpa_get_dma_pool_block_size</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the block size of buffer in command queue.  <a href="#ab4c8fad38efeb44287ee97d59fcc6762"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#adbf39062e4488f08dc365247d9421346">cvmx_dma_set_cmd_que_pool_config</a> (int64_t pool, uint64_t buffer_size, uint64_t buffer_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the internal FPA pool data structure for dma comamnd queue.  <a href="#adbf39062e4488f08dc365247d9421346"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a523ff576b1527cb2e24aeffcecee85f5">cvmx_dma_get_cmd_que_pool_config</a> (<a class="el" href="structcvmx__fpa__pool__config.html">cvmx_fpa_pool_config_t</a> *cmd_que_pool_cfg)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the FPA pool data for dma engine from internal data structure.  <a href="#a523ff576b1527cb2e24aeffcecee85f5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a090dfae9a2ee5a226a7f529f4da6e35b">cvmx_dma_engine_initialize</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the DMA engines for use.  <a href="#a090dfae9a2ee5a226a7f529f4da6e35b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#ac02aea577bbe5174ea4e6a879bcab2d8">cvmx_dma_engine_shutdown</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shutdown all DMA engines.  <a href="#ac02aea577bbe5174ea4e6a879bcab2d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a0ee5845e7d112441f7056164eccacb1f">cvmx_dma_engine_get_num</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the number of DMA engimes supported by this chip.  <a href="#a0ee5845e7d112441f7056164eccacb1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a53d1631c0ef8f3cd0f1476b999446d61">cvmx_dma_engine_submit</a> (int engine, <a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a> header, int num_buffers, <a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a> buffers[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Submit a series of DMA command to the DMA engines.  <a href="#a53d1631c0ef8f3cd0f1476b999446d61"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a92cbfa2eec74caed96e0716590f372fb">cvmx_dma_engine_transfer</a> (int engine, <a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a> header, uint64_t first_address, uint64_t last_address, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Build the first and last pointers based on a DMA engine header and submit them to the engine.  <a href="#a92cbfa2eec74caed96e0716590f372fb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#aaa0c70b741aa33bffd787f2287be8416">cvmx_dma_engine_memcpy</a> (int engine, void *dest, void *source, int length)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simplified interface to the DMA engines to emulate memcpy().  <a href="#aaa0c70b741aa33bffd787f2287be8416"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#a4f698ad1e76e4d419d20b3a36af1baf0">cvmx_dma_engine_memcpy_zero_byte</a> (int engine, void *dest, void *source, int length, int core)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Simplified interface to the DMA engines to emulate memcpy() When dici_mode is enabled, send zero byte.  <a href="#a4f698ad1e76e4d419d20b3a36af1baf0"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CVMX_SHARED <a class="el" href="structcvmx__dma__config__t.html">cvmx_dma_config_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-dma-engine_8h.html#aeb1335445278b0bb289c5851a5dcf96b">dma_config</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Interface to the PCI / PCIe DMA engines. </p>
<p>These are only avialable on chips with PCI / PCIe.</p>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd>121436 </dd></dl>
<hr/>
 <hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a5033cee0e91034e80d6bec509d226521"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_header_t" ref="a5033cee0e91034e80d6bec509d226521" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header</a>  <a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a591f6425ca6ece80f2abe49e8760c833"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_transfer_t" ref="a591f6425ca6ece80f2abe49e8760c833" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvmx-dma-engine_8h.html#a591f6425ca6ece80f2abe49e8760c833">cvmx_dma_engine_transfer_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a591f6425ca6ece80f2abe49e8760c833a0262ac3abe599a4d4cfc4ceea8e929f3"></a><!-- doxytag: member="CVMX_DMA_ENGINE_TRANSFER_OUTBOUND" ref="a591f6425ca6ece80f2abe49e8760c833a0262ac3abe599a4d4cfc4ceea8e929f3" args="" -->CVMX_DMA_ENGINE_TRANSFER_OUTBOUND</em>&nbsp;</td><td>
<p>OUTBOUND (read from L2/DRAM, write into PCI / PCIe memory space). </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a591f6425ca6ece80f2abe49e8760c833ad0f98cb4c05e0eb82cc6016602bdf64d"></a><!-- doxytag: member="CVMX_DMA_ENGINE_TRANSFER_INBOUND" ref="a591f6425ca6ece80f2abe49e8760c833ad0f98cb4c05e0eb82cc6016602bdf64d" args="" -->CVMX_DMA_ENGINE_TRANSFER_INBOUND</em>&nbsp;</td><td>
<p>INBOUND (read from PCI / PCIe memory space, write into L2/DRAM). </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a591f6425ca6ece80f2abe49e8760c833a47ffb09075b41c4d384eee2cd07ca76a"></a><!-- doxytag: member="CVMX_DMA_ENGINE_TRANSFER_INTERNAL" ref="a591f6425ca6ece80f2abe49e8760c833a47ffb09075b41c4d384eee2cd07ca76a" args="" -->CVMX_DMA_ENGINE_TRANSFER_INTERNAL</em>&nbsp;</td><td>
<p>INTERNAL-ONLY (read from L2/DRAM, write into L2/DRAM). </p>
<p>Only available on chips with PCIe </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a591f6425ca6ece80f2abe49e8760c833ad57b317db834e6279b348d2b61d399bb"></a><!-- doxytag: member="CVMX_DMA_ENGINE_TRANSFER_EXTERNAL" ref="a591f6425ca6ece80f2abe49e8760c833ad57b317db834e6279b348d2b61d399bb" args="" -->CVMX_DMA_ENGINE_TRANSFER_EXTERNAL</em>&nbsp;</td><td>
<p>EXTERNAL-ONLY (read from PCIe memory space, write into PCIe memory space). </p>
<p>Only available on chips with PCIe </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0ee5845e7d112441f7056164eccacb1f"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_get_num" ref="a0ee5845e7d112441f7056164eccacb1f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_get_num </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the number of DMA engimes supported by this chip. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of DMA engines </dd></dl>

</div>
</div>
<a class="anchor" id="a090dfae9a2ee5a226a7f529f4da6e35b"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_initialize" ref="a090dfae9a2ee5a226a7f529f4da6e35b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_initialize </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the DMA engines for use. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

<p><p>It allocate pools for dma command queues</p>
</p>

</div>
</div>
<a class="anchor" id="aaa0c70b741aa33bffd787f2287be8416"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_memcpy" ref="aaa0c70b741aa33bffd787f2287be8416" args="(int engine, void *dest, void *source, int length)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_dma_engine_memcpy </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simplified interface to the DMA engines to emulate memcpy(). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>engine</em>&nbsp;</td><td>Engine to submit to (0 to <a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f" title="Return the number of DMA engimes supported by this chip.">cvmx_dma_engine_get_num()</a>-1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dest</em>&nbsp;</td><td>Pointer to the destination memory. <a class="el" href="cvmx-access_8h.html#a76ed79b4650d01f82f1f517be07fe7c5" title="Convert a memory pointer (void*) into a hardware compatable memory address (uint64_t)...">cvmx_ptr_to_phys()</a> will be used to turn this into a physical address. It cannot be a local or CVMX_SHARED block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>source</em>&nbsp;</td><td>Pointer to the source memory. <a class="el" href="cvmx-access_8h.html#a76ed79b4650d01f82f1f517be07fe7c5" title="Convert a memory pointer (void*) into a hardware compatable memory address (uint64_t)...">cvmx_ptr_to_phys()</a> will be used to turn this into a physical address. It cannot be a local or CVMX_SHARED block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Number of bytes to copy</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a4f698ad1e76e4d419d20b3a36af1baf0"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_memcpy_zero_byte" ref="a4f698ad1e76e4d419d20b3a36af1baf0" args="(int engine, void *dest, void *source, int length, int core)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_dma_engine_memcpy_zero_byte </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>core</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simplified interface to the DMA engines to emulate memcpy() When dici_mode is enabled, send zero byte. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>engine</em>&nbsp;</td><td>Engine to submit to (0 to <a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f" title="Return the number of DMA engimes supported by this chip.">cvmx_dma_engine_get_num()</a>-1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dest</em>&nbsp;</td><td>Pointer to the destination memory. <a class="el" href="cvmx-access_8h.html#a76ed79b4650d01f82f1f517be07fe7c5" title="Convert a memory pointer (void*) into a hardware compatable memory address (uint64_t)...">cvmx_ptr_to_phys()</a> will be used to turn this into a physical address. It cannot be a local or CVMX_SHARED block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>source</em>&nbsp;</td><td>Pointer to the source memory. <a class="el" href="cvmx-access_8h.html#a76ed79b4650d01f82f1f517be07fe7c5" title="Convert a memory pointer (void*) into a hardware compatable memory address (uint64_t)...">cvmx_ptr_to_phys()</a> will be used to turn this into a physical address. It cannot be a local or CVMX_SHARED block. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>Number of bytes to copy </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>core</em>&nbsp;</td><td>core number for zero byte write</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ac02aea577bbe5174ea4e6a879bcab2d8"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_shutdown" ref="ac02aea577bbe5174ea4e6a879bcab2d8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Shutdown all DMA engines. </p>
<p>The engeines must be idle when this function is called.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure</dd></dl>
<p>The engines must be idle when this function is called.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a53d1631c0ef8f3cd0f1476b999446d61"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_submit" ref="a53d1631c0ef8f3cd0f1476b999446d61" args="(int engine, cvmx_dma_engine_header_t header, int num_buffers, cvmx_dma_engine_buffer_t buffers[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_submit </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a>&nbsp;</td>
          <td class="paramname"> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unioncvmx__dma__engine__buffer__t.html">cvmx_dma_engine_buffer_t</a>&nbsp;</td>
          <td class="paramname"> <em>buffers</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Submit a series of DMA command to the DMA engines. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>engine</em>&nbsp;</td><td>Engine to submit to (0 to <a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f" title="Return the number of DMA engimes supported by this chip.">cvmx_dma_engine_get_num()</a>-1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>Command header </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_buffers</em>&nbsp;</td><td>The number of data pointers </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffers</em>&nbsp;</td><td>Command data pointers</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a92cbfa2eec74caed96e0716590f372fb"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_engine_transfer" ref="a92cbfa2eec74caed96e0716590f372fb" args="(int engine, cvmx_dma_engine_header_t header, uint64_t first_address, uint64_t last_address, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_dma_engine_transfer </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>engine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcvmx__dma__engine__header.html">cvmx_dma_engine_header_t</a>&nbsp;</td>
          <td class="paramname"> <em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>first_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>last_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Build the first and last pointers based on a DMA engine header and submit them to the engine. </p>
<p>The purpose of this function is to simplify the building of DMA engine commands by automatically converting a simple address and size into the apropriate internal or PCI / PCIe address list. This function does not support gather lists, so you will need to build your own lists in that case.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>engine</em>&nbsp;</td><td>Engine to submit to (0 to <a class="el" href="cvmx-dma-engine_8c.html#a0ee5845e7d112441f7056164eccacb1f" title="Return the number of DMA engimes supported by this chip.">cvmx_dma_engine_get_num()</a>-1) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>header</em>&nbsp;</td><td>DMA Command header. Note that the nfst and nlst fields do not need to be filled in. All other fields must be set properly. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>first_address</em>&nbsp;</td><td>Address to use for the first pointers. In the case of INTERNAL, INBOUND, and OUTBOUND this is an Octeon memory address. In the case of EXTERNAL, this is the source PCI / PCIe address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_address</em>&nbsp;</td><td>Address to use for the last pointers. In the case of EXTERNAL, INBOUND, and OUTBOUND this is a PCI / PCIe address. In the case of INTERNAL, this is the Octeon memory destination address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the transfer to perform.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a523ff576b1527cb2e24aeffcecee85f5"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_get_cmd_que_pool_config" ref="a523ff576b1527cb2e24aeffcecee85f5" args="(cvmx_fpa_pool_config_t *cmd_que_pool_cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_dma_get_cmd_que_pool_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__fpa__pool__config.html">cvmx_fpa_pool_config_t</a> *&nbsp;</td>
          <td class="paramname"> <em>cmd_que_pool_cfg</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the FPA pool data for dma engine from internal data structure. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cmd_que_pool_cfg</em>&nbsp;</td><td>pointer to fpa data structure to get data into </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adbf39062e4488f08dc365247d9421346"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_dma_set_cmd_que_pool_config" ref="adbf39062e4488f08dc365247d9421346" args="(int64_t pool, uint64_t buffer_size, uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_dma_set_cmd_que_pool_config </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the internal FPA pool data structure for dma comamnd queue. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>fpa pool number yo use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>buffer size of pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_count</em>&nbsp;</td><td>number of buufers to allocate to pool </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a277af0eac145748120f9acaf1f265815"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_fpa_get_dma_pool" ref="a277af0eac145748120f9acaf1f265815" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int64_t cvmx_fpa_get_dma_pool </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the pool used by dma engine comamnd queue. </p>

</div>
</div>
<a class="anchor" id="ab4c8fad38efeb44287ee97d59fcc6762"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::cvmx_fpa_get_dma_pool_block_size" ref="ab4c8fad38efeb44287ee97d59fcc6762" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint64_t cvmx_fpa_get_dma_pool_block_size </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the block size of buffer in command queue. </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="aeb1335445278b0bb289c5851a5dcf96b"></a><!-- doxytag: member="cvmx&#45;dma&#45;engine.h::dma_config" ref="aeb1335445278b0bb289c5851a5dcf96b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__dma__config__t.html">cvmx_dma_config_t</a> <a class="el" href="cvmx-dma-engine_8h.html#aeb1335445278b0bb289c5851a5dcf96b">dma_config</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
