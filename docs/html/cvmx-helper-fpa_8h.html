<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-helper-fpa.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-helper-fpa.h File Reference</h1>
<p>Helper functions for FPA setup.  
<a href="#_details">More...</a></p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-helper-fpa_8h__dep__incl.png" border="0" usemap="#cvmx-helper-fpa_8hdep_map" alt=""/></div>
<map name="cvmx-helper-fpa_8hdep_map" id="cvmx-helper-fpa_8hdep">
<area shape="rect" id="node3" href="cvmx-bch_8c.html" title="Interface to the CN70XX, CN78XX hardware BCH engine." alt="" coords="62,83,163,112"/><area shape="rect" id="node5" href="cvmx-dfa_8c.html" title="Support library for the CN31XX, CN38XX, and CN58XX hardware DFA engine." alt="" coords="187,83,286,112"/><area shape="rect" id="node7" href="cvmx-dma-engine_8c.html" title="Interface to the PCI / PCIe DMA engines." alt="" coords="310,83,467,112"/><area shape="rect" id="node9" href="cvmx-fpa_8c.html" title="Support library for the hardware Free Pool Allocator." alt="" coords="82,160,180,189"/><area shape="rect" id="node11" href="cvmx-helper-fpa_8c.html" title="Helper functions for FPA setup." alt="" coords="1915,83,2059,112"/><area shape="rect" id="node13" href="cvmx-helper_8c.html" title="Helper functions for common, but complicated tasks." alt="" coords="1191,315,1308,344"/><area shape="rect" id="node15" href="cvmx-helper_8h.html" title="Helper functions for common, but complicated tasks." alt="" coords="1774,83,1891,112"/><area shape="rect" id="node124" href="cvmx-hfa_8c.html" title="Support library for the CN63XX, CN68XX hardware HFA engine." alt="" coords="2083,83,2182,112"/><area shape="rect" id="node126" href="cvmx-pow_8c.html" title="Interface to the hardware Packet Order / Work unit." alt="" coords="2206,83,2307,112"/><area shape="rect" id="node128" href="cvmx-tim_8c.html" title="Support library for the hardware work queue timers." alt="" coords="2331,83,2430,112"/><area shape="rect" id="node130" href="cvmx-zip_8c.html" title="Source file for the zip (deflate) block." alt="" coords="2454,83,2550,112"/><area shape="rect" id="node17" href="cvmx-agl_8h.html" title="Functions for AGL (RGMII) commong initialization, configuration." alt="" coords="3204,160,3300,189"/><area shape="rect" id="node21" href="cvmx-helper-agl_8c.html" title="Functions for AGL (RGMII) initialization, configuration, and monitoring." alt="" coords="2996,237,3138,267"/><area shape="rect" id="node23" href="cvmx-helper-agl_8h.html" title="Functions for AGL (RGMII) initialization, configuration, and monitoring." alt="" coords="3282,237,3423,267"/><area shape="rect" id="node26" href="cvmx-appcfg-transport_8c.html" title="cvmx&#45;appcfg&#45;transport.c" alt="" coords="786,237,975,267"/><area shape="rect" id="node28" href="cvmx-error-custom_8c.html" title="Prototypes for custom error handler function not handled by the default message display..." alt="" coords="828,160,994,189"/><area shape="rect" id="node30" href="cvmx-error-gmx_8c.html" title="cvmx&#45;error&#45;gmx.c" alt="" coords="1018,160,1159,189"/><area shape="rect" id="node35" href="cvmx-helper-bgx_8c.html" title="Functions to configure the BGX MAC." alt="" coords="1183,160,1330,189"/><area shape="rect" id="node37" href="cvmx-helper-board_8c.html" title="Helper functions to abstract board specific data about network ports from the rest..." alt="" coords="1100,237,1260,267"/><area shape="rect" id="node39" href="cvmx-helper-cfg_8c.html" title="Helper Functions for the Configuration Framework." alt="" coords="940,315,1084,344"/><area shape="rect" id="node41" href="cvmx-helper-errata_8c.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="2199,315,2364,344"/><area shape="rect" id="node43" href="cvmx-helper-ilk_8c.html" title="Functions for ILK initialization, configuration, and monitoring." alt="" coords="2658,315,2794,344"/><area shape="rect" id="node45" href="cvmx-helper-loop_8c.html" title="Functions for LOOP initialization, configuration, and monitoring." alt="" coords="1354,160,1503,189"/><area shape="rect" id="node47" href="cvmx-helper-npi_8c.html" title="Functions for NPI initialization, configuration, and monitoring." alt="" coords="3144,315,3286,344"/><area shape="rect" id="node49" href="cvmx-helper-pko_8c.html" title="Helper Functions for the PKO." alt="" coords="3474,315,3620,344"/><area shape="rect" id="node51" href="cvmx-helper-pko3_8c.html" title="cvmx&#45;helper&#45;pko3.c" alt="" coords="2767,237,2922,267"/><area shape="rect" id="node53" href="cvmx-helper-rgmii_8c.html" title="Functions for RGMII/GMII/MII initialization, configuration, and monitoring." alt="" coords="3726,315,3880,344"/><area shape="rect" id="node55" href="cvmx-helper-sfp_8c.html" title="cvmx&#45;helper&#45;sfp.c" alt="" coords="1404,237,1548,267"/><area shape="rect" id="node57" href="cvmx-helper-sgmii_8c.html" title="Functions for SGMII initialization, configuration, and monitoring." alt="" coords="1527,160,1684,189"/><area shape="rect" id="node59" href="cvmx-helper-spi_8c.html" title="Functions for SPI initialization, configuration, and monitoring." alt="" coords="1708,160,1850,189"/><area shape="rect" id="node61" href="cvmx-helper-spi_8h.html" title="Functions for SPI initialization, configuration, and monitoring." alt="" coords="3399,160,3540,189"/><area shape="rect" id="node66" href="cvmx-helper-srio_8c.html" title="Functions for SRIO initialization, configuration, and monitoring." alt="" coords="1924,160,2071,189"/><area shape="rect" id="node68" href="cvmx-helper-util_8c.html" title="Small helper utilities." alt="" coords="1538,315,1682,344"/><area shape="rect" id="node70" href="cvmx-helper-util_8h.html" title="Small helper utilities." alt="" coords="508,160,652,189"/><area shape="rect" id="node78" href="cvmx-higig_8h.html" title="Functions and typedefs for using Octeon in HiGig/HiGig+/HiGig2 mode over XAUI." alt="" coords="266,237,372,267"/><area shape="rect" id="node80" href="cvmx-hwpko_8h.html" title="Interface to the hardware Packet Output unit." alt="" coords="2626,237,2743,267"/><area shape="rect" id="node88" href="cvmx-pip_8h.html" title="Interface to the hardware Packet Input Processing unit." alt="" coords="1284,237,1380,267"/><area shape="rect" id="node94" href="cvmx-pko-internal-ports-range_8c.html" title="cvmx&#45;pko&#45;internal&#45;ports&#45;range.c" alt="" coords="396,237,639,267"/><area shape="rect" id="node96" href="cvmx-pko_8c.html" title="Support library for the hardware Packet Output unit." alt="" coords="663,237,762,267"/><area shape="rect" id="node98" href="cvmx-helper-xaui_8c.html" title="Functions for XAUI initialization, configuration, and monitoring." alt="" coords="2095,160,2244,189"/><area shape="rect" id="node103" href="cvmx-ila_8c.html" title="Functions to configure the ILA&#45;LA interface." alt="" coords="3615,237,3706,267"/><area shape="rect" id="node105" href="cvmx-ila_8h.html" title="This file contains defines for the ILA interface." alt="" coords="3564,160,3655,189"/><area shape="rect" id="node108" href="cvmx-mgmt-port_8h.html" title="Support functions for managing the MII management port." alt="" coords="2450,160,2602,189"/><area shape="rect" id="node113" href="cvmx-pko3_8h.html" title="cvmx&#45;pko3.h" alt="" coords="2319,160,2426,189"/><area shape="rect" id="node118" href="cvmx-srio_8c.html" title="Interface to SRIO." alt="" coords="2626,160,2724,189"/><area shape="rect" id="node120" href="cvmx-usb_8c.html" title="&quot;cvmx&#45;usb.c&quot; defines a set of low level USB functions to help developers..." alt="" coords="2748,160,2847,189"/><area shape="rect" id="node122" href="cvmx-usbd_8c.html" title="&quot;cvmx&#45;usbd.c&quot; defines a set of low level USB functions to help developers..." alt="" coords="2871,160,2978,189"/><area shape="rect" id="node19" href="cvmx-agl_8c.html" title="Functions for RGMII (MGMT) initialization, configuration, and monitoring." alt="" coords="3162,237,3258,267"/><area shape="rect" id="node63" href="cvmx-config-init_8c.html" title="cvmx&#45;config&#45;init.c" alt="" coords="3447,237,3591,267"/></map>
</div>

<p><a href="cvmx-helper-fpa_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-fpa_8h.html#a8098f73c9416fd2d41990cb47f45301a">cvmx_helper_initialize_fpa</a> (int packet_buffers, int work_queue_entries, int pko_buffers, int tim_buffers, int dfa_buffers)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Allocate memory and initialize the FPA pools using memory from cvmx-bootmem.  <a href="#a8098f73c9416fd2d41990cb47f45301a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-fpa_8h.html#aeca2ab1628dc0466effe334bd44f25ed">__cvmx_helper_initialize_fpa_pool</a> (int pool, uint64_t buffer_size, uint64_t buffers, const char *name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#aeca2ab1628dc0466effe334bd44f25ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-fpa_8h.html#acd06ec096e80e04735c89f2bc647b3df">cvmx_helper_shutdown_fpa_pools</a> (int node)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-fpa_8h.html#a0ed81105cc8523764ac0333f3d4e4697">cvmx_helper_fpa_dump</a> (int node)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Helper functions for FPA setup. </p>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd>75125 </dd></dl>
<hr/>
 <hr/><h2>Function Documentation</h2>
<a class="anchor" id="aeca2ab1628dc0466effe334bd44f25ed"></a><!-- doxytag: member="cvmx&#45;helper&#45;fpa.h::__cvmx_helper_initialize_fpa_pool" ref="aeca2ab1628dc0466effe334bd44f25ed" args="(int pool, uint64_t buffer_size, uint64_t buffers, const char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_initialize_fpa_pool </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 OBSOLETE</p>
<p>Allocate memory for and initialize a single FPA pool.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to initialize </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>Size of buffers to allocate in bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffers</em>&nbsp;</td><td>Number of buffers to put in the pool. Zero is allowed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>String name of the pool for debugging purposes </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero on failure</dd></dl>
<p>This function is only for transition, will be removed. </p>

</div>
</div>
<a class="anchor" id="a0ed81105cc8523764ac0333f3d4e4697"></a><!-- doxytag: member="cvmx&#45;helper&#45;fpa.h::cvmx_helper_fpa_dump" ref="a0ed81105cc8523764ac0333f3d4e4697" args="(int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_helper_fpa_dump </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8098f73c9416fd2d41990cb47f45301a"></a><!-- doxytag: member="cvmx&#45;helper&#45;fpa.h::cvmx_helper_initialize_fpa" ref="a8098f73c9416fd2d41990cb47f45301a" args="(int packet_buffers, int work_queue_entries, int pko_buffers, int tim_buffers, int dfa_buffers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_initialize_fpa </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>packet_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>work_queue_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pko_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>tim_buffers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dfa_buffers</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allocate memory and initialize the FPA pools using memory from cvmx-bootmem. </p>
<p>Sizes of each element in the pools is controlled by the cvmx-config.h header file. Specifying zero for any parameter will cause that FPA pool to not be setup. This is useful if you aren't using some of the hardware and want to save memory.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet_buffers</em>&nbsp;</td><td>Number of packet buffers to allocate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>work_queue_entries</em>&nbsp;</td><td>Number of work queue entries </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pko_buffers</em>&nbsp;</td><td>PKO Command buffers. You should at minimum have two per each PKO queue. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tim_buffers</em>&nbsp;</td><td>TIM ring buffer command queues. At least two per timer bucket is recommended. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dfa_buffers</em>&nbsp;</td><td>DFA command buffer. A relatively small (32 for example) number should work. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero if out of memory </dd></dl>

</div>
</div>
<a class="anchor" id="acd06ec096e80e04735c89f2bc647b3df"></a><!-- doxytag: member="cvmx&#45;helper&#45;fpa.h::cvmx_helper_shutdown_fpa_pools" ref="acd06ec096e80e04735c89f2bc647b3df" args="(int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_shutdown_fpa_pools </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
