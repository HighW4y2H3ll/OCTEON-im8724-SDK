<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-helper-ipd.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-helper-ipd.c File Reference</h1>
<p>IPD helper functions.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx_8h_source.html">cvmx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-version_8h_source.html">cvmx-version.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-error_8h_source.html">cvmx-error.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-fpa_8h_source.html">cvmx-fpa.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-ipd_8h_source.html">cvmx-ipd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-pip_8h_source.html">cvmx-pip.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-pki_8h_source.html">cvmx-helper-pki.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-helper-ipd.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-helper-ipd_8c__incl.png" border="0" usemap="#cvmx-helper-ipd_8c_map" alt=""/></div>
<map name="cvmx-helper-ipd_8c_map" id="cvmx-helper-ipd_8c">
<area shape="rect" id="node3" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="968,624,1037,653"/><area shape="rect" id="node69" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="1396,701,1495,731"/><area shape="rect" id="node83" href="cvmx-version_8h.html" title="cvmx&#45;version.h" alt="" coords="2200,83,2325,112"/><area shape="rect" id="node85" href="cvmx-error_8h.html" title="Interface to the Octeon extended error status." alt="" coords="1617,315,1724,344"/><area shape="rect" id="node88" href="cvmx-ipd_8h.html" title="Interface to the hardware Input Packet Data unit." alt="" coords="1352,160,1448,189"/><area shape="rect" id="node121" href="cvmx-pip_8h.html" title="Interface to the hardware Packet Input Processing unit." alt="" coords="1773,83,1869,112"/><area shape="rect" id="node125" href="cvmx-helper-pki_8h.html" title="Helper functions for PKI." alt="" coords="1472,160,1613,189"/><area shape="rect" id="node5" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="437,779,571,808"/><area shape="rect" id="node25" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="247,779,369,808"/><area shape="rect" id="node27" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="869,779,997,808"/><area shape="rect" id="node30" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="5,933,109,963"/><area shape="rect" id="node32" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="516,701,639,731"/><area shape="rect" id="node34" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="663,701,772,731"/><area shape="rect" id="node36" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="148,701,271,731"/><area shape="rect" id="node46" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="796,701,924,731"/><area shape="rect" id="node48" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="396,701,492,731"/><area shape="rect" id="node61" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="1092,779,1196,808"/><area shape="rect" id="node64" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="948,701,1057,731"/><area shape="rect" id="node67" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="1081,701,1220,731"/><area shape="rect" id="node7" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="868,856,964,885"/><area shape="rect" id="node38" href="cvmx-app-init_8h.html" title="Header file for simple executive application initialization." alt="" coords="44,779,172,808"/><area shape="rect" id="node40" href="cvmx-coremask_8h.html" title="Module to support operations on bitmap of cores." alt="" coords="41,856,183,885"/><area shape="rect" id="node51" href="cvmx-csr-enums_8h.html" title="Definitions for enumerations used with Octeon CSRs." alt="" coords="595,779,741,808"/><area shape="rect" id="node53" href="cvmx-csr-typedefs_8h.html" title="Configuration and status register (CSR) address and type definitions for Octeon." alt="" coords="1619,779,1781,808"/><area shape="rect" id="node55" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="1467,856,1600,885"/><area shape="rect" id="node57" href="cvmx-pip-defs_8h.html" title="cvmx&#45;pip&#45;defs.h" alt="" coords="1643,856,1773,885"/><area shape="rect" id="node59" href="cvmx-pki-defs_8h.html" title="cvmx&#45;pki&#45;defs.h" alt="" coords="1801,856,1932,885"/><area shape="rect" id="node71" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="1295,856,1423,885"/><area shape="rect" id="node75" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="1436,779,1543,808"/><area shape="rect" id="node79" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="1305,779,1412,808"/><area shape="rect" id="node90" href="cvmx-pki_8h.html" title="Interface to the hardware Packet Input Data unit." alt="" coords="1475,237,1568,267"/><area shape="rect" id="node93" href="cvmx-helper-util_8h.html" title="Small helper utilities." alt="" coords="1449,392,1593,421"/><area shape="rect" id="node117" href="cvmx-helper-cfg_8h.html" title="Helper Functions for the Configuration Framework." alt="" coords="1449,315,1593,344"/><area shape="rect" id="node96" href="cvmx-helper_8h.html" title="Helper functions for common, but complicated tasks." alt="" coords="1513,469,1631,499"/><area shape="rect" id="node98" href="cvmx-wqe_8h.html" title="This header file defines the work queue entry (wqe) data structure." alt="" coords="1820,624,1924,653"/><area shape="rect" id="node102" href="cvmx-helper-fpa_8h.html" title="Helper functions for FPA setup." alt="" coords="1531,547,1675,576"/><area shape="rect" id="node104" href="cvmx-helper-agl_8h.html" title="Functions for AGL (RGMII) initialization, configuration, and monitoring." alt="" coords="1192,547,1333,576"/><area shape="rect" id="node108" href="cvmx-helper-errata_8h.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="1909,547,2075,576"/><area shape="rect" id="node111" href="cvmx-helper-ilk_8h.html" title="Functions for ILK initialization, configuration, and monitoring." alt="" coords="1699,547,1835,576"/><area shape="rect" id="node113" href="cvmx-helper-loop_8h.html" title="Functions for LOOP initialization, configuration, and monitoring." alt="" coords="1357,547,1507,576"/><area shape="rect" id="node130" href="cvmx-pki-resources_8h.html" title="Resource management for PKI resources." alt="" coords="1739,160,1904,189"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a96913e7562ed0a4b932628c7dd6ec2b8">__cvmx_helper_ipd_setup_fpa_pools</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">It allocate pools for packet and wqe pools and sets up the FPA hardware.  <a href="#a96913e7562ed0a4b932628c7dd6ec2b8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a36bd7b76fc6d1fde11c0672a54c2aa5f">__cvmx_helper_ipd_global_setup</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a36bd7b76fc6d1fde11c0672a54c2aa5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a3fe88cf887285194b4ef5b0da67d0466">cvmx_helper_fcs_op</a> (int xiface, int nports, int has_fcs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable or disable FCS stripping for all the ports on an interface.  <a href="#a3fe88cf887285194b4ef5b0da67d0466"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a959b61576eb13d09784d2172eada27f1">__cvmx_helper_ipd_port_setup</a> (int ipd_port)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a959b61576eb13d09784d2172eada27f1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a8ff84b3491e37bf93be6cf2e78937950">__cvmx_helper_ipd_setup_interface</a> (int xiface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a8ff84b3491e37bf93be6cf2e78937950"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a08c80bfde1393bff9099c1fac4316c79">cvmx_helper_ipd_set_wqe_no_ptr_mode</a> (bool mode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-ipd_8c.html#a2bf98ab4e3161660c2c41039ce015d31">cvmx_helper_ipd_pkt_wqe_le_mode</a> (bool mode)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>IPD helper functions. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a36bd7b76fc6d1fde11c0672a54c2aa5f"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::__cvmx_helper_ipd_global_setup" ref="a36bd7b76fc6d1fde11c0672a54c2aa5f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_ipd_global_setup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 Setup global setting for IPD/PIP not related to a specific interface or port. This must be called before IPD is enabled.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a959b61576eb13d09784d2172eada27f1"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::__cvmx_helper_ipd_port_setup" ref="a959b61576eb13d09784d2172eada27f1" args="(int ipd_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_helper_ipd_port_setup </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ipd_port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 Configure the IPD/PIP tagging and QoS options for a specific port. This function determines the POW work queue entry contents for a port. The setup performed here is controlled by the defines in executive-config.h.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ipd_port</em>&nbsp;</td><td>Port/Port kind to configure. This follows the IPD numbering, not the per interface numbering</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a96913e7562ed0a4b932628c7dd6ec2b8"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::__cvmx_helper_ipd_setup_fpa_pools" ref="a96913e7562ed0a4b932628c7dd6ec2b8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_ipd_setup_fpa_pools </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>It allocate pools for packet and wqe pools and sets up the FPA hardware. </p>

</div>
</div>
<a class="anchor" id="a8ff84b3491e37bf93be6cf2e78937950"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::__cvmx_helper_ipd_setup_interface" ref="a8ff84b3491e37bf93be6cf2e78937950" args="(int xiface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_ipd_setup_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 Setup the IPD/PIP for the ports on an interface. Packet classification and tagging are set for every port on the interface. The number of ports on the interface must already have been probed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xiface</em>&nbsp;</td><td>xiface to setup IPD/PIP for</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a3fe88cf887285194b4ef5b0da67d0466"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::cvmx_helper_fcs_op" ref="a3fe88cf887285194b4ef5b0da67d0466" args="(int xiface, int nports, int has_fcs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_helper_fcs_op </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nports</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>has_fcs</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable or disable FCS stripping for all the ports on an interface. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xiface</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nports</em>&nbsp;</td><td>number of ports </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>has_fcs</em>&nbsp;</td><td>0 for disable and !0 for enable </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2bf98ab4e3161660c2c41039ce015d31"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::cvmx_helper_ipd_pkt_wqe_le_mode" ref="a2bf98ab4e3161660c2c41039ce015d31" args="(bool mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_helper_ipd_pkt_wqe_le_mode </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a08c80bfde1393bff9099c1fac4316c79"></a><!-- doxytag: member="cvmx&#45;helper&#45;ipd.c::cvmx_helper_ipd_set_wqe_no_ptr_mode" ref="a08c80bfde1393bff9099c1fac4316c79" args="(bool mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_helper_ipd_set_wqe_no_ptr_mode </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>mode</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
