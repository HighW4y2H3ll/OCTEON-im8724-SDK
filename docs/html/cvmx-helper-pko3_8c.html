<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-helper-pko3.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-helper-pko3.c File Reference</h1><code>#include &quot;<a class="el" href="cvmx_8h_source.html">cvmx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-ilk_8h_source.html">cvmx-ilk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-fpa3_8h_source.html">cvmx-fpa3.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-pko3_8h_source.html">cvmx-pko3.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-pko3-resources_8h_source.html">cvmx-pko3-resources.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper_8h_source.html">cvmx-helper.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-pko_8h_source.html">cvmx-helper-pko.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-pko3_8h_source.html">cvmx-helper-pko3.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-bgx_8h_source.html">cvmx-helper-bgx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-cfg_8h_source.html">cvmx-helper-cfg.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-helper-pko3.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-helper-pko3_8c__incl.png" border="0" usemap="#cvmx-helper-pko3_8c_map" alt=""/></div>
<map name="cvmx-helper-pko3_8c_map" id="cvmx-helper-pko3_8c">
<area shape="rect" id="node3" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="1419,315,1488,344"/><area shape="rect" id="node55" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="1993,469,2100,499"/><area shape="rect" id="node59" href="cvmx-ilk_8h.html" title="This file contains defines for the ILK interface." alt="" coords="2701,160,2792,189"/><area shape="rect" id="node62" href="cvmx-pko3_8h.html" title="cvmx&#45;pko3.h" alt="" coords="2264,83,2371,112"/><area shape="rect" id="node68" href="cvmx-helper_8h.html" title="Helper functions for common, but complicated tasks." alt="" coords="1111,160,1228,189"/><area shape="rect" id="node114" href="cvmx-pko3-resources_8h.html" title="cvmx&#45;pko3&#45;resources.h" alt="" coords="2445,83,2624,112"/><area shape="rect" id="node117" href="cvmx-helper-pko_8h.html" title="PKO helper, configuration API." alt="" coords="2648,83,2795,112"/><area shape="rect" id="node119" href="cvmx-helper-pko3_8h.html" title="cvmx&#45;helper&#45;pko3.h" alt="" coords="2819,83,2973,112"/><area shape="rect" id="node121" href="cvmx-helper-bgx_8h.html" title="Functions to configure the BGX MAC." alt="" coords="2997,83,3144,112"/><area shape="rect" id="node123" href="cvmx-helper-cfg_8h.html" title="Helper Functions for the Configuration Framework." alt="" coords="1980,160,2124,189"/><area shape="rect" id="node5" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="1047,469,1180,499"/><area shape="rect" id="node21" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="895,469,1017,499"/><area shape="rect" id="node23" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="1767,392,1895,421"/><area shape="rect" id="node26" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="2225,392,2329,421"/><area shape="rect" id="node28" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="1172,392,1295,421"/><area shape="rect" id="node30" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="2041,392,2151,421"/><area shape="rect" id="node32" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="804,392,927,421"/><area shape="rect" id="node35" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="1319,392,1447,421"/><area shape="rect" id="node37" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="1001,392,1097,421"/><area shape="rect" id="node40" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="739,469,843,499"/><area shape="rect" id="node43" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="1471,392,1580,421"/><area shape="rect" id="node46" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="1604,392,1743,421"/><area shape="rect" id="node48" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="1919,392,2017,421"/><area shape="rect" id="node7" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="1464,547,1560,576"/><area shape="rect" id="node50" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="2099,547,2227,576"/><area shape="rect" id="node53" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="1916,547,2049,576"/><area shape="rect" id="node64" href="cvmx-pko-defs_8h.html" title="cvmx&#45;pko&#45;defs.h" alt="" coords="2315,160,2448,189"/><area shape="rect" id="node66" href="cvmx-pko3-queue_8h.html" title="cvmx&#45;pko3&#45;queue.h" alt="" coords="2472,160,2627,189"/><area shape="rect" id="node105" href="cvmx-atomic_8h.html" title="This file provides atomic operations." alt="" coords="2216,315,2339,344"/><area shape="rect" id="node108" href="cvmx-pow_8h.html" title="Interface to the hardware Scheduling unit." alt="" coords="2133,237,2235,267"/><area shape="rect" id="node70" href="cvmx-wqe_8h.html" title="This header file defines the work queue entry (wqe) data structure." alt="" coords="1639,315,1743,344"/><area shape="rect" id="node72" href="cvmx-helper-fpa_8h.html" title="Helper functions for FPA setup." alt="" coords="1797,237,1941,267"/><area shape="rect" id="node74" href="cvmx-helper-agl_8h.html" title="Functions for AGL (RGMII) initialization, configuration, and monitoring." alt="" coords="24,237,165,267"/><area shape="rect" id="node78" href="cvmx-helper-errata_8h.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="1608,237,1773,267"/><area shape="rect" id="node81" href="cvmx-helper-ilk_8h.html" title="Functions for ILK initialization, configuration, and monitoring." alt="" coords="240,237,376,267"/><area shape="rect" id="node83" href="cvmx-helper-loop_8h.html" title="Functions for LOOP initialization, configuration, and monitoring." alt="" coords="400,237,549,267"/><area shape="rect" id="node85" href="cvmx-helper-npi_8h.html" title="Functions for NPI initialization, configuration, and monitoring." alt="" coords="573,237,715,267"/><area shape="rect" id="node87" href="cvmx-helper-rgmii_8h.html" title="Functions for RGMII/GMII/MII initialization, configuration, and monitoring." alt="" coords="739,237,893,267"/><area shape="rect" id="node89" href="cvmx-helper-sgmii_8h.html" title="Functions for SGMII initialization, configuration, and monitoring." alt="" coords="917,237,1075,267"/><area shape="rect" id="node91" href="cvmx-helper-spi_8h.html" title="Functions for SPI initialization, configuration, and monitoring." alt="" coords="1099,237,1240,267"/><area shape="rect" id="node94" href="cvmx-helper-srio_8h.html" title="Functions for SRIO initialization, configuration, and monitoring." alt="" coords="1264,237,1411,267"/><area shape="rect" id="node96" href="cvmx-helper-util_8h.html" title="Small helper utilities." alt="" coords="1965,237,2109,267"/><area shape="rect" id="node101" href="cvmx-helper-xaui_8h.html" title="Functions for XAUI initialization, configuration, and monitoring." alt="" coords="1435,237,1584,267"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#abf6a150322fc668293ec3eaba1101315">CVMX_PKO3_POOL_BUFFER_SIZE</a>&nbsp;&nbsp;&nbsp;4096</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#af158b708eac7ca25a58eeb525aa5e712">__cvmx_helper_pko3_res_owner</a> (int ipd_port)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#af158b708eac7ca25a58eeb525aa5e712"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a646456b636a5254ebbadcaa3e11df672">__cvmx_pko3_config_memory</a> (unsigned node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure an AURA/POOL designated for PKO internal use.  <a href="#a646456b636a5254ebbadcaa3e11df672"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#ad43591de46b78faa5ed6fa1f5b099b83">__cvmx_pko3_config_chan_interface</a> (int xiface, unsigned num_chans, uint8_t num_queues, bool prioritized)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a channelized port This is intended for LOOP, ILK and NPI interfaces which have one MAC per interface and need a channel per subinterface (e.g.  <a href="#ad43591de46b78faa5ed6fa1f5b099b83"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a7324827f4695b9bd4918fc89ff3062dc">__cvmx_pko3_config_pfc_interface</a> (int xiface, unsigned port)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a single Ethernet port with PFC-style channels.  <a href="#a7324827f4695b9bd4918fc89ff3062dc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a082c0e19891ef8155aade1a6ac376675">__cvmx_pko3_config_gen_interface</a> (int xiface, uint8_t subif, uint8_t num_queues, bool prioritized)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize a simple interface with a a given number of fair or prioritized queues.  <a href="#a082c0e19891ef8155aade1a6ac376675"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a227107bffd7bad1ce44b229943fcb953">EXPORT_SYMBOL</a> (__cvmx_pko3_config_gen_interface)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#aa739aeb3de06463278aaf92629ff1b1e">__cvmx_pko3_config_null_interface</a> (unsigned int node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the NULL interface.  <a href="#aa739aeb3de06463278aaf92629ff1b1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#ab19eefb72ce0967921e8f5dfe0338cd0">__cvmx_pko3_helper_dqs_activate</a> (int xiface, int index, bool min_pad)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open all <a class="el" href="structdescriptor.html">descriptor</a> queues belonging to an interface/port Internal use function.  <a href="#ab19eefb72ce0967921e8f5dfe0338cd0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a2dcf5d15d6dcc5ff1f6c03fa002b9aea">EXPORT_SYMBOL</a> (__cvmx_pko3_helper_dqs_activate)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a5f86f0f2898b624e0f45bab336bfa11a">cvmx_helper_pko3_init_interface</a> (int xiface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure and initialize PKO3 for an interface.  <a href="#a5f86f0f2898b624e0f45bab336bfa11a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#aa0752071fea375675eff95e82c27b9e9">__cvmx_helper_pko3_init_global</a> (unsigned int node, uint16_t gaura)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Global initialization for PKO3.  <a href="#aa0752071fea375675eff95e82c27b9e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#ad732175c23613bf8dc68926ce3fb734f">EXPORT_SYMBOL</a> (__cvmx_helper_pko3_init_global)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#aa6a50c33d95560031644e314f9ea7ebb">cvmx_helper_pko3_init_global</a> (unsigned int node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Global initialization for PKO3.  <a href="#aa6a50c33d95560031644e314f9ea7ebb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a49072697cdbe7a73ceacae13dd9c85ed">cvmx_helper_pko3_shut_interface</a> (int xiface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Uninitialize PKO3 interface.  <a href="#a49072697cdbe7a73ceacae13dd9c85ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a8e4a178eebf21b9f6a6bb97aba03bc46">EXPORT_SYMBOL</a> (cvmx_helper_pko3_shut_interface)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#ace165903d73b6d16b1e5d2c669c6b39a">cvmx_helper_pko3_shutdown</a> (unsigned int node)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Shutdown PKO3.  <a href="#ace165903d73b6d16b1e5d2c669c6b39a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#aac46027936de6b7fb902cc5b8412668c">EXPORT_SYMBOL</a> (cvmx_helper_pko3_shutdown)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="cvmx-pko3_8h.html#adb936c330325cc89cb4ac32d4676254b">cvmx_pko3_level_e</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a3709706fb8cddbbe592bb88f8512cc88">cvmx_pko_default_channel_level</a> = CVMX_PKO_L2_QUEUES</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a656b8d50e4036b8ae51663e47beea58d">debug</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#aedb1db69d6a83f54825501ba46688c1d">__pko_pkt_budget</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a50cd2320eedabe964e279b2ebadbe24c">__pko_pkt_quota</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED <br class="typebreak"/>
<a class="el" href="structcvmx__fpa3__gaura__t.html">cvmx_fpa3_gaura_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko3_8c.html#a71c8a83f17c251177eeb46b791e32c8e">__cvmx_pko3_aura</a> [CVMX_MAX_NODES]</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="abf6a150322fc668293ec3eaba1101315"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::CVMX_PKO3_POOL_BUFFER_SIZE" ref="abf6a150322fc668293ec3eaba1101315" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_PKO3_POOL_BUFFER_SIZE&nbsp;&nbsp;&nbsp;4096</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aa0752071fea375675eff95e82c27b9e9"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_helper_pko3_init_global" ref="aa0752071fea375675eff95e82c27b9e9" args="(unsigned int node, uint16_t gaura)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_pko3_init_global </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>gaura</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Global initialization for PKO3. </p>
<p>Should only be called once on each node</p>
<p>TBD: Resolve the kernel case. When Linux eats up the entire memory, bootmem will be unable to satisfy our request, and the memory needs to come from Linux free pages. </p>

</div>
</div>
<a class="anchor" id="af158b708eac7ca25a58eeb525aa5e712"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_helper_pko3_res_owner" ref="af158b708eac7ca25a58eeb525aa5e712" args="(int ipd_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_helper_pko3_res_owner </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ipd_port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
</p>
<p>Build an owner tag based on interface/port </p>

</div>
</div>
<a class="anchor" id="ad43591de46b78faa5ed6fa1f5b099b83"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_config_chan_interface" ref="ad43591de46b78faa5ed6fa1f5b099b83" args="(int xiface, unsigned num_chans, uint8_t num_queues, bool prioritized)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_pko3_config_chan_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>num_chans</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>num_queues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>prioritized</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a channelized port This is intended for LOOP, ILK and NPI interfaces which have one MAC per interface and need a channel per subinterface (e.g. </p>
<p>ring). Each channel then may have 'num_queues' <a class="el" href="structdescriptor.html">descriptor</a> queues attached to it, which can also be prioritized or fair. </p>

</div>
</div>
<a class="anchor" id="a082c0e19891ef8155aade1a6ac376675"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_config_gen_interface" ref="a082c0e19891ef8155aade1a6ac376675" args="(int xiface, uint8_t subif, uint8_t num_queues, bool prioritized)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_pko3_config_gen_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>subif</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>num_queues</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>prioritized</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a simple interface with a a given number of fair or prioritized queues. </p>
<p>This function will assign one channel per sub-interface. </p>

</div>
</div>
<a class="anchor" id="a646456b636a5254ebbadcaa3e11df672"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_config_memory" ref="a646456b636a5254ebbadcaa3e11df672" args="(unsigned node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_pko3_config_memory </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure an AURA/POOL designated for PKO internal use. </p>
<p>This pool is used for (a) memory buffers that store PKO <a class="el" href="structdescriptor.html">descriptor</a> queues, (b) buffers for use with PKO_SEND_JUMP_S sub-header.</p>
<p>The buffers of type (a) are never accessed by software, and their number should be at least equal to 4 times the number of <a class="el" href="structdescriptor.html">descriptor</a> queues in use.</p>
<p>Type (b) buffers are consumed by PKO3 command-composition code, and are released by the hardware upon completion of transmission.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 if the pool could not be established or 12-bit AURA that includes the node number for use in PKO3 intialization call.</dd></dl>
<p>NOTE: Linux kernel should pass its own aura to PKO3 initialization function so that the buffers can be mapped into kernel space for when software needs to adccess their contents. </p>

</div>
</div>
<a class="anchor" id="aa739aeb3de06463278aaf92629ff1b1e"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_config_null_interface" ref="aa739aeb3de06463278aaf92629ff1b1e" args="(unsigned int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_pko3_config_null_interface </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the NULL interface. </p>
<p>A NULL interface is a special case in that it is not one of the enumerated interfaces in the system, and does not apply to input either. Still, it can be very handy for dealing with packets that should be discarded in a generic, streamlined way.</p>
<p>The Descriptor Queue 0 will be reserved for the NULL interface and the normalized (i.e. IPD) port number has the all-ones value. </p>

</div>
</div>
<a class="anchor" id="a7324827f4695b9bd4918fc89ff3062dc"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_config_pfc_interface" ref="a7324827f4695b9bd4918fc89ff3062dc" args="(int xiface, unsigned port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __cvmx_pko3_config_pfc_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize a single Ethernet port with PFC-style channels. </p>
<p>One interface can contain multiple ports, this function is per-port Here, a physical port is allocated 8 logical channel, one per VLAN tag priority, one DQ is assigned to each channel, and all 8 DQs are registered for that IPD port. Note that the DQs are arrange such that the Ethernet QoS/PCP field can be used as an offset to the value returned by cvmx_pko_base_queue_get().</p>
<p>For HighGig2 mode, 16 channels may be desired, instead of 8, but this function does not support that. </p>

</div>
</div>
<a class="anchor" id="ab19eefb72ce0967921e8f5dfe0338cd0"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_helper_dqs_activate" ref="ab19eefb72ce0967921e8f5dfe0338cd0" args="(int xiface, int index, bool min_pad)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_pko3_helper_dqs_activate </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>min_pad</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open all <a class="el" href="structdescriptor.html">descriptor</a> queues belonging to an interface/port Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 </p>

</div>
</div>
<a class="anchor" id="aa6a50c33d95560031644e314f9ea7ebb"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::cvmx_helper_pko3_init_global" ref="aa6a50c33d95560031644e314f9ea7ebb" args="(unsigned int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_pko3_init_global </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Global initialization for PKO3. </p>
<p>Should only be called once on each node</p>
<p>When Linux eats up the entire memory, bootmem will be unable to satisfy our request, and the memory needs to come from Linux free pages. </p>

</div>
</div>
<a class="anchor" id="a5f86f0f2898b624e0f45bab336bfa11a"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::cvmx_helper_pko3_init_interface" ref="a5f86f0f2898b624e0f45bab336bfa11a" args="(int xiface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_pko3_init_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure and initialize PKO3 for an interface. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xiface</em>&nbsp;</td><td>is the interface number to configure </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div>
<a class="anchor" id="a49072697cdbe7a73ceacae13dd9c85ed"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::cvmx_helper_pko3_shut_interface" ref="a49072697cdbe7a73ceacae13dd9c85ed" args="(int xiface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_pko3_shut_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Uninitialize PKO3 interface. </p>
<p>Release all resources held by PKO for an interface. The shutdown code is the same for all supported interfaces.</p>
<p>NOTE: The NULL virtual interface is identified by interface number -1, which translates into IPD port 0xfff, MAC#28. [Kludge] </p>

</div>
</div>
<a class="anchor" id="ace165903d73b6d16b1e5d2c669c6b39a"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::cvmx_helper_pko3_shutdown" ref="ace165903d73b6d16b1e5d2c669c6b39a" args="(unsigned int node)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_pko3_shutdown </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>node</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Shutdown PKO3. </p>
<p>Should be called after all interfaces have been shut down on the PKO3.</p>
<p>Disables the PKO, frees all its buffers. </p>

</div>
</div>
<a class="anchor" id="aac46027936de6b7fb902cc5b8412668c"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::EXPORT_SYMBOL" ref="aac46027936de6b7fb902cc5b8412668c" args="(cvmx_helper_pko3_shutdown)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_helper_pko3_shutdown&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8e4a178eebf21b9f6a6bb97aba03bc46"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::EXPORT_SYMBOL" ref="a8e4a178eebf21b9f6a6bb97aba03bc46" args="(cvmx_helper_pko3_shut_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_helper_pko3_shut_interface&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad732175c23613bf8dc68926ce3fb734f"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::EXPORT_SYMBOL" ref="ad732175c23613bf8dc68926ce3fb734f" args="(__cvmx_helper_pko3_init_global)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">__cvmx_helper_pko3_init_global&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2dcf5d15d6dcc5ff1f6c03fa002b9aea"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::EXPORT_SYMBOL" ref="a2dcf5d15d6dcc5ff1f6c03fa002b9aea" args="(__cvmx_pko3_helper_dqs_activate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">__cvmx_pko3_helper_dqs_activate&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a227107bffd7bad1ce44b229943fcb953"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::EXPORT_SYMBOL" ref="a227107bffd7bad1ce44b229943fcb953" args="(__cvmx_pko3_config_gen_interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">__cvmx_pko3_config_gen_interface&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a71c8a83f17c251177eeb46b791e32c8e"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__cvmx_pko3_aura" ref="a71c8a83f17c251177eeb46b791e32c8e" args="[CVMX_MAX_NODES]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__fpa3__gaura__t.html">cvmx_fpa3_gaura_t</a> <a class="el" href="cvmx-helper-pko3_8c.html#a71c8a83f17c251177eeb46b791e32c8e">__cvmx_pko3_aura</a>[CVMX_MAX_NODES]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aedb1db69d6a83f54825501ba46688c1d"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__pko_pkt_budget" ref="aedb1db69d6a83f54825501ba46688c1d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED int <a class="el" href="cvmx-helper-pko3_8c.html#aedb1db69d6a83f54825501ba46688c1d">__pko_pkt_budget</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a50cd2320eedabe964e279b2ebadbe24c"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::__pko_pkt_quota" ref="a50cd2320eedabe964e279b2ebadbe24c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED int <a class="el" href="cvmx-helper-pko3_8c.html#a50cd2320eedabe964e279b2ebadbe24c">__pko_pkt_quota</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3709706fb8cddbbe592bb88f8512cc88"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::cvmx_pko_default_channel_level" ref="a3709706fb8cddbbe592bb88f8512cc88" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvmx-pko3_8h.html#adb936c330325cc89cb4ac32d4676254b">cvmx_pko3_level_e</a> <a class="el" href="cvmx-helper-pko3_8c.html#a3709706fb8cddbbe592bb88f8512cc88">cvmx_pko_default_channel_level</a> = CVMX_PKO_L2_QUEUES<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a656b8d50e4036b8ae51663e47beea58d"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko3.c::debug" ref="a656b8d50e4036b8ae51663e47beea58d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="cvmx-tim-atomic_8c.html#a656b8d50e4036b8ae51663e47beea58d">debug</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
