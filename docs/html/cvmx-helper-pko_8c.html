<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-helper-pko.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-helper-pko.c File Reference</h1>
<p>Helper Functions for the PKO.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx_8h_source.html">cvmx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-bootmem_8h_source.html">cvmx-bootmem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper_8h_source.html">cvmx-helper.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-ilk_8h_source.html">cvmx-helper-ilk.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-ipd_8h_source.html">cvmx-ipd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-fpa1_8h_source.html">cvmx-fpa1.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-hwpko_8h_source.html">cvmx-hwpko.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-global-resources_8h_source.html">cvmx-global-resources.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-helper-pko.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-helper-pko_8c__incl.png" border="0" usemap="#cvmx-helper-pko_8c_map" alt=""/></div>
<map name="cvmx-helper-pko_8c_map" id="cvmx-helper-pko_8c">
<area shape="rect" id="node3" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="2197,392,2267,421"/><area shape="rect" id="node55" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="715,547,821,576"/><area shape="rect" id="node59" href="cvmx-bootmem_8h.html" title="Simple allocate only memory allocator." alt="" coords="1329,83,1471,112"/><area shape="rect" id="node61" href="cvmx-helper_8h.html" title="Helper functions for common, but complicated tasks." alt="" coords="1329,237,1447,267"/><area shape="rect" id="node74" href="cvmx-helper-ilk_8h.html" title="Functions for ILK initialization, configuration, and monitoring." alt="" coords="219,315,355,344"/><area shape="rect" id="node97" href="cvmx-ipd_8h.html" title="Interface to the hardware Input Packet Data unit." alt="" coords="1985,83,2081,112"/><area shape="rect" id="node106" href="cvmx-hwpko_8h.html" title="Interface to the hardware Packet Output unit." alt="" coords="1628,83,1745,112"/><area shape="rect" id="node129" href="cvmx-global-resources_8h.html" title="cvmx&#45;global&#45;resources.h" alt="" coords="2429,83,2616,112"/><area shape="rect" id="node5" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="2495,547,2628,576"/><area shape="rect" id="node21" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="2171,547,2293,576"/><area shape="rect" id="node23" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="1415,469,1543,499"/><area shape="rect" id="node26" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="2367,469,2471,499"/><area shape="rect" id="node28" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="2495,469,2617,499"/><area shape="rect" id="node30" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="1567,469,1676,499"/><area shape="rect" id="node32" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="2220,469,2343,499"/><area shape="rect" id="node35" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="2761,469,2889,499"/><area shape="rect" id="node37" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="2641,469,2737,499"/><area shape="rect" id="node40" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="1879,547,1983,576"/><area shape="rect" id="node43" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="1873,469,1983,499"/><area shape="rect" id="node46" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="2007,469,2145,499"/><area shape="rect" id="node48" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="1700,469,1799,499"/><area shape="rect" id="node7" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="1877,624,1973,653"/><area shape="rect" id="node50" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="373,624,501,653"/><area shape="rect" id="node53" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="1216,624,1349,653"/><area shape="rect" id="node63" href="cvmx-wqe_8h.html" title="This header file defines the work queue entry (wqe) data structure." alt="" coords="409,392,513,421"/><area shape="rect" id="node65" href="cvmx-helper-fpa_8h.html" title="Helper functions for FPA setup." alt="" coords="1309,315,1453,344"/><area shape="rect" id="node67" href="cvmx-helper-agl_8h.html" title="Functions for AGL (RGMII) initialization, configuration, and monitoring." alt="" coords="1995,315,2136,344"/><area shape="rect" id="node71" href="cvmx-helper-errata_8h.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="379,315,544,344"/><area shape="rect" id="node76" href="cvmx-helper-loop_8h.html" title="Functions for LOOP initialization, configuration, and monitoring." alt="" coords="1477,315,1627,344"/><area shape="rect" id="node78" href="cvmx-helper-npi_8h.html" title="Functions for NPI initialization, configuration, and monitoring." alt="" coords="1651,315,1792,344"/><area shape="rect" id="node80" href="cvmx-helper-rgmii_8h.html" title="Functions for RGMII/GMII/MII initialization, configuration, and monitoring." alt="" coords="1816,315,1971,344"/><area shape="rect" id="node82" href="cvmx-helper-sgmii_8h.html" title="Functions for SGMII initialization, configuration, and monitoring." alt="" coords="568,315,725,344"/><area shape="rect" id="node84" href="cvmx-helper-spi_8h.html" title="Functions for SPI initialization, configuration, and monitoring." alt="" coords="749,315,891,344"/><area shape="rect" id="node87" href="cvmx-helper-srio_8h.html" title="Functions for SRIO initialization, configuration, and monitoring." alt="" coords="915,315,1061,344"/><area shape="rect" id="node89" href="cvmx-helper-util_8h.html" title="Small helper utilities." alt="" coords="2160,315,2304,344"/><area shape="rect" id="node94" href="cvmx-helper-xaui_8h.html" title="Functions for XAUI initialization, configuration, and monitoring." alt="" coords="1085,315,1235,344"/><area shape="rect" id="node99" href="cvmx-pki_8h.html" title="Interface to the hardware Packet Input Data unit." alt="" coords="2261,160,2355,189"/><area shape="rect" id="node102" href="cvmx-helper-cfg_8h.html" title="Helper Functions for the Configuration Framework." alt="" coords="1851,237,1995,267"/><area shape="rect" id="node108" href="cvmx-hwfau_8h.html" title="Interface to the hardware Fetch and Add Unit." alt="" coords="2120,160,2237,189"/><area shape="rect" id="node111" href="cvmx-pow_8h.html" title="Interface to the hardware Scheduling unit." alt="" coords="93,315,195,344"/><area shape="rect" id="node117" href="cvmx-pko3_8h.html" title="cvmx&#45;pko3.h" alt="" coords="1329,160,1436,189"/><area shape="rect" id="node122" href="cvmx-cmd-queue_8h.html" title="Support functions for managing command queues used for various hardware blocks." alt="" coords="1667,160,1821,189"/><area shape="rect" id="node127" href="cvmx-helper-pko_8h.html" title="PKO helper, configuration API." alt="" coords="1845,160,1992,189"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a80f21ecb234814ca29b556cf8de59e88">EXPORT_SYMBOL</a> (<a class="el" href="cvmx-helper-pko_8h.html#a135343af1f5a21bdc8001c5a841d2f47">cvmx_override_pko_queue_priority</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a58e499ed0a62b90d6c11eeff7642c684">cvmx_pko_set_cmd_que_pool_config</a> (int64_t pool, uint64_t buffer_size, uint64_t buffer_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the internal FPA pool data structure for PKO comamnd queue.  <a href="#a58e499ed0a62b90d6c11eeff7642c684"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a318d51107074881d48292058a16aa1e8">EXPORT_SYMBOL</a> (cvmx_pko_set_cmd_que_pool_config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#abae98567b0204b9b7e95391daa5354b5">cvmx_pko_set_cmd_queue_pool_buffer_count</a> (uint64_t buffer_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a6eee29f171acd12710c0267211f854d9">cvmx_pko_get_cmd_que_pool_config</a> (<a class="el" href="structcvmx__fpa__pool__config.html">cvmx_fpa_pool_config_t</a> *pko_pool)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a83bb85ef8a7d043c91c0808ff07106a4">cvmx_fpa_get_pko_pool</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the fpa pool number of pko pool.  <a href="#a83bb85ef8a7d043c91c0808ff07106a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a63061e8d347cab911e1fa18d8d2e48f7">cvmx_fpa_get_pko_pool_block_size</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the buffer size of pko pool.  <a href="#a63061e8d347cab911e1fa18d8d2e48f7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#afa43bd45df84583bdc6f888b7e04164e">cvmx_fpa_get_pko_pool_buffer_count</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the buffer size of pko pool.  <a href="#afa43bd45df84583bdc6f888b7e04164e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a0d13ed7745f444b02d5ad265fe27115d">cvmx_helper_pko_pool_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize PKO command queue buffer pool.  <a href="#a0d13ed7745f444b02d5ad265fe27115d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a9e5a45b521e806a2d0cc9709202b98bd">cvmx_helper_pko_init</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the PKO.  <a href="#a9e5a45b521e806a2d0cc9709202b98bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#acaf5807555d80e30f81f7812a3104abf">__cvmx_helper_interface_setup_pko</a> (int interface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#acaf5807555d80e30f81f7812a3104abf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#ae485012d972f14add2d0506b598efa59">cvmx_helper_wait_pko_queue_drain</a> (int queue)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">wait for the pko queue to drain  <a href="#ae485012d972f14add2d0506b598efa59"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a268cab44f88b8b0c9081c4b7a787b721">__cvmx_helper_pko_drain</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a268cab44f88b8b0c9081c4b7a787b721"></a><br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED int64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#af79bacdfeb994ab59c16f196f0041912">pko_fpa_config_pool</a> = -1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a89ee4987cb65ba9e8c958982733ac0e8">pko_fpa_config_size</a> = 1024</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static CVMX_SHARED uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#aa665ec23d2ffb1ee9e6a59f65428f8d6">pko_fpa_config_count</a> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CVMX_SHARED void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-helper-pko_8c.html#a135343af1f5a21bdc8001c5a841d2f47">cvmx_override_pko_queue_priority</a> )(int ipd_port, uint8_t *priorities) = NULL</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cvmx_override_pko_queue_priority(int pko_port, uint64_t priorities[16]) is a function pointer.  <a href="#a135343af1f5a21bdc8001c5a841d2f47"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Helper Functions for the PKO. </p>
<dl class="rcs"><dt><b>Id</b></dt><dd><a class="el" href="cvmx-helper-pko_8c.html" title="Helper Functions for the PKO.">cvmx-helper-pko.c</a> 115744 2015-04-04 04:36:36Z awilliams </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="acaf5807555d80e30f81f7812a3104abf"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::__cvmx_helper_interface_setup_pko" ref="acaf5807555d80e30f81f7812a3104abf" args="(int interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_interface_setup_pko </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 Setup the PKO for the ports on an interface. The number of queues per port and the priority of each PKO output queue is set here. PKO must be disabled when this function is called.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>Interface to setup PKO for</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative on failure</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This is for PKO1/PKO2, and is not used for PKO3. </dd></dl>

</div>
</div>
<a class="anchor" id="a268cab44f88b8b0c9081c4b7a787b721"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::__cvmx_helper_pko_drain" ref="a268cab44f88b8b0c9081c4b7a787b721" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_helper_pko_drain </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
</p>
<p>Drain and wait until all PKO queues are empty. </p>

</div>
</div>
<a class="anchor" id="a83bb85ef8a7d043c91c0808ff07106a4"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_fpa_get_pko_pool" ref="a83bb85ef8a7d043c91c0808ff07106a4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t cvmx_fpa_get_pko_pool </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the fpa pool number of pko pool. </p>

</div>
</div>
<a class="anchor" id="a63061e8d347cab911e1fa18d8d2e48f7"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_fpa_get_pko_pool_block_size" ref="a63061e8d347cab911e1fa18d8d2e48f7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t cvmx_fpa_get_pko_pool_block_size </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the buffer size of pko pool. </p>

</div>
</div>
<a class="anchor" id="afa43bd45df84583bdc6f888b7e04164e"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_fpa_get_pko_pool_buffer_count" ref="afa43bd45df84583bdc6f888b7e04164e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t cvmx_fpa_get_pko_pool_buffer_count </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the buffer size of pko pool. </p>

</div>
</div>
<a class="anchor" id="a9e5a45b521e806a2d0cc9709202b98bd"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_helper_pko_init" ref="a9e5a45b521e806a2d0cc9709202b98bd" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_helper_pko_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the PKO. </p>

</div>
</div>
<a class="anchor" id="a0d13ed7745f444b02d5ad265fe27115d"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_helper_pko_pool_init" ref="a0d13ed7745f444b02d5ad265fe27115d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_helper_pko_pool_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize PKO command queue buffer pool. </p>

</div>
</div>
<a class="anchor" id="ae485012d972f14add2d0506b598efa59"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_helper_wait_pko_queue_drain" ref="ae485012d972f14add2d0506b598efa59" args="(int queue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_helper_wait_pko_queue_drain </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>queue</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>wait for the pko queue to drain </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>queue</em>&nbsp;</td><td>a valid pko queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>count is the length of the queue after calling this function </dd></dl>

</div>
</div>
<a class="anchor" id="a6eee29f171acd12710c0267211f854d9"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_pko_get_cmd_que_pool_config" ref="a6eee29f171acd12710c0267211f854d9" args="(cvmx_fpa_pool_config_t *pko_pool)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_pko_get_cmd_que_pool_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__fpa__pool__config.html">cvmx_fpa_pool_config_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pko_pool</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a58e499ed0a62b90d6c11eeff7642c684"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_pko_set_cmd_que_pool_config" ref="a58e499ed0a62b90d6c11eeff7642c684" args="(int64_t pool, uint64_t buffer_size, uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_pko_set_cmd_que_pool_config </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the internal FPA pool data structure for PKO comamnd queue. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>fpa pool number yo use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>buffer size of pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_count</em>&nbsp;</td><td>number of buufers to allocate to pool</td></tr>
  </table>
  </dd>
</dl>
<dl class="note"><dt><b>Note:</b></dt><dd>the caller is responsable for setting up the pool with an appropriate buffer size and sufficient buffer count. </dd></dl>

</div>
</div>
<a class="anchor" id="abae98567b0204b9b7e95391daa5354b5"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_pko_set_cmd_queue_pool_buffer_count" ref="abae98567b0204b9b7e95391daa5354b5" args="(uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_pko_set_cmd_queue_pool_buffer_count </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a318d51107074881d48292058a16aa1e8"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::EXPORT_SYMBOL" ref="a318d51107074881d48292058a16aa1e8" args="(cvmx_pko_set_cmd_que_pool_config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_pko_set_cmd_que_pool_config&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a80f21ecb234814ca29b556cf8de59e88"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::EXPORT_SYMBOL" ref="a80f21ecb234814ca29b556cf8de59e88" args="(cvmx_override_pko_queue_priority)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvmx-helper-pko_8h.html#a135343af1f5a21bdc8001c5a841d2f47">cvmx_override_pko_queue_priority</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a135343af1f5a21bdc8001c5a841d2f47"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::cvmx_override_pko_queue_priority" ref="a135343af1f5a21bdc8001c5a841d2f47" args=")(int ipd_port, uint8_t *priorities)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED void(* <a class="el" href="cvmx-helper-pko_8h.html#a135343af1f5a21bdc8001c5a841d2f47">cvmx_override_pko_queue_priority</a>)(int ipd_port, uint8_t *priorities) = NULL</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cvmx_override_pko_queue_priority(int pko_port, uint64_t priorities[16]) is a function pointer. </p>
<p>cvmx_override_pko_queue_priority(int ipd_port, uint64_t priorities[16]) is a function pointer.</p>
<p>It is meant to allow customization of the PKO queue priorities based on the port number. Users should set this pointer to a function before calling any cvmx-helper operations. </p>

</div>
</div>
<a class="anchor" id="aa665ec23d2ffb1ee9e6a59f65428f8d6"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::pko_fpa_config_count" ref="aa665ec23d2ffb1ee9e6a59f65428f8d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED uint64_t <a class="el" href="cvmx-helper-pko_8c.html#aa665ec23d2ffb1ee9e6a59f65428f8d6">pko_fpa_config_count</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af79bacdfeb994ab59c16f196f0041912"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::pko_fpa_config_pool" ref="af79bacdfeb994ab59c16f196f0041912" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED int64_t <a class="el" href="cvmx-helper-pko_8c.html#af79bacdfeb994ab59c16f196f0041912">pko_fpa_config_pool</a> = -1<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a89ee4987cb65ba9e8c958982733ac0e8"></a><!-- doxytag: member="cvmx&#45;helper&#45;pko.c::pko_fpa_config_size" ref="a89ee4987cb65ba9e8c958982733ac0e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED uint64_t <a class="el" href="cvmx-helper-pko_8c.html#a89ee4987cb65ba9e8c958982733ac0e8">pko_fpa_config_size</a> = 1024<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
