<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-ipd.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-ipd.c File Reference</h1>
<p>IPD Support.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx_8h_source.html">cvmx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-sysinfo_8h_source.html">cvmx-sysinfo.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-bootmem_8h_source.html">cvmx-bootmem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-version_8h_source.html">cvmx-version.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-error_8h_source.html">cvmx-error.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-fpa1_8h_source.html">cvmx-fpa1.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-wqe_8h_source.html">cvmx-wqe.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-ipd_8h_source.html">cvmx-ipd.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-pki_8h_source.html">cvmx-helper-pki.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-errata_8h_source.html">cvmx-helper-errata.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-helper-cfg_8h_source.html">cvmx-helper-cfg.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-ipd.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-ipd_8c__incl.png" border="0" usemap="#cvmx-ipd_8c_map" alt=""/></div>
<map name="cvmx-ipd_8c_map" id="cvmx-ipd_8c">
<area shape="rect" id="node3" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="685,392,755,421"/><area shape="rect" id="node38" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="163,469,285,499"/><area shape="rect" id="node85" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="1397,547,1504,576"/><area shape="rect" id="node94" href="cvmx-bootmem_8h.html" title="Simple allocate only memory allocator." alt="" coords="1471,83,1612,112"/><area shape="rect" id="node96" href="cvmx-version_8h.html" title="cvmx&#45;version.h" alt="" coords="1636,83,1761,112"/><area shape="rect" id="node98" href="cvmx-error_8h.html" title="Interface to the Octeon extended error status." alt="" coords="1745,237,1852,267"/><area shape="rect" id="node101" href="cvmx-wqe_8h.html" title="This header file defines the work queue entry (wqe) data structure." alt="" coords="2064,547,2168,576"/><area shape="rect" id="node105" href="cvmx-ipd_8h.html" title="Interface to the hardware Input Packet Data unit." alt="" coords="1836,83,1932,112"/><area shape="rect" id="node117" href="cvmx-helper-errata_8h.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="2033,469,2199,499"/><area shape="rect" id="node122" href="cvmx-helper-cfg_8h.html" title="Helper Functions for the Configuration Framework." alt="" coords="1927,237,2071,267"/><area shape="rect" id="node126" href="cvmx-helper-pki_8h.html" title="Helper functions for PKI." alt="" coords="1956,83,2097,112"/><area shape="rect" id="node5" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="665,547,799,576"/><area shape="rect" id="node27" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="367,547,489,576"/><area shape="rect" id="node29" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="513,547,641,576"/><area shape="rect" id="node32" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="5,701,109,731"/><area shape="rect" id="node34" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="757,469,880,499"/><area shape="rect" id="node36" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="904,469,1013,499"/><area shape="rect" id="node48" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="1037,469,1165,499"/><area shape="rect" id="node50" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="1240,469,1336,499"/><area shape="rect" id="node71" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="36,547,140,576"/><area shape="rect" id="node74" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="309,469,419,499"/><area shape="rect" id="node77" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="443,469,581,499"/><area shape="rect" id="node79" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="1360,469,1459,499"/><area shape="rect" id="node7" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="373,624,469,653"/><area shape="rect" id="node40" href="cvmx-app-init_8h.html" title="Header file for simple executive application initialization." alt="" coords="164,547,292,576"/><area shape="rect" id="node42" href="cvmx-coremask_8h.html" title="Module to support operations on bitmap of cores." alt="" coords="157,624,299,653"/><area shape="rect" id="node53" href="cvmx-csr-enums_8h.html" title="Definitions for enumerations used with Octeon CSRs." alt="" coords="1227,547,1373,576"/><area shape="rect" id="node55" href="cvmx-csr-typedefs_8h.html" title="Configuration and status register (CSR) address and type definitions for Octeon." alt="" coords="1648,547,1811,576"/><area shape="rect" id="node57" href="cvmx-agl-defs_8h.html" title="cvmx&#45;agl&#45;defs.h" alt="" coords="1720,624,1851,653"/><area shape="rect" id="node59" href="cvmx-ase-defs_8h.html" title="cvmx&#45;ase&#45;defs.h" alt="" coords="1395,624,1531,653"/><area shape="rect" id="node61" href="cvmx-asxx-defs_8h.html" title="cvmx&#45;asxx&#45;defs.h" alt="" coords="1555,624,1696,653"/><area shape="rect" id="node63" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="1237,624,1371,653"/><area shape="rect" id="node65" href="cvmx-mio-defs_8h.html" title="cvmx&#45;mio&#45;defs.h" alt="" coords="1875,624,2011,653"/><area shape="rect" id="node67" href="cvmx-pip-defs_8h.html" title="cvmx&#45;pip&#45;defs.h" alt="" coords="2189,624,2320,653"/><area shape="rect" id="node69" href="cvmx-pki-defs_8h.html" title="cvmx&#45;pki&#45;defs.h" alt="" coords="2035,624,2165,653"/><area shape="rect" id="node81" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="1085,624,1213,653"/><area shape="rect" id="node89" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="1096,547,1203,576"/><area shape="rect" id="node107" href="cvmx-pki_8h.html" title="Interface to the hardware Packet Input Data unit." alt="" coords="1840,160,1933,189"/><area shape="rect" id="node110" href="cvmx-helper-util_8h.html" title="Small helper utilities." alt="" coords="1828,315,1972,344"/><area shape="rect" id="node114" href="cvmx-helper_8h.html" title="Helper functions for common, but complicated tasks." alt="" coords="1937,392,2055,421"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a09ba229d856b807d04762241cb93627f">IPD_RED_AVG_DLY</a>&nbsp;&nbsp;&nbsp;1000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a06f98f56236b901b77f777114954cda6">IPD_RED_PRB_DLY</a>&nbsp;&nbsp;&nbsp;1000</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#aa6b6b1bc494a864e968a8a4a2b9ae3b8">EXPORT_SYMBOL</a> (<a class="el" href="cvmx-ipd_8h.html#a0a4ca33c2e2ab9288fe866ca5e783a85">cvmx_ipd_cfg</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a0e9fa457f0260c3f4f03a8f165050811">cvmx_ipd_convert_to_newcfg</a> (<a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a> ipd_config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a269cb26f5f761a6116e7ab8f03ae7e0b">cvmx_ipd_set_config</a> (<a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a> ipd_config)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the ipd related configuration in internal structure which is then used for seting IPD hardware block.  <a href="#a269cb26f5f761a6116e7ab8f03ae7e0b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#ac5f7dfdf40ed78b4d69de3da8c488abf">cvmx_ipd_get_config</a> (<a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a> *ipd_config)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the ipd related configuration from internal structure.  <a href="#ac5f7dfdf40ed78b4d69de3da8c488abf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#ab7d1933e39b1378c27aadfe6e69f11a4">cvmx_ipd_set_packet_pool_buffer_count</a> (uint64_t buffer_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a9f6aa0a4762655425b40991d45e038af">cvmx_ipd_set_packet_pool_config</a> (int64_t pool, uint64_t buffer_size, uint64_t buffer_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the internal FPA pool data structure for packet buffer pool.  <a href="#a9f6aa0a4762655425b40991d45e038af"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a324eb243508c4e76f02e68d278b04309">EXPORT_SYMBOL</a> (cvmx_ipd_set_packet_pool_config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#afe08260ee912574e86e7ccd34c5216d4">cvmx_ipd_set_wqe_pool_buffer_count</a> (uint64_t buffer_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a132e07ca23d1932f86952781416219d3">cvmx_ipd_set_wqe_pool_config</a> (int64_t pool, uint64_t buffer_size, uint64_t buffer_count)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the internal FPA pool data structure for wqe pool.  <a href="#a132e07ca23d1932f86952781416219d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a608dbfe9eb1bfd64043a8c597eb899ee">EXPORT_SYMBOL</a> (cvmx_ipd_set_wqe_pool_config)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a8c0940ed4b55690bdb32879214bf4f5f">__cvmx_ipd_free_ptr_v1</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a09f2f8dd72bfa64f06bc347794b4b5ff">__cvmx_ipd_free_ptr_v2</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a9800194963e656d8156d5bcd67a7d454">__cvmx_ipd_free_ptr</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a9800194963e656d8156d5bcd67a7d454"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a8905a24c5da8481f6c890f650e6bd688">cvmx_ipd_config</a> (uint64_t mbuff_size, uint64_t first_mbuff_skip, uint64_t not_first_mbuff_skip, uint64_t first_back, uint64_t second_back, uint64_t wqe_fpa_pool, <a class="el" href="cvmx-csr-enums_8h.html#ae17c1c6beb29f2c859c597b7db2bead8">cvmx_ipd_mode_t</a> cache_mode, uint64_t back_pres_enable_flag)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure IPD.  <a href="#a8905a24c5da8481f6c890f650e6bd688"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a262250e87e20281d055a626d1bfa86b6">cvmx_ipd_setup_red_queue</a> (int queue, int pass_thresh, int drop_thresh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup Random Early Drop on a specific input queue.  <a href="#a262250e87e20281d055a626d1bfa86b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a425d72db5eb99675509762cb20ae4f7d">cvmx_ipd_setup_red</a> (int pass_thresh, int drop_thresh)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Setup Random Early Drop to automatically begin dropping packets.  <a href="#a425d72db5eb99675509762cb20ae4f7d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a18614a16c2ac37626987fa675798db58">EXPORT_SYMBOL</a> (cvmx_ipd_setup_red)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a8dd2366b7f821f3fd600446c79e74956">cvmx_ipd_enable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable IPD.  <a href="#a8dd2366b7f821f3fd600446c79e74956"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#ab94c895b8ff014668a55fcb0e999527a">EXPORT_SYMBOL</a> (cvmx_ipd_enable)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#abf1925c4d9dda730bd2588560321e567">cvmx_ipd_disable</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable IPD.  <a href="#abf1925c4d9dda730bd2588560321e567"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a64b10baf26f3f13b4c9cb69d77c996f7">EXPORT_SYMBOL</a> (cvmx_ipd_disable)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">CVMX_SHARED <a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-ipd_8c.html#a0a4ca33c2e2ab9288fe866ca5e783a85">cvmx_ipd_cfg</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>IPD Support. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a09ba229d856b807d04762241cb93627f"></a><!-- doxytag: member="cvmx&#45;ipd.c::IPD_RED_AVG_DLY" ref="a09ba229d856b807d04762241cb93627f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPD_RED_AVG_DLY&nbsp;&nbsp;&nbsp;1000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a06f98f56236b901b77f777114954cda6"></a><!-- doxytag: member="cvmx&#45;ipd.c::IPD_RED_PRB_DLY" ref="a06f98f56236b901b77f777114954cda6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPD_RED_PRB_DLY&nbsp;&nbsp;&nbsp;1000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9800194963e656d8156d5bcd67a7d454"></a><!-- doxytag: member="cvmx&#45;ipd.c::__cvmx_ipd_free_ptr" ref="a9800194963e656d8156d5bcd67a7d454" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __cvmx_ipd_free_ptr </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
 This function is called by cvmx_helper_shutdown() to extract all FPA buffers out of the IPD and PIP. After this function completes, all FPA buffers that were prefetched by IPD and PIP wil be in the apropriate FPA pool. This functions does not reset PIP or IPD as FPA pool zero must be empty before the reset can be performed. WARNING: It is very important that IPD and PIP be reset soon after a call to this function. </p>

</div>
</div>
<a class="anchor" id="a8c0940ed4b55690bdb32879214bf4f5f"></a><!-- doxytag: member="cvmx&#45;ipd.c::__cvmx_ipd_free_ptr_v1" ref="a8c0940ed4b55690bdb32879214bf4f5f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __cvmx_ipd_free_ptr_v1 </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a09f2f8dd72bfa64f06bc347794b4b5ff"></a><!-- doxytag: member="cvmx&#45;ipd.c::__cvmx_ipd_free_ptr_v2" ref="a09f2f8dd72bfa64f06bc347794b4b5ff" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void __cvmx_ipd_free_ptr_v2 </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8905a24c5da8481f6c890f650e6bd688"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_config" ref="a8905a24c5da8481f6c890f650e6bd688" args="(uint64_t mbuff_size, uint64_t first_mbuff_skip, uint64_t not_first_mbuff_skip, uint64_t first_back, uint64_t second_back, uint64_t wqe_fpa_pool, cvmx_ipd_mode_t cache_mode, uint64_t back_pres_enable_flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_config </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>mbuff_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>first_mbuff_skip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>not_first_mbuff_skip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>first_back</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>second_back</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>wqe_fpa_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-csr-enums_8h.html#ae17c1c6beb29f2c859c597b7db2bead8">cvmx_ipd_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>cache_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>back_pres_enable_flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure IPD. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mbuff_size</em>&nbsp;</td><td>Packets buffer size in 8 byte words </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>first_mbuff_skip</em>&nbsp;</td><td>Number of 8 byte words to skip in the first buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>not_first_mbuff_skip</em>&nbsp;</td><td>Number of 8 byte words to skip in each following buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>first_back</em>&nbsp;</td><td>Must be same as first_mbuff_skip / 128 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>second_back</em>&nbsp;</td><td>Must be same as not_first_mbuff_skip / 128 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wqe_fpa_pool</em>&nbsp;</td><td>FPA pool to get work entries from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cache_mode</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>back_pres_enable_flag</em>&nbsp;</td><td>Enable or disable port back pressure at a global level. This should always be 1 as more accurate control can be found in IPD_PORTX_BP_PAGE_CNT[BP_ENB]. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0e9fa457f0260c3f4f03a8f165050811"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_convert_to_newcfg" ref="a0e9fa457f0260c3f4f03a8f165050811" args="(cvmx_ipd_config_t ipd_config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_convert_to_newcfg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a>&nbsp;</td>
          <td class="paramname"> <em>ipd_config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abf1925c4d9dda730bd2588560321e567"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_disable" ref="abf1925c4d9dda730bd2588560321e567" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_disable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable IPD. </p>

</div>
</div>
<a class="anchor" id="a8dd2366b7f821f3fd600446c79e74956"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_enable" ref="a8dd2366b7f821f3fd600446c79e74956" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_enable </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable IPD. </p>

</div>
</div>
<a class="anchor" id="ac5f7dfdf40ed78b4d69de3da8c488abf"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_get_config" ref="ac5f7dfdf40ed78b4d69de3da8c488abf" args="(cvmx_ipd_config_t *ipd_config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_get_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a> *&nbsp;</td>
          <td class="paramname"> <em>ipd_config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the ipd related configuration from internal structure. </p>

</div>
</div>
<a class="anchor" id="a269cb26f5f761a6116e7ab8f03ae7e0b"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_set_config" ref="a269cb26f5f761a6116e7ab8f03ae7e0b" args="(cvmx_ipd_config_t ipd_config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_ipd_set_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a>&nbsp;</td>
          <td class="paramname"> <em>ipd_config</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the ipd related configuration in internal structure which is then used for seting IPD hardware block. </p>

</div>
</div>
<a class="anchor" id="ab7d1933e39b1378c27aadfe6e69f11a4"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_set_packet_pool_buffer_count" ref="ab7d1933e39b1378c27aadfe6e69f11a4" args="(uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_set_packet_pool_buffer_count </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9f6aa0a4762655425b40991d45e038af"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_set_packet_pool_config" ref="a9f6aa0a4762655425b40991d45e038af" args="(int64_t pool, uint64_t buffer_size, uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_set_packet_pool_config </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the internal FPA pool data structure for packet buffer pool. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>fpa pool number yo use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>buffer size of pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_count</em>&nbsp;</td><td>number of buufers to allocate to pool </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afe08260ee912574e86e7ccd34c5216d4"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_set_wqe_pool_buffer_count" ref="afe08260ee912574e86e7ccd34c5216d4" args="(uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_set_wqe_pool_buffer_count </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a132e07ca23d1932f86952781416219d3"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_set_wqe_pool_config" ref="a132e07ca23d1932f86952781416219d3" args="(int64_t pool, uint64_t buffer_size, uint64_t buffer_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_ipd_set_wqe_pool_config </td>
          <td>(</td>
          <td class="paramtype">int64_t&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>buffer_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the internal FPA pool data structure for wqe pool. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>fpa pool number yo use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_size</em>&nbsp;</td><td>buffer size of pool </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer_count</em>&nbsp;</td><td>number of buufers to allocate to pool </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a425d72db5eb99675509762cb20ae4f7d"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_setup_red" ref="a425d72db5eb99675509762cb20ae4f7d" args="(int pass_thresh, int drop_thresh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_ipd_setup_red </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pass_thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>drop_thresh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup Random Early Drop to automatically begin dropping packets. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pass_thresh</em>&nbsp;</td><td>Packets will begin slowly dropping when there are less than this many packet buffers free in FPA 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>drop_thresh</em>&nbsp;</td><td>All incomming packets will be dropped when there are less than this many free packet buffers in FPA 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success. Negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a262250e87e20281d055a626d1bfa86b6"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_setup_red_queue" ref="a262250e87e20281d055a626d1bfa86b6" args="(int queue, int pass_thresh, int drop_thresh)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_ipd_setup_red_queue </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>pass_thresh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>drop_thresh</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Setup Random Early Drop on a specific input queue. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>queue</em>&nbsp;</td><td>Input queue to setup RED on (0-7) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pass_thresh</em>&nbsp;</td><td>Packets will begin slowly dropping when there are less than this many packet buffers free in FPA 0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>drop_thresh</em>&nbsp;</td><td>All incomming packets will be dropped when there are less than this many free packet buffers in FPA 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success. Negative on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a64b10baf26f3f13b4c9cb69d77c996f7"></a><!-- doxytag: member="cvmx&#45;ipd.c::EXPORT_SYMBOL" ref="a64b10baf26f3f13b4c9cb69d77c996f7" args="(cvmx_ipd_disable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_ipd_disable&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab94c895b8ff014668a55fcb0e999527a"></a><!-- doxytag: member="cvmx&#45;ipd.c::EXPORT_SYMBOL" ref="ab94c895b8ff014668a55fcb0e999527a" args="(cvmx_ipd_enable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_ipd_enable&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a18614a16c2ac37626987fa675798db58"></a><!-- doxytag: member="cvmx&#45;ipd.c::EXPORT_SYMBOL" ref="a18614a16c2ac37626987fa675798db58" args="(cvmx_ipd_setup_red)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_ipd_setup_red&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a608dbfe9eb1bfd64043a8c597eb899ee"></a><!-- doxytag: member="cvmx&#45;ipd.c::EXPORT_SYMBOL" ref="a608dbfe9eb1bfd64043a8c597eb899ee" args="(cvmx_ipd_set_wqe_pool_config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_ipd_set_wqe_pool_config&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a324eb243508c4e76f02e68d278b04309"></a><!-- doxytag: member="cvmx&#45;ipd.c::EXPORT_SYMBOL" ref="a324eb243508c4e76f02e68d278b04309" args="(cvmx_ipd_set_packet_pool_config)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_ipd_set_packet_pool_config&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa6b6b1bc494a864e968a8a4a2b9ae3b8"></a><!-- doxytag: member="cvmx&#45;ipd.c::EXPORT_SYMBOL" ref="aa6b6b1bc494a864e968a8a4a2b9ae3b8" args="(cvmx_ipd_cfg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="cvmx-ipd_8h.html#a0a4ca33c2e2ab9288fe866ca5e783a85">cvmx_ipd_cfg</a>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a0a4ca33c2e2ab9288fe866ca5e783a85"></a><!-- doxytag: member="cvmx&#45;ipd.c::cvmx_ipd_cfg" ref="a0a4ca33c2e2ab9288fe866ca5e783a85" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CVMX_SHARED <a class="el" href="structcvmx__ipd__config__struct.html">cvmx_ipd_config_t</a> <a class="el" href="cvmx-ipd_8h.html#a0a4ca33c2e2ab9288fe866ca5e783a85">cvmx_ipd_cfg</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {.first_mbuf_skip = 184,
                        .ipd_enable = 1,
                        .cache_mode = <a class="code" href="cvmx-csr-enums_8h.html#ae17c1c6beb29f2c859c597b7db2bead8a258d9886ec0c3628a85aa7db5941a97c">CVMX_IPD_OPC_MODE_STT</a>,
                        .packet_pool = {0, 2048, 0},
                        .wqe_pool = {1, 128, 0},
                        .port_config = { <a class="code" href="cvmx-csr-enums_8h.html#a276b0f3b1f41aec509f77832cd34b6eda5988c123bd489277e4467f63c21ffb00" title="Full packet processing is performed with pointer starting at the L2 (ethernet MAC)...">CVMX_PIP_PORT_CFG_MODE_SKIPL2</a>,
                                <a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749ba8fa60f88b8e7ef96b7435792e1f25ed8" title="Tag ordering is maintained.">CVMX_POW_TAG_TYPE_ORDERED</a>,
                                <a class="code" href="cvmx-csr-enums_8h.html#af68237a82d8742f12dfad922d5e05c2fa7c42003f87aa0100617839b764aea926" title="Always use tuple tag algorithm.">CVMX_PIP_TAG_MODE_TUPLE</a>,
                                .tag_fields = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 }
                        }
                    }
</pre></div>
</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
