<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-mdio.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>cvmx-mdio.h</h1><a href="cvmx-mdio_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***********************license start***************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2003-2014  Cavium Inc. (support@cavium.com). All rights</span>
<a name="l00003"></a>00003 <span class="comment"> * reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00008"></a>00008 <span class="comment"> * met:</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> *   * Redistributions of source code must retain the above copyright</span>
<a name="l00011"></a>00011 <span class="comment"> *     notice, this list of conditions and the following disclaimer.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> *   * Redistributions in binary form must reproduce the above</span>
<a name="l00014"></a>00014 <span class="comment"> *     copyright notice, this list of conditions and the following</span>
<a name="l00015"></a>00015 <span class="comment"> *     disclaimer in the documentation and/or other materials provided</span>
<a name="l00016"></a>00016 <span class="comment"> *     with the distribution.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment"> *   * Neither the name of Cavium Inc. nor the names of</span>
<a name="l00019"></a>00019 <span class="comment"> *     its contributors may be used to endorse or promote products</span>
<a name="l00020"></a>00020 <span class="comment"> *     derived from this software without specific prior written</span>
<a name="l00021"></a>00021 <span class="comment"> *     permission.</span>
<a name="l00022"></a>00022 <span class="comment"></span>
<a name="l00023"></a>00023 <span class="comment"> * This Software, including technical data, may be subject to U.S. export  control</span>
<a name="l00024"></a>00024 <span class="comment"> * laws, including the U.S. Export Administration Act and its  associated</span>
<a name="l00025"></a>00025 <span class="comment"> * regulations, and may be subject to export or import  regulations in other</span>
<a name="l00026"></a>00026 <span class="comment"> * countries.</span>
<a name="l00027"></a>00027 <span class="comment"></span>
<a name="l00028"></a>00028 <span class="comment"> * TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE SOFTWARE IS PROVIDED &quot;AS IS&quot;</span>
<a name="l00029"></a>00029 <span class="comment"> * AND WITH ALL FAULTS AND CAVIUM INC. MAKES NO PROMISES, REPRESENTATIONS OR</span>
<a name="l00030"></a>00030 <span class="comment"> * WARRANTIES, EITHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, WITH RESPECT TO</span>
<a name="l00031"></a>00031 <span class="comment"> * THE SOFTWARE, INCLUDING ITS CONDITION, ITS CONFORMITY TO ANY REPRESENTATION OR</span>
<a name="l00032"></a>00032 <span class="comment"> * DESCRIPTION, OR THE EXISTENCE OF ANY LATENT OR PATENT DEFECTS, AND CAVIUM</span>
<a name="l00033"></a>00033 <span class="comment"> * SPECIFICALLY DISCLAIMS ALL IMPLIED (IF ANY) WARRANTIES OF TITLE,</span>
<a name="l00034"></a>00034 <span class="comment"> * MERCHANTABILITY, NONINFRINGEMENT, FITNESS FOR A PARTICULAR PURPOSE, LACK OF</span>
<a name="l00035"></a>00035 <span class="comment"> * VIRUSES, ACCURACY OR COMPLETENESS, QUIET ENJOYMENT, QUIET POSSESSION OR</span>
<a name="l00036"></a>00036 <span class="comment"> * CORRESPONDENCE TO DESCRIPTION. THE ENTIRE  RISK ARISING OUT OF USE OR</span>
<a name="l00037"></a>00037 <span class="comment"> * PERFORMANCE OF THE SOFTWARE LIES WITH YOU.</span>
<a name="l00038"></a>00038 <span class="comment"> ***********************license end**************************************/</span>
<a name="l00039"></a>00039 <span class="comment"></span>
<a name="l00040"></a>00040 <span class="comment">/**</span>
<a name="l00041"></a>00041 <span class="comment"> * @file</span>
<a name="l00042"></a>00042 <span class="comment"> *</span>
<a name="l00043"></a>00043 <span class="comment"> * Interface to the SMI/MDIO hardware, including support for both IEEE 802.3</span>
<a name="l00044"></a>00044 <span class="comment"> * clause 22 and clause 45 operations.</span>
<a name="l00045"></a>00045 <span class="comment"> *</span>
<a name="l00046"></a>00046 <span class="comment"> * &lt;hr&gt;$Revision: 95160 $&lt;hr&gt;</span>
<a name="l00047"></a>00047 <span class="comment"> */</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#ifndef __CVMX_MIO_H__</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define __CVMX_MIO_H__</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="preprocessor">#ifdef CVMX_BUILD_FOR_LINUX_KERNEL</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#include &lt;asm/octeon/cvmx-clock.h&gt;</span>
<a name="l00054"></a>00054 <span class="preprocessor">#else</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock.">cvmx-clock.h</a>&quot;</span>
<a name="l00056"></a>00056 <span class="preprocessor">#endif</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 <span class="preprocessor">#ifdef  __cplusplus</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="comment">/* *INDENT-OFF* */</span>
<a name="l00060"></a>00060 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00061"></a>00061 <span class="comment">/* *INDENT-ON* */</span>
<a name="l00062"></a>00062 <span class="preprocessor">#endif</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00064"></a>00064 <span class="comment">/**</span>
<a name="l00065"></a>00065 <span class="comment"> * PHY register 0 from the 802.3 spec</span>
<a name="l00066"></a>00066 <span class="comment"> */</span>
<a name="l00067"></a><a class="code" href="cvmx-mdio_8h.html#aef4713e1ac69bb76e11faa78ada804ad">00067</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_CONTROL 0</span>
<a name="l00068"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html">00068</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00069"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a3dc8b9f2836537de310806458c6c70c9">00069</a>     uint16_t u16;
<a name="l00070"></a>00070     <span class="keyword">struct </span>{
<a name="l00071"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#aa6b43143f81b7ab6d937adcc7c9fdf8b">00071</a>         uint16_t reset:1;
<a name="l00072"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#ac4925758bc1f46e648a9a015e7b7392c">00072</a>         uint16_t loopback:1;
<a name="l00073"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a57e661f00d73814a62178387926b45ae">00073</a>         uint16_t speed_lsb:1;
<a name="l00074"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a58d799b0f2de32da2447e63adcbda448">00074</a>         uint16_t autoneg_enable:1;
<a name="l00075"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#ae88a6ed0d379a1aabf57c13a0e766991">00075</a>         uint16_t power_down:1;
<a name="l00076"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a4e51fc8cf731ad96b1731ed94a4b39ab">00076</a>         uint16_t isolate:1;
<a name="l00077"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a6d6378248dc8d5fd64ffcc395c3c3abf">00077</a>         uint16_t restart_autoneg:1;
<a name="l00078"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a03dada6a3c735fce6f061c4aeffb1a15">00078</a>         uint16_t duplex:1;
<a name="l00079"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#afd23dd8bb82923412a1fc2e268f799c0">00079</a>         uint16_t collision_test:1;
<a name="l00080"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a8fabd628b04d9e0fb5f05a32fe21be2e">00080</a>         uint16_t speed_msb:1;
<a name="l00081"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a3a250255d3b641449fff97f99be030c7">00081</a>         uint16_t unidirectional_enable:1;
<a name="l00082"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__t.html#a841020113035fae4542a06f4efc7d667">00082</a>         uint16_t reserved_0_4:5;
<a name="l00083"></a>00083     } <a class="code" href="unioncvmx__mdbwx__timeout__jce__w1.html#afae38c238e385c86e351eeb19300a34a">s</a>;
<a name="l00084"></a>00084 } <a class="code" href="unioncvmx__mdio__phy__reg__control__t.html">cvmx_mdio_phy_reg_control_t</a>;
<a name="l00085"></a>00085 <span class="comment"></span>
<a name="l00086"></a>00086 <span class="comment">/**</span>
<a name="l00087"></a>00087 <span class="comment"> * PHY register 1 from the 802.3 spec</span>
<a name="l00088"></a>00088 <span class="comment"> */</span>
<a name="l00089"></a><a class="code" href="cvmx-mdio_8h.html#a1659f492f9da2350ca982c0cfa41cbcc">00089</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_STATUS 1</span>
<a name="l00090"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html">00090</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00091"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a32c394324ffd675f45a50333b8b1618a">00091</a>     uint16_t u16;
<a name="l00092"></a>00092     <span class="keyword">struct </span>{
<a name="l00093"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a32063dc37bd670dcb83da8da3224a17c">00093</a>         uint16_t capable_100base_t4:1;
<a name="l00094"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a06e6cf97128e30c3e552bdc5910c2763">00094</a>         uint16_t capable_100base_x_full:1;
<a name="l00095"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a1ba95ba6cd3be14c48ca1a54f5f7f168">00095</a>         uint16_t capable_100base_x_half:1;
<a name="l00096"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a27f319aab2f3cbfce400241daebadc16">00096</a>         uint16_t capable_10_full:1;
<a name="l00097"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#acd96ada99c3b88e15a7c9d2ccc96d22f">00097</a>         uint16_t capable_10_half:1;
<a name="l00098"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a3e350732c7458c1c387cac7e3b224a2d">00098</a>         uint16_t capable_100base_t2_full:1;
<a name="l00099"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a1f143b16a802e135fc14783fc7fa8e3c">00099</a>         uint16_t capable_100base_t2_half:1;
<a name="l00100"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a8a5eef2dbd20623af5034900ec995aa6">00100</a>         uint16_t capable_extended_status:1;
<a name="l00101"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a40ba7a08a49eabeaf2043b47e2eb63bc">00101</a>         uint16_t capable_unidirectional:1;
<a name="l00102"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a478375f15fc0103fe0187c40a9900bdb">00102</a>         uint16_t capable_mf_preamble_suppression:1;
<a name="l00103"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a061359fcc72fa2237e2648be7206cdf7">00103</a>         uint16_t autoneg_complete:1;
<a name="l00104"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#a9e44ca4187a0d2e7edd1d1e08a934e1a">00104</a>         uint16_t remote_fault:1;
<a name="l00105"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#aaea2b7f98b1f46fc2805838a4c5bc4f9">00105</a>         uint16_t capable_autoneg:1;
<a name="l00106"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#ab9d627c036ff2be5c2fa442b3b56193b">00106</a>         uint16_t link_status:1;
<a name="l00107"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#adc639f299b5c3731c6b7ec372f59ff56">00107</a>         uint16_t jabber_detect:1;
<a name="l00108"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__t.html#ac5835ce9b059cde68062e3ba20dd6eea">00108</a>         uint16_t capable_extended_registers:1;
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00111"></a>00111 } <a class="code" href="unioncvmx__mdio__phy__reg__status__t.html">cvmx_mdio_phy_reg_status_t</a>;
<a name="l00112"></a>00112 <span class="comment"></span>
<a name="l00113"></a>00113 <span class="comment">/**</span>
<a name="l00114"></a>00114 <span class="comment"> * PHY register 2 from the 802.3 spec</span>
<a name="l00115"></a>00115 <span class="comment"> */</span>
<a name="l00116"></a><a class="code" href="cvmx-mdio_8h.html#a1caa3146d57df803a7f0488ab5fe1cbb">00116</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_ID1 2</span>
<a name="l00117"></a><a class="code" href="unioncvmx__mdio__phy__reg__id1__t.html">00117</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00118"></a><a class="code" href="unioncvmx__mdio__phy__reg__id1__t.html#abb28be0a66610bae32a93b5768728205">00118</a>     uint16_t u16;
<a name="l00119"></a>00119     <span class="keyword">struct </span>{
<a name="l00120"></a><a class="code" href="unioncvmx__mdio__phy__reg__id1__t.html#a908cd360f337016c4eebce4ba61ad66d">00120</a>         uint16_t oui_bits_3_18;
<a name="l00121"></a>00121     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00122"></a>00122 } <a class="code" href="unioncvmx__mdio__phy__reg__id1__t.html">cvmx_mdio_phy_reg_id1_t</a>;
<a name="l00123"></a>00123 <span class="comment"></span>
<a name="l00124"></a>00124 <span class="comment">/**</span>
<a name="l00125"></a>00125 <span class="comment"> * PHY register 3 from the 802.3 spec</span>
<a name="l00126"></a>00126 <span class="comment"> */</span>
<a name="l00127"></a><a class="code" href="cvmx-mdio_8h.html#acebe556e63f59c8584e1ea1b71545a9f">00127</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_ID2 3</span>
<a name="l00128"></a><a class="code" href="unioncvmx__mdio__phy__reg__id2__t.html">00128</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00129"></a><a class="code" href="unioncvmx__mdio__phy__reg__id2__t.html#a4784a8632f17de3e2c739a214413fadd">00129</a>     uint16_t u16;
<a name="l00130"></a>00130     <span class="keyword">struct </span>{
<a name="l00131"></a><a class="code" href="unioncvmx__mdio__phy__reg__id2__t.html#acad5d3305687188b1c05d9b58ae36eba">00131</a>         uint16_t oui_bits_19_24:6;
<a name="l00132"></a><a class="code" href="unioncvmx__mdio__phy__reg__id2__t.html#a2ce5666e0997128018105e91cfb30d44">00132</a>         uint16_t model:6;
<a name="l00133"></a><a class="code" href="unioncvmx__mdio__phy__reg__id2__t.html#a0bddc3d35c6ed14c1c1b127cf26f1233">00133</a>         uint16_t revision:4;
<a name="l00134"></a>00134     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00135"></a>00135 } <a class="code" href="unioncvmx__mdio__phy__reg__id2__t.html">cvmx_mdio_phy_reg_id2_t</a>;
<a name="l00136"></a>00136 <span class="comment"></span>
<a name="l00137"></a>00137 <span class="comment">/**</span>
<a name="l00138"></a>00138 <span class="comment"> * PHY register 4 from the 802.3 spec</span>
<a name="l00139"></a>00139 <span class="comment"> */</span>
<a name="l00140"></a><a class="code" href="cvmx-mdio_8h.html#a7e75b3aa90501cfb857fa36f587bf90c">00140</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_AUTONEG_ADVER 4</span>
<a name="l00141"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html">00141</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00142"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#adced957acf7e76dff5e5c29120bcf137">00142</a>     uint16_t u16;
<a name="l00143"></a>00143     <span class="keyword">struct </span>{
<a name="l00144"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#a4f7d59cfd6c549042b73e73f2ba60e7f">00144</a>         uint16_t next_page:1;
<a name="l00145"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#aaa376623097710500d297d1f838574a8">00145</a>         uint16_t reserved_14:1;
<a name="l00146"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#ac3e36f922a74fd8ba3bb0311356c1a5a">00146</a>         uint16_t remote_fault:1;
<a name="l00147"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#adb0ae1f935ada8359f96a19688beab01">00147</a>         uint16_t reserved_12:1;
<a name="l00148"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#aa1863cdfc904701284073d8b627d740c">00148</a>         uint16_t asymmetric_pause:1;
<a name="l00149"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#a90d890f3cacf523893619db664dffa79">00149</a>         uint16_t pause:1;
<a name="l00150"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#a2269c6f10d9775d788e194e3efb790d9">00150</a>         uint16_t advert_100base_t4:1;
<a name="l00151"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#adde49d2ab31eb1de40282762efc1616d">00151</a>         uint16_t advert_100base_tx_full:1;
<a name="l00152"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#a8f1aaf009e5adc683f4f04ff5d6070f2">00152</a>         uint16_t advert_100base_tx_half:1;
<a name="l00153"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#ae8db4ce676faa3ab11a83cc76cddd074">00153</a>         uint16_t advert_10base_tx_full:1;
<a name="l00154"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#a445f9078d1b3c12386f3fc2750095859">00154</a>         uint16_t advert_10base_tx_half:1;
<a name="l00155"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html#af5f5d2fb7c703c0994b4e4d8bf72e8ea">00155</a>         uint16_t selector:5;
<a name="l00156"></a>00156     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00157"></a>00157 } <a class="code" href="unioncvmx__mdio__phy__reg__autoneg__adver__t.html">cvmx_mdio_phy_reg_autoneg_adver_t</a>;
<a name="l00158"></a>00158 <span class="comment"></span>
<a name="l00159"></a>00159 <span class="comment">/**</span>
<a name="l00160"></a>00160 <span class="comment"> * PHY register 5 from the 802.3 spec</span>
<a name="l00161"></a>00161 <span class="comment"> */</span>
<a name="l00162"></a><a class="code" href="cvmx-mdio_8h.html#acc285061f703545655a18cb403dc30ff">00162</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_LINK_PARTNER_ABILITY 5</span>
<a name="l00163"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html">00163</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00164"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a075fc64975b6f43281a12b00bdb3406f">00164</a>     uint16_t u16;
<a name="l00165"></a>00165     <span class="keyword">struct </span>{
<a name="l00166"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a8fa300642f47f7bc5e2c79ff54943ea0">00166</a>         uint16_t next_page:1;
<a name="l00167"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a28cff8b7e369a3439e3b81dd60520304">00167</a>         uint16_t ack:1;
<a name="l00168"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a1c702ca371507c3013da502b710a327e">00168</a>         uint16_t remote_fault:1;
<a name="l00169"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a3a27801b896cc67a1c8dda7de6e54657">00169</a>         uint16_t reserved_12:1;
<a name="l00170"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#ad3f62ce0273ee07a168ca77f553e764e">00170</a>         uint16_t asymmetric_pause:1;
<a name="l00171"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a9af90a3ebf568af6c901a641ff25d966">00171</a>         uint16_t pause:1;
<a name="l00172"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a415bedebcc7cfccbbeb24b8a80e1ca8c">00172</a>         uint16_t advert_100base_t4:1;
<a name="l00173"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#ada87239b99eecef3cca2934ac99c66d3">00173</a>         uint16_t advert_100base_tx_full:1;
<a name="l00174"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a738d9e6e0068eb237d3d5fbca2318d90">00174</a>         uint16_t advert_100base_tx_half:1;
<a name="l00175"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a097a98a570b018732524b1bd7eb49422">00175</a>         uint16_t advert_10base_tx_full:1;
<a name="l00176"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a1eb6db4e555178d93a0ff740546084dc">00176</a>         uint16_t advert_10base_tx_half:1;
<a name="l00177"></a><a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html#a3fab85a5fc804e0550d18de2dd9a9070">00177</a>         uint16_t selector:5;
<a name="l00178"></a>00178     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00179"></a>00179 } <a class="code" href="unioncvmx__mdio__phy__reg__link__partner__ability__t.html">cvmx_mdio_phy_reg_link_partner_ability_t</a>;
<a name="l00180"></a>00180 <span class="comment"></span>
<a name="l00181"></a>00181 <span class="comment">/**</span>
<a name="l00182"></a>00182 <span class="comment"> * PHY register 6 from the 802.3 spec</span>
<a name="l00183"></a>00183 <span class="comment"> */</span>
<a name="l00184"></a><a class="code" href="cvmx-mdio_8h.html#a215d09af7e2e2ce20573992efe3bda25">00184</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_AUTONEG_EXPANSION 6</span>
<a name="l00185"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html">00185</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00186"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#a33b2f13c8d9ce826d5eb193f0732ec59">00186</a>     uint16_t u16;
<a name="l00187"></a>00187     <span class="keyword">struct </span>{
<a name="l00188"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#a70763daf58444afb0c9b9746a8c5ad85">00188</a>         uint16_t reserved_5_15:11;
<a name="l00189"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#ae5e94ddce22c999daa9c543bdd3d7ba0">00189</a>         uint16_t parallel_detection_fault:1;
<a name="l00190"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#a66b632a7cccf5ac96db0f53f7c78a36d">00190</a>         uint16_t link_partner_next_page_capable:1;
<a name="l00191"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#a53c61ea73acf0372592a55e0bb840ddc">00191</a>         uint16_t local_next_page_capable:1;
<a name="l00192"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#a5b0708109ef7ea7a439ce07729c26ee4">00192</a>         uint16_t page_received:1;
<a name="l00193"></a><a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html#a8e6b71ec1f445cc745d6a93120da3f11">00193</a>         uint16_t link_partner_autoneg_capable:1;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00196"></a>00196 } <a class="code" href="unioncvmx__mdio__phy__reg__autoneg__expansion__t.html">cvmx_mdio_phy_reg_autoneg_expansion_t</a>;
<a name="l00197"></a>00197 <span class="comment"></span>
<a name="l00198"></a>00198 <span class="comment">/**</span>
<a name="l00199"></a>00199 <span class="comment"> * PHY register 9 from the 802.3 spec</span>
<a name="l00200"></a>00200 <span class="comment"> */</span>
<a name="l00201"></a><a class="code" href="cvmx-mdio_8h.html#a99524289f854c28fbc87db5665600f45">00201</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_CONTROL_1000 9</span>
<a name="l00202"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html">00202</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00203"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a9acae630e88700407153894a5ae85f24">00203</a>     uint16_t u16;
<a name="l00204"></a>00204     <span class="keyword">struct </span>{
<a name="l00205"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a885dd653bffa49fec0890546b62e45e0">00205</a>         uint16_t test_mode:3;
<a name="l00206"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a36d248942b9401571c4266210cd99e76">00206</a>         uint16_t manual_master_slave:1;
<a name="l00207"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a5faa0e7ba0bca35d57d53ce3c109befe">00207</a>         uint16_t master:1;
<a name="l00208"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a55f5ffca803db94727e6e7f26061d10a">00208</a>         uint16_t port_type:1;
<a name="l00209"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a9182629273d05aa039050d4be9ae702b">00209</a>         uint16_t advert_1000base_t_full:1;
<a name="l00210"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#a3531f50b870b4a4b9fa92ad24ea9c273">00210</a>         uint16_t advert_1000base_t_half:1;
<a name="l00211"></a><a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html#ad6c36b03ccc79868351ec47dd865e963">00211</a>         uint16_t reserved_0_7:8;
<a name="l00212"></a>00212     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00213"></a>00213 } <a class="code" href="unioncvmx__mdio__phy__reg__control__1000__t.html">cvmx_mdio_phy_reg_control_1000_t</a>;
<a name="l00214"></a>00214 <span class="comment"></span>
<a name="l00215"></a>00215 <span class="comment">/**</span>
<a name="l00216"></a>00216 <span class="comment"> * PHY register 10 from the 802.3 spec</span>
<a name="l00217"></a>00217 <span class="comment"> */</span>
<a name="l00218"></a><a class="code" href="cvmx-mdio_8h.html#af092e79d22a4f513ee979d1b61a01e61">00218</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_STATUS_1000 10</span>
<a name="l00219"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html">00219</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00220"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#acab7ca8b645dff6c69db50653e9744bc">00220</a>     uint16_t u16;
<a name="l00221"></a>00221     <span class="keyword">struct </span>{
<a name="l00222"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#a390d794ae0abe1a4581c37b850c36c1f">00222</a>         uint16_t master_slave_fault:1;
<a name="l00223"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#aca3fc238a142457efc35a6f16ae2c4d5">00223</a>         uint16_t is_master:1;
<a name="l00224"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#a12664739533bbd8647b4baf8fe79285e">00224</a>         uint16_t local_receiver_ok:1;
<a name="l00225"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#a2237ce15fc5855d82fb4a39d43e1bb46">00225</a>         uint16_t remote_receiver_ok:1;
<a name="l00226"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#a02272e007a5dd780919a86398f115233">00226</a>         uint16_t remote_capable_1000base_t_full:1;
<a name="l00227"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#a2103a16c3d2a271c766c72af764c61ae">00227</a>         uint16_t remote_capable_1000base_t_half:1;
<a name="l00228"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#abfffd516767560eb2c170520804b86aa">00228</a>         uint16_t reserved_8_9:2;
<a name="l00229"></a><a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html#a32796082f30fec4e7023cbb4ec9d6a77">00229</a>         uint16_t idle_error_count:8;
<a name="l00230"></a>00230     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00231"></a>00231 } <a class="code" href="unioncvmx__mdio__phy__reg__status__1000__t.html">cvmx_mdio_phy_reg_status_1000_t</a>;
<a name="l00232"></a>00232 <span class="comment"></span>
<a name="l00233"></a>00233 <span class="comment">/**</span>
<a name="l00234"></a>00234 <span class="comment"> * PHY register 15 from the 802.3 spec</span>
<a name="l00235"></a>00235 <span class="comment"> */</span>
<a name="l00236"></a><a class="code" href="cvmx-mdio_8h.html#a69e6e00aa92c9170104a10ed0031f34d">00236</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_EXTENDED_STATUS 15</span>
<a name="l00237"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html">00237</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00238"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html#aa640cc9ce261d3998248ef7c7ab45354">00238</a>     uint16_t u16;
<a name="l00239"></a>00239     <span class="keyword">struct </span>{
<a name="l00240"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html#a690d0639b75f7b1089af217428e99213">00240</a>         uint16_t capable_1000base_x_full:1;
<a name="l00241"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html#aba2ecd69a6335e28a6eea7f8844daaf1">00241</a>         uint16_t capable_1000base_x_half:1;
<a name="l00242"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html#a383ae6071b09691c918d3dc5c112f05b">00242</a>         uint16_t capable_1000base_t_full:1;
<a name="l00243"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html#a3ac0cd5c2637b44cc16ffd0b3a801280">00243</a>         uint16_t capable_1000base_t_half:1;
<a name="l00244"></a><a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html#a123425d3e46ae0fd238c1ac1343706ef">00244</a>         uint16_t reserved_0_11:12;
<a name="l00245"></a>00245     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00246"></a>00246 } <a class="code" href="unioncvmx__mdio__phy__reg__extended__status__t.html">cvmx_mdio_phy_reg_extended_status_t</a>;
<a name="l00247"></a>00247 <span class="comment"></span>
<a name="l00248"></a>00248 <span class="comment">/**</span>
<a name="l00249"></a>00249 <span class="comment"> * PHY register 13 from the 802.3 spec</span>
<a name="l00250"></a>00250 <span class="comment"> */</span>
<a name="l00251"></a><a class="code" href="cvmx-mdio_8h.html#a53951669e8daceab6b2adc576fc43502">00251</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_MMD_CONTROL 13</span>
<a name="l00252"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__control__t.html">00252</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00253"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__control__t.html#ac8a33006f23ae9149f35483a2563d11b">00253</a>     uint16_t u16;
<a name="l00254"></a>00254     <span class="keyword">struct </span>{
<a name="l00255"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__control__t.html#a09a6d00c3da12d53584e7345785e799d">00255</a>         uint16_t function:2;
<a name="l00256"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__control__t.html#a8f62f373cbf1c3ba4571456609d91fd2">00256</a>         uint16_t reserved_5_13:9;
<a name="l00257"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__control__t.html#aa2b2239ae19ff58454a7143a34afd17b">00257</a>         uint16_t devad:5;
<a name="l00258"></a>00258     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00259"></a>00259 } <a class="code" href="unioncvmx__mdio__phy__reg__mmd__control__t.html">cvmx_mdio_phy_reg_mmd_control_t</a>;
<a name="l00260"></a>00260 <span class="comment"></span>
<a name="l00261"></a>00261 <span class="comment">/**</span>
<a name="l00262"></a>00262 <span class="comment"> * PHY register 14 from the 802.3 spec</span>
<a name="l00263"></a>00263 <span class="comment"> */</span>
<a name="l00264"></a><a class="code" href="cvmx-mdio_8h.html#a3b7b5c4545f25b853fc7ccabd84f7f3e">00264</a> <span class="preprocessor">#define CVMX_MDIO_PHY_REG_MMD_ADDRESS_DATA 14</span>
<a name="l00265"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__address__data__t.html">00265</a> <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00266"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__address__data__t.html#a0cd288d05eec627929ad423977e2f4bc">00266</a>     uint16_t u16;
<a name="l00267"></a>00267     <span class="keyword">struct </span>{
<a name="l00268"></a><a class="code" href="unioncvmx__mdio__phy__reg__mmd__address__data__t.html#ac3cc23447e2718c9c94573a24e077cf5">00268</a>         uint16_t address_data:16;
<a name="l00269"></a>00269     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00270"></a>00270 } <a class="code" href="unioncvmx__mdio__phy__reg__mmd__address__data__t.html">cvmx_mdio_phy_reg_mmd_address_data_t</a>;
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 <span class="comment">/* Operating request encodings. */</span>
<a name="l00273"></a><a class="code" href="cvmx-mdio_8h.html#a524d3978e9ecfeb088bae1e0192b042c">00273</a> <span class="preprocessor">#define MDIO_CLAUSE_22_WRITE    0</span>
<a name="l00274"></a><a class="code" href="cvmx-mdio_8h.html#a50a5ef93ad94c89ac513e4a2f3f1fdde">00274</a> <span class="preprocessor"></span><span class="preprocessor">#define MDIO_CLAUSE_22_READ     1</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span>
<a name="l00276"></a><a class="code" href="cvmx-mdio_8h.html#a8852fb9c4bc106700e0152b9dfd17e08">00276</a> <span class="preprocessor">#define MDIO_CLAUSE_45_ADDRESS  0</span>
<a name="l00277"></a><a class="code" href="cvmx-mdio_8h.html#adaf430463dd43bf8ebf4d6982eae1654">00277</a> <span class="preprocessor"></span><span class="preprocessor">#define MDIO_CLAUSE_45_WRITE    1</span>
<a name="l00278"></a><a class="code" href="cvmx-mdio_8h.html#a8c7ddbb85ebde0ea68b8a84abd3a730f">00278</a> <span class="preprocessor"></span><span class="preprocessor">#define MDIO_CLAUSE_45_READ_INC 2</span>
<a name="l00279"></a><a class="code" href="cvmx-mdio_8h.html#a9497c932101606520e4433d87772fead">00279</a> <span class="preprocessor"></span><span class="preprocessor">#define MDIO_CLAUSE_45_READ     3</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span>
<a name="l00281"></a>00281 <span class="comment">/* MMD identifiers, mostly for accessing devices within XENPAK modules. */</span>
<a name="l00282"></a><a class="code" href="cvmx-mdio_8h.html#a8b9efc68fc226b680b34925bcf7fecbe">00282</a> <span class="preprocessor">#define CVMX_MMD_DEVICE_PMA_PMD      1</span>
<a name="l00283"></a><a class="code" href="cvmx-mdio_8h.html#a91de67cf31282211339b8e0251299e73">00283</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_WIS          2</span>
<a name="l00284"></a><a class="code" href="cvmx-mdio_8h.html#ab8fda15f74221adeee31a03a83a59fde">00284</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_PCS          3</span>
<a name="l00285"></a><a class="code" href="cvmx-mdio_8h.html#aecb479e4cd724fb3eb5578c49d554bfb">00285</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_PHY_XS       4</span>
<a name="l00286"></a><a class="code" href="cvmx-mdio_8h.html#ac39fd9101b85ca381ac2d16ec7dada78">00286</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_DTS_XS       5</span>
<a name="l00287"></a><a class="code" href="cvmx-mdio_8h.html#a7a7f94c14e55a209b84aa58f76e8b4f8">00287</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_TC           6</span>
<a name="l00288"></a><a class="code" href="cvmx-mdio_8h.html#af44e533961b113c44a88db269503f6ca">00288</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_CL22_EXT     29</span>
<a name="l00289"></a><a class="code" href="cvmx-mdio_8h.html#af3372a1e955513f1da591d7da2279f58">00289</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_VENDOR_1     30</span>
<a name="l00290"></a><a class="code" href="cvmx-mdio_8h.html#a9777547d7cb5608665b3f6e801550eae">00290</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_MMD_DEVICE_VENDOR_2     31</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span>
<a name="l00292"></a><a class="code" href="cvmx-mdio_8h.html#a045671b6faecec42bea0c0c94331b420">00292</a> <span class="preprocessor">#define CVMX_MDIO_TIMEOUT   100000  </span><span class="comment">/* 100 millisec */</span>
<a name="l00293"></a>00293 
<a name="l00294"></a><a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">00294</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(<span class="keywordtype">int</span> bus_id)
<a name="l00295"></a>00295 {
<a name="l00296"></a>00296     <span class="keywordflow">if</span> (<a class="code" href="octeon-model_8h.html#a9234ac9e9f35fafd7fe5eedd37c9b552">OCTEON_IS_MODEL</a>(<a class="code" href="octeon-model_8h.html#a1deef61f201401bab191e2ab4a1d05a6">OCTEON_CN78XX</a>))
<a name="l00297"></a>00297         <span class="keywordflow">return</span> (bus_id &gt;&gt; 2) &amp; <a class="code" href="cvmx-asm_8h.html#a8ae9af1e611d075d63a4c08e427939f0">CVMX_NODE_MASK</a>;
<a name="l00298"></a>00298     <span class="keywordflow">else</span>
<a name="l00299"></a>00299         <span class="keywordflow">return</span> 0;
<a name="l00300"></a>00300 }
<a name="l00301"></a>00301 
<a name="l00302"></a><a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">00302</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(<span class="keywordtype">int</span> bus_id)
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304     <span class="keywordflow">if</span> (<a class="code" href="octeon-model_8h.html#a9234ac9e9f35fafd7fe5eedd37c9b552">OCTEON_IS_MODEL</a>(<a class="code" href="octeon-model_8h.html#a1deef61f201401bab191e2ab4a1d05a6">OCTEON_CN78XX</a>))
<a name="l00305"></a>00305         <span class="keywordflow">return</span> bus_id &amp; 3;
<a name="l00306"></a>00306     <span class="keywordflow">else</span>
<a name="l00307"></a>00307         <span class="keywordflow">return</span> bus_id;
<a name="l00308"></a>00308 }
<a name="l00309"></a>00309 
<a name="l00310"></a>00310 <span class="comment">/* Helper function to put MDIO interface into clause 45 mode */</span>
<a name="l00311"></a><a class="code" href="cvmx-mdio_8h.html#a7c2461e15a8415bdb28fd69f499317de">00311</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-mdio_8h.html#a7c2461e15a8415bdb28fd69f499317de">__cvmx_mdio_set_clause45_mode</a>(<span class="keywordtype">int</span> bus_id)
<a name="l00312"></a>00312 {
<a name="l00313"></a>00313     <a class="code" href="unioncvmx__smix__clk.html" title="cvmx_smi::_clk">cvmx_smix_clk_t</a> smi_clk;
<a name="l00314"></a>00314     <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00315"></a>00315     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317     <span class="comment">/* Put bus into clause 45 mode */</span>
<a name="l00318"></a>00318     smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a0f96294e25f00486878361bad8423922">u64</a> = <a class="code" href="cvmx-access_8h.html#a2b50ee7713f0744b1fef03cfa4c1b670">cvmx_read_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a719c07b6134728760ca1f290f3e97a04" title="cvmx-smix-defs.h">CVMX_SMIX_CLK</a>(bus));
<a name="l00319"></a>00319     smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a4f9e586bb5038fcc695371880706c021">s</a>.<a class="code" href="structcvmx__smix__clk_1_1cvmx__smix__clk__s.html#a15abe84c37626ba76801360b3ad745c7">mode</a> = 1;
<a name="l00320"></a>00320     smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a4f9e586bb5038fcc695371880706c021">s</a>.<a class="code" href="structcvmx__smix__clk_1_1cvmx__smix__clk__s.html#af2a95bab688d823493f052fac7792ab0">preamble</a> = 1;
<a name="l00321"></a>00321     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a719c07b6134728760ca1f290f3e97a04" title="cvmx-smix-defs.h">CVMX_SMIX_CLK</a>(bus), smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a0f96294e25f00486878361bad8423922">u64</a>);
<a name="l00322"></a>00322 }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 <span class="comment">/* Helper function to put MDIO interface into clause 22 mode */</span>
<a name="l00325"></a><a class="code" href="cvmx-mdio_8h.html#a3c287cfa0e8112134c4f321b290d28d1">00325</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-mdio_8h.html#a3c287cfa0e8112134c4f321b290d28d1">__cvmx_mdio_set_clause22_mode</a>(<span class="keywordtype">int</span> bus_id)
<a name="l00326"></a>00326 {
<a name="l00327"></a>00327     <a class="code" href="unioncvmx__smix__clk.html" title="cvmx_smi::_clk">cvmx_smix_clk_t</a> smi_clk;
<a name="l00328"></a>00328     <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00329"></a>00329     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <span class="comment">/* Put bus into clause 22 mode */</span>
<a name="l00332"></a>00332     smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a0f96294e25f00486878361bad8423922">u64</a> = <a class="code" href="cvmx-access_8h.html#a2b50ee7713f0744b1fef03cfa4c1b670">cvmx_read_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a719c07b6134728760ca1f290f3e97a04" title="cvmx-smix-defs.h">CVMX_SMIX_CLK</a>(bus));
<a name="l00333"></a>00333     smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a4f9e586bb5038fcc695371880706c021">s</a>.<a class="code" href="structcvmx__smix__clk_1_1cvmx__smix__clk__s.html#a15abe84c37626ba76801360b3ad745c7">mode</a> = 0;
<a name="l00334"></a>00334     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a719c07b6134728760ca1f290f3e97a04" title="cvmx-smix-defs.h">CVMX_SMIX_CLK</a>(bus), smi_clk.<a class="code" href="unioncvmx__smix__clk.html#a0f96294e25f00486878361bad8423922">u64</a>);
<a name="l00335"></a>00335 }
<a name="l00336"></a>00336 <span class="comment"></span>
<a name="l00337"></a>00337 <span class="comment">/**</span>
<a name="l00338"></a>00338 <span class="comment"> * @INTERNAL</span>
<a name="l00339"></a>00339 <span class="comment"> * Function to read SMIX_RD_DAT and check for timeouts. This</span>
<a name="l00340"></a>00340 <span class="comment"> * code sequence is done fairly often, so put in in one spot.</span>
<a name="l00341"></a>00341 <span class="comment"> *</span>
<a name="l00342"></a>00342 <span class="comment"> * @param bus_id SMI/MDIO bus to read</span>
<a name="l00343"></a>00343 <span class="comment"> *</span>
<a name="l00344"></a>00344 <span class="comment"> * @return Value of SMIX_RD_DAT. pending will be set on</span>
<a name="l00345"></a>00345 <span class="comment"> *         a timeout.</span>
<a name="l00346"></a>00346 <span class="comment"> */</span>
<a name="l00347"></a><a class="code" href="cvmx-mdio_8h.html#a6e26883a45fedb0bb40c85ef490edd26">00347</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="unioncvmx__smix__rd__dat.html" title="cvmx_smi::_rd_dat">cvmx_smix_rd_dat_t</a> <a class="code" href="cvmx-mdio_8h.html#a6e26883a45fedb0bb40c85ef490edd26" title="Internal use function.">__cvmx_mdio_read_rd_dat</a>(<span class="keywordtype">int</span> bus_id)
<a name="l00348"></a>00348 {
<a name="l00349"></a>00349     <a class="code" href="unioncvmx__smix__rd__dat.html" title="cvmx_smi::_rd_dat">cvmx_smix_rd_dat_t</a> smi_rd;
<a name="l00350"></a>00350     <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00351"></a>00351     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00352"></a>00352     uint64_t done;
<a name="l00353"></a>00353 
<a name="l00354"></a>00354     done = (uint64_t)<a class="code" href="cvmx-mdio_8h.html#a045671b6faecec42bea0c0c94331b420">CVMX_MDIO_TIMEOUT</a> * <a class="code" href="cvmx-clock_8c.html#a0a64da2d6779bf28d6af57408b67d259">cvmx_clock_get_rate</a>(<a class="code" href="cvmx-clock_8h.html#a72edd1cfc6601809fea7ce5ce6c05965a45f8626497cee8c3f3cc4e02cf495183" title="Alias for CVMX_CLOCK_RCLK.">CVMX_CLOCK_CORE</a>);
<a name="l00355"></a>00355     done /= 1000000;
<a name="l00356"></a>00356     done += <a class="code" href="cvmx-access_8h.html#af128006d41e3a13691e171128ae8cd74">cvmx_get_cycle</a>();
<a name="l00357"></a>00357 
<a name="l00358"></a>00358     <span class="keywordflow">do</span> {
<a name="l00359"></a>00359         <a class="code" href="cvmx-access_8h.html#a30a2c9cccb173c6c512653b99e0ccf25" title="Wait for the specified number of core clock cycles.">cvmx_wait</a>(1000);
<a name="l00360"></a>00360         smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#aea16b6af0d20506c62c092389f9b3f77">u64</a> = <a class="code" href="cvmx-access_8h.html#a2b50ee7713f0744b1fef03cfa4c1b670">cvmx_read_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#abfe4b22b521c4c5512ffafa4c2eb3ee1">CVMX_SMIX_RD_DAT</a>(bus));
<a name="l00361"></a>00361     } <span class="keywordflow">while</span> (smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#ad95acb55e79951382376104741b0a31e">s</a>.<a class="code" href="structcvmx__smix__rd__dat_1_1cvmx__smix__rd__dat__s.html#afc7d6d598490baf2fb99a0c277fa8a34">pending</a> &amp;&amp; (<a class="code" href="cvmx-access_8h.html#af128006d41e3a13691e171128ae8cd74">cvmx_get_cycle</a>() &lt; done));
<a name="l00362"></a>00362 
<a name="l00363"></a>00363     <span class="keywordflow">return</span> smi_rd;
<a name="l00364"></a>00364 }
<a name="l00365"></a>00365 <span class="comment"></span>
<a name="l00366"></a>00366 <span class="comment">/**</span>
<a name="l00367"></a>00367 <span class="comment"> * Perform an MII read. This function is used to read PHY</span>
<a name="l00368"></a>00368 <span class="comment"> * registers controlling auto negotiation.</span>
<a name="l00369"></a>00369 <span class="comment"> *</span>
<a name="l00370"></a>00370 <span class="comment"> * @param bus_id   MDIO bus number. Zero on most chips, but some chips (ex CN56XX)</span>
<a name="l00371"></a>00371 <span class="comment"> *                 support multiple busses.</span>
<a name="l00372"></a>00372 <span class="comment"> * @param phy_id   The MII phy id</span>
<a name="l00373"></a>00373 <span class="comment"> * @param location Register location to read</span>
<a name="l00374"></a>00374 <span class="comment"> *</span>
<a name="l00375"></a>00375 <span class="comment"> * @return Result from the read or -1 on failure</span>
<a name="l00376"></a>00376 <span class="comment"> */</span>
<a name="l00377"></a><a class="code" href="cvmx-mdio_8h.html#a8ce184b30b868d11a6eb0b9aecdd86a3">00377</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-mdio_8h.html#a8ce184b30b868d11a6eb0b9aecdd86a3" title="Perform an MII read.">cvmx_mdio_read</a>(<span class="keywordtype">int</span> bus_id, <span class="keywordtype">int</span> phy_id, <span class="keywordtype">int</span> location)
<a name="l00378"></a>00378 {
<a name="l00379"></a>00379 <span class="preprocessor">#if defined(CVMX_BUILD_FOR_LINUX_KERNEL) &amp;&amp; defined(CONFIG_PHYLIB)</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>    <span class="keywordflow">return</span> -1;
<a name="l00381"></a>00381 <span class="preprocessor">#else</span>
<a name="l00382"></a>00382 <span class="preprocessor"></span>    <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00383"></a>00383     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00384"></a>00384     <a class="code" href="unioncvmx__smix__cmd.html" title="cvmx_smi::_cmd">cvmx_smix_cmd_t</a> smi_cmd;
<a name="l00385"></a>00385     <a class="code" href="unioncvmx__smix__rd__dat.html" title="cvmx_smi::_rd_dat">cvmx_smix_rd_dat_t</a> smi_rd;
<a name="l00386"></a>00386 
<a name="l00387"></a>00387     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ac9cb9829171d8f1310af6f25a747b1ea" title="Octeon MDIO block supports clause 45 transactions for 10 Gig support.">OCTEON_FEATURE_MDIO_CLAUSE_45</a>))
<a name="l00388"></a>00388         <a class="code" href="cvmx-mdio_8h.html#a3c287cfa0e8112134c4f321b290d28d1">__cvmx_mdio_set_clause22_mode</a>(bus_id);
<a name="l00389"></a>00389 
<a name="l00390"></a>00390     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a> = 0;
<a name="l00391"></a>00391     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a90d94deb4da1f59a3fa1a18fbd00a302">phy_op</a> = <a class="code" href="cvmx-mdio_8h.html#a50a5ef93ad94c89ac513e4a2f3f1fdde">MDIO_CLAUSE_22_READ</a>;
<a name="l00392"></a>00392     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a56902cf2fbe7f47bf3a9d488b14a1f7f">phy_adr</a> = phy_id;
<a name="l00393"></a>00393     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a27dab076b1dfb5fa433ca4bec2d6372d">reg_adr</a> = location;
<a name="l00394"></a>00394     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a6f2c08dbe7ceb9a5a70e40a71b4df5e3">CVMX_SMIX_CMD</a>(bus), smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a>);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     smi_rd = <a class="code" href="cvmx-mdio_8h.html#a6e26883a45fedb0bb40c85ef490edd26" title="Internal use function.">__cvmx_mdio_read_rd_dat</a>(bus_id);
<a name="l00397"></a>00397     <span class="keywordflow">if</span> (smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#ad95acb55e79951382376104741b0a31e">s</a>.<a class="code" href="structcvmx__smix__rd__dat_1_1cvmx__smix__rd__dat__s.html#aacd27ace8f7246f5fb31174ffb8a3956">val</a>)
<a name="l00398"></a>00398         <span class="keywordflow">return</span> smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#ad95acb55e79951382376104741b0a31e">s</a>.<a class="code" href="structcvmx__smix__rd__dat_1_1cvmx__smix__rd__dat__s.html#a8f41abb760b4710ad1755d4da3704ec7">dat</a>;
<a name="l00399"></a>00399     <span class="keywordflow">else</span>
<a name="l00400"></a>00400         <span class="keywordflow">return</span> -1;
<a name="l00401"></a>00401 <span class="preprocessor">#endif</span>
<a name="l00402"></a>00402 <span class="preprocessor"></span>}
<a name="l00403"></a>00403 <span class="comment"></span>
<a name="l00404"></a>00404 <span class="comment">/**</span>
<a name="l00405"></a>00405 <span class="comment"> * Perform an MII write. This function is used to write PHY</span>
<a name="l00406"></a>00406 <span class="comment"> * registers controlling auto negotiation.</span>
<a name="l00407"></a>00407 <span class="comment"> *</span>
<a name="l00408"></a>00408 <span class="comment"> * @param bus_id   MDIO bus number. Zero on most chips, but some chips (ex CN56XX)</span>
<a name="l00409"></a>00409 <span class="comment"> *                 support multiple busses.</span>
<a name="l00410"></a>00410 <span class="comment"> * @param phy_id   The MII phy id</span>
<a name="l00411"></a>00411 <span class="comment"> * @param location Register location to write</span>
<a name="l00412"></a>00412 <span class="comment"> * @param val      Value to write</span>
<a name="l00413"></a>00413 <span class="comment"> *</span>
<a name="l00414"></a>00414 <span class="comment"> * @return -1 on error</span>
<a name="l00415"></a>00415 <span class="comment"> *         0 on success</span>
<a name="l00416"></a>00416 <span class="comment"> */</span>
<a name="l00417"></a><a class="code" href="cvmx-mdio_8h.html#a891487487b350f4e68da180bac756ad6">00417</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-mdio_8h.html#a891487487b350f4e68da180bac756ad6" title="Perform an MII write.">cvmx_mdio_write</a>(<span class="keywordtype">int</span> bus_id, <span class="keywordtype">int</span> phy_id, <span class="keywordtype">int</span> location, <span class="keywordtype">int</span> val)
<a name="l00418"></a>00418 {
<a name="l00419"></a>00419 <span class="preprocessor">#if defined(CVMX_BUILD_FOR_LINUX_KERNEL) &amp;&amp; defined(CONFIG_PHYLIB)</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span>    <span class="keywordflow">return</span> -1;
<a name="l00421"></a>00421 <span class="preprocessor">#else</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span>    <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00423"></a>00423     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00424"></a>00424     <a class="code" href="unioncvmx__smix__cmd.html" title="cvmx_smi::_cmd">cvmx_smix_cmd_t</a> smi_cmd;
<a name="l00425"></a>00425     <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a> smi_wr;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ac9cb9829171d8f1310af6f25a747b1ea" title="Octeon MDIO block supports clause 45 transactions for 10 Gig support.">OCTEON_FEATURE_MDIO_CLAUSE_45</a>))
<a name="l00428"></a>00428         <a class="code" href="cvmx-mdio_8h.html#a3c287cfa0e8112134c4f321b290d28d1">__cvmx_mdio_set_clause22_mode</a>(bus_id);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a> = 0;
<a name="l00431"></a>00431     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#aaa9e000aeb63e56d866017501f642298">s</a>.<a class="code" href="structcvmx__smix__wr__dat_1_1cvmx__smix__wr__dat__s.html#a033d6f66a4ff56bb57f6988f7aea1854">dat</a> = val;
<a name="l00432"></a>00432     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus), smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a>);
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a> = 0;
<a name="l00435"></a>00435     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a90d94deb4da1f59a3fa1a18fbd00a302">phy_op</a> = <a class="code" href="cvmx-mdio_8h.html#a524d3978e9ecfeb088bae1e0192b042c">MDIO_CLAUSE_22_WRITE</a>;
<a name="l00436"></a>00436     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a56902cf2fbe7f47bf3a9d488b14a1f7f">phy_adr</a> = phy_id;
<a name="l00437"></a>00437     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a27dab076b1dfb5fa433ca4bec2d6372d">reg_adr</a> = location;
<a name="l00438"></a>00438     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a6f2c08dbe7ceb9a5a70e40a71b4df5e3">CVMX_SMIX_CMD</a>(bus), smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a>);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440     <span class="keywordflow">if</span> (<a class="code" href="cvmx-utils_8h.html#a008e6ab49838c73f90ee12a664718fd1" title="This macro spins on a field waiting for it to reach a value.">CVMX_WAIT_FOR_FIELD64_NODE</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus),
<a name="l00441"></a>00441                        <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a>, pending, ==, 0,
<a name="l00442"></a>00442                        <a class="code" href="cvmx-mdio_8h.html#a045671b6faecec42bea0c0c94331b420">CVMX_MDIO_TIMEOUT</a>))
<a name="l00443"></a>00443         <span class="keywordflow">return</span> -1;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445     <span class="keywordflow">return</span> 0;
<a name="l00446"></a>00446 <span class="preprocessor">#endif</span>
<a name="l00447"></a>00447 <span class="preprocessor"></span>}
<a name="l00448"></a>00448 
<a name="l00449"></a>00449 <span class="comment"></span>
<a name="l00450"></a>00450 <span class="comment">/**</span>
<a name="l00451"></a>00451 <span class="comment"> * Perform an IEEE 802.3 clause 45 MII read. This function is used to read PHY</span>
<a name="l00452"></a>00452 <span class="comment"> * registers controlling auto negotiation.</span>
<a name="l00453"></a>00453 <span class="comment"> *</span>
<a name="l00454"></a>00454 <span class="comment"> * @param bus_id   MDIO bus number. Zero on most chips, but some chips (ex CN56XX)</span>
<a name="l00455"></a>00455 <span class="comment"> *                 support multiple busses.</span>
<a name="l00456"></a>00456 <span class="comment"> * @param phy_id   The MII phy id</span>
<a name="l00457"></a>00457 <span class="comment"> * @param device   MDIO Managable Device (MMD) id</span>
<a name="l00458"></a>00458 <span class="comment"> * @param location Register location to read</span>
<a name="l00459"></a>00459 <span class="comment"> *</span>
<a name="l00460"></a>00460 <span class="comment"> * @return Result from the read or -1 on failure</span>
<a name="l00461"></a>00461 <span class="comment"> */</span>
<a name="l00462"></a>00462 
<a name="l00463"></a><a class="code" href="cvmx-mdio_8h.html#ac9d1b7de48efd3c078a0083b492f2f34">00463</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-mdio_8h.html#ac9d1b7de48efd3c078a0083b492f2f34" title="Perform an IEEE 802.3 clause 45 MII read.">cvmx_mdio_45_read</a>(<span class="keywordtype">int</span> bus_id, <span class="keywordtype">int</span> phy_id, <span class="keywordtype">int</span> device, <span class="keywordtype">int</span> location)
<a name="l00464"></a>00464 {
<a name="l00465"></a>00465 <span class="preprocessor">#if defined(CVMX_BUILD_FOR_LINUX_KERNEL) &amp;&amp; defined(CONFIG_PHYLIB)</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>    <span class="keywordflow">return</span> -1;
<a name="l00467"></a>00467 <span class="preprocessor">#else</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>    <a class="code" href="unioncvmx__smix__cmd.html" title="cvmx_smi::_cmd">cvmx_smix_cmd_t</a> smi_cmd;
<a name="l00469"></a>00469     <a class="code" href="unioncvmx__smix__rd__dat.html" title="cvmx_smi::_rd_dat">cvmx_smix_rd_dat_t</a> smi_rd;
<a name="l00470"></a>00470     <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a> smi_wr;
<a name="l00471"></a>00471     <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00472"></a>00472     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     <span class="keywordflow">if</span> (!<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ac9cb9829171d8f1310af6f25a747b1ea" title="Octeon MDIO block supports clause 45 transactions for 10 Gig support.">OCTEON_FEATURE_MDIO_CLAUSE_45</a>))
<a name="l00475"></a>00475         <span class="keywordflow">return</span> -1;
<a name="l00476"></a>00476 
<a name="l00477"></a>00477     <a class="code" href="cvmx-mdio_8h.html#a7c2461e15a8415bdb28fd69f499317de">__cvmx_mdio_set_clause45_mode</a>(bus_id);
<a name="l00478"></a>00478 
<a name="l00479"></a>00479     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a> = 0;
<a name="l00480"></a>00480     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#aaa9e000aeb63e56d866017501f642298">s</a>.<a class="code" href="structcvmx__smix__wr__dat_1_1cvmx__smix__wr__dat__s.html#a033d6f66a4ff56bb57f6988f7aea1854">dat</a> = location;
<a name="l00481"></a>00481     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus), smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a>);
<a name="l00482"></a>00482 
<a name="l00483"></a>00483     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a> = 0;
<a name="l00484"></a>00484     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a90d94deb4da1f59a3fa1a18fbd00a302">phy_op</a> = <a class="code" href="cvmx-mdio_8h.html#a8852fb9c4bc106700e0152b9dfd17e08">MDIO_CLAUSE_45_ADDRESS</a>;
<a name="l00485"></a>00485     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a56902cf2fbe7f47bf3a9d488b14a1f7f">phy_adr</a> = phy_id;
<a name="l00486"></a>00486     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a27dab076b1dfb5fa433ca4bec2d6372d">reg_adr</a> = device;
<a name="l00487"></a>00487     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a6f2c08dbe7ceb9a5a70e40a71b4df5e3">CVMX_SMIX_CMD</a>(bus), smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a>);
<a name="l00488"></a>00488 
<a name="l00489"></a>00489     <span class="keywordflow">if</span> (<a class="code" href="cvmx-utils_8h.html#a008e6ab49838c73f90ee12a664718fd1" title="This macro spins on a field waiting for it to reach a value.">CVMX_WAIT_FOR_FIELD64_NODE</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus),
<a name="l00490"></a>00490                        <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a>, pending, ==, 0,
<a name="l00491"></a>00491                        <a class="code" href="cvmx-mdio_8h.html#a045671b6faecec42bea0c0c94331b420">CVMX_MDIO_TIMEOUT</a>)) {
<a name="l00492"></a>00492         <a class="code" href="cvmx-utils_8h.html#a50112e4e118a749dcf244ccafcdc37ba">cvmx_dprintf</a>(<span class="stringliteral">&quot;cvmx_mdio_45_read: bus_id %d phy_id %2d device %2d register %2d   TIME OUT(address)\n&quot;</span>, bus_id, phy_id, device, location);
<a name="l00493"></a>00493         <span class="keywordflow">return</span> -1;
<a name="l00494"></a>00494     }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a> = 0;
<a name="l00497"></a>00497     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a90d94deb4da1f59a3fa1a18fbd00a302">phy_op</a> = <a class="code" href="cvmx-mdio_8h.html#a9497c932101606520e4433d87772fead">MDIO_CLAUSE_45_READ</a>;
<a name="l00498"></a>00498     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a56902cf2fbe7f47bf3a9d488b14a1f7f">phy_adr</a> = phy_id;
<a name="l00499"></a>00499     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a27dab076b1dfb5fa433ca4bec2d6372d">reg_adr</a> = device;
<a name="l00500"></a>00500     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a6f2c08dbe7ceb9a5a70e40a71b4df5e3">CVMX_SMIX_CMD</a>(bus), smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a>);
<a name="l00501"></a>00501 
<a name="l00502"></a>00502     smi_rd = <a class="code" href="cvmx-mdio_8h.html#a6e26883a45fedb0bb40c85ef490edd26" title="Internal use function.">__cvmx_mdio_read_rd_dat</a>(bus_id);
<a name="l00503"></a>00503     <span class="keywordflow">if</span> (smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#ad95acb55e79951382376104741b0a31e">s</a>.<a class="code" href="structcvmx__smix__rd__dat_1_1cvmx__smix__rd__dat__s.html#afc7d6d598490baf2fb99a0c277fa8a34">pending</a>) {
<a name="l00504"></a>00504         <a class="code" href="cvmx-utils_8h.html#a50112e4e118a749dcf244ccafcdc37ba">cvmx_dprintf</a>(<span class="stringliteral">&quot;cvmx_mdio_45_read: bus_id %d phy_id %2d device %2d register %2d   TIME OUT(data)\n&quot;</span>, bus_id, phy_id, device, location);
<a name="l00505"></a>00505         <span class="keywordflow">return</span> -1;
<a name="l00506"></a>00506     }
<a name="l00507"></a>00507 
<a name="l00508"></a>00508     <span class="keywordflow">if</span> (smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#ad95acb55e79951382376104741b0a31e">s</a>.<a class="code" href="structcvmx__smix__rd__dat_1_1cvmx__smix__rd__dat__s.html#aacd27ace8f7246f5fb31174ffb8a3956">val</a>)
<a name="l00509"></a>00509         <span class="keywordflow">return</span> smi_rd.<a class="code" href="unioncvmx__smix__rd__dat.html#ad95acb55e79951382376104741b0a31e">s</a>.<a class="code" href="structcvmx__smix__rd__dat_1_1cvmx__smix__rd__dat__s.html#a8f41abb760b4710ad1755d4da3704ec7">dat</a>;
<a name="l00510"></a>00510     <span class="keywordflow">else</span> {
<a name="l00511"></a>00511         <a class="code" href="cvmx-utils_8h.html#a50112e4e118a749dcf244ccafcdc37ba">cvmx_dprintf</a>(<span class="stringliteral">&quot;cvmx_mdio_45_read: bus_id %d phy_id %2d device %2d register %2d   INVALID READ\n&quot;</span>, bus_id, phy_id, device, location);
<a name="l00512"></a>00512         <span class="keywordflow">return</span> -1;
<a name="l00513"></a>00513     }
<a name="l00514"></a>00514 <span class="preprocessor">#endif</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span>}
<a name="l00516"></a>00516 <span class="comment"></span>
<a name="l00517"></a>00517 <span class="comment">/**</span>
<a name="l00518"></a>00518 <span class="comment"> * Perform an IEEE 802.3 clause 45 MII write. This function is used to write PHY</span>
<a name="l00519"></a>00519 <span class="comment"> * registers controlling auto negotiation.</span>
<a name="l00520"></a>00520 <span class="comment"> *</span>
<a name="l00521"></a>00521 <span class="comment"> * @param bus_id   MDIO bus number. Zero on most chips, but some chips (ex CN56XX)</span>
<a name="l00522"></a>00522 <span class="comment"> *                 support multiple busses.</span>
<a name="l00523"></a>00523 <span class="comment"> * @param phy_id   The MII phy id</span>
<a name="l00524"></a>00524 <span class="comment"> * @param device   MDIO Managable Device (MMD) id</span>
<a name="l00525"></a>00525 <span class="comment"> * @param location Register location to write</span>
<a name="l00526"></a>00526 <span class="comment"> * @param val      Value to write</span>
<a name="l00527"></a>00527 <span class="comment"> *</span>
<a name="l00528"></a>00528 <span class="comment"> * @return -1 on error</span>
<a name="l00529"></a>00529 <span class="comment"> *         0 on success</span>
<a name="l00530"></a>00530 <span class="comment"> */</span>
<a name="l00531"></a><a class="code" href="cvmx-mdio_8h.html#ad2cf8bd5107bb89fb39b1a53dd3d5404">00531</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-mdio_8h.html#ad2cf8bd5107bb89fb39b1a53dd3d5404" title="Perform an IEEE 802.3 clause 45 MII write.">cvmx_mdio_45_write</a>(<span class="keywordtype">int</span> bus_id, <span class="keywordtype">int</span> phy_id, <span class="keywordtype">int</span> device, <span class="keywordtype">int</span> location, <span class="keywordtype">int</span> val)
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533 <span class="preprocessor">#if defined(CVMX_BUILD_FOR_LINUX_KERNEL) &amp;&amp; defined(CONFIG_PHYLIB)</span>
<a name="l00534"></a>00534 <span class="preprocessor"></span>    <span class="keywordflow">return</span> -1;
<a name="l00535"></a>00535 <span class="preprocessor">#else</span>
<a name="l00536"></a>00536 <span class="preprocessor"></span>    <a class="code" href="unioncvmx__smix__cmd.html" title="cvmx_smi::_cmd">cvmx_smix_cmd_t</a> smi_cmd;
<a name="l00537"></a>00537     <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a> smi_wr;
<a name="l00538"></a>00538     <span class="keywordtype">int</span> node = <a class="code" href="cvmx-mdio_8h.html#af65eada3c68b419d989ab0b511cc1bbf">cvmx_mdio_bus_id_to_node</a>(bus_id);
<a name="l00539"></a>00539     <span class="keywordtype">int</span> bus = <a class="code" href="cvmx-mdio_8h.html#abb97a3cfc7c3258c1a6f0f916ebaae37">cvmx_mdio_bus_id_to_bus</a>(bus_id);
<a name="l00540"></a>00540 
<a name="l00541"></a>00541     <span class="keywordflow">if</span> (!<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ac9cb9829171d8f1310af6f25a747b1ea" title="Octeon MDIO block supports clause 45 transactions for 10 Gig support.">OCTEON_FEATURE_MDIO_CLAUSE_45</a>))
<a name="l00542"></a>00542         <span class="keywordflow">return</span> -1;
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     <a class="code" href="cvmx-mdio_8h.html#a7c2461e15a8415bdb28fd69f499317de">__cvmx_mdio_set_clause45_mode</a>(bus_id);
<a name="l00545"></a>00545 
<a name="l00546"></a>00546     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a> = 0;
<a name="l00547"></a>00547     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#aaa9e000aeb63e56d866017501f642298">s</a>.<a class="code" href="structcvmx__smix__wr__dat_1_1cvmx__smix__wr__dat__s.html#a033d6f66a4ff56bb57f6988f7aea1854">dat</a> = location;
<a name="l00548"></a>00548     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus), smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a>);
<a name="l00549"></a>00549 
<a name="l00550"></a>00550     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a> = 0;
<a name="l00551"></a>00551     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a90d94deb4da1f59a3fa1a18fbd00a302">phy_op</a> = <a class="code" href="cvmx-mdio_8h.html#a8852fb9c4bc106700e0152b9dfd17e08">MDIO_CLAUSE_45_ADDRESS</a>;
<a name="l00552"></a>00552     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a56902cf2fbe7f47bf3a9d488b14a1f7f">phy_adr</a> = phy_id;
<a name="l00553"></a>00553     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a27dab076b1dfb5fa433ca4bec2d6372d">reg_adr</a> = device;
<a name="l00554"></a>00554     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a6f2c08dbe7ceb9a5a70e40a71b4df5e3">CVMX_SMIX_CMD</a>(bus), smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a>);
<a name="l00555"></a>00555 
<a name="l00556"></a>00556     <span class="keywordflow">if</span> (<a class="code" href="cvmx-utils_8h.html#a008e6ab49838c73f90ee12a664718fd1" title="This macro spins on a field waiting for it to reach a value.">CVMX_WAIT_FOR_FIELD64_NODE</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus),
<a name="l00557"></a>00557                        <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a>, pending, ==, 0,
<a name="l00558"></a>00558                        <a class="code" href="cvmx-mdio_8h.html#a045671b6faecec42bea0c0c94331b420">CVMX_MDIO_TIMEOUT</a>))
<a name="l00559"></a>00559         <span class="keywordflow">return</span> -1;
<a name="l00560"></a>00560 
<a name="l00561"></a>00561     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a> = 0;
<a name="l00562"></a>00562     smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#aaa9e000aeb63e56d866017501f642298">s</a>.<a class="code" href="structcvmx__smix__wr__dat_1_1cvmx__smix__wr__dat__s.html#a033d6f66a4ff56bb57f6988f7aea1854">dat</a> = val;
<a name="l00563"></a>00563     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus), smi_wr.<a class="code" href="unioncvmx__smix__wr__dat.html#a79e0dcfbd078c43a5c702d0ba45271e5">u64</a>);
<a name="l00564"></a>00564 
<a name="l00565"></a>00565     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a> = 0;
<a name="l00566"></a>00566     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a90d94deb4da1f59a3fa1a18fbd00a302">phy_op</a> = <a class="code" href="cvmx-mdio_8h.html#adaf430463dd43bf8ebf4d6982eae1654">MDIO_CLAUSE_45_WRITE</a>;
<a name="l00567"></a>00567     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a56902cf2fbe7f47bf3a9d488b14a1f7f">phy_adr</a> = phy_id;
<a name="l00568"></a>00568     smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a1e9a7929abe0dce3f56a9415ff93eec0">s</a>.<a class="code" href="structcvmx__smix__cmd_1_1cvmx__smix__cmd__s.html#a27dab076b1dfb5fa433ca4bec2d6372d">reg_adr</a> = device;
<a name="l00569"></a>00569     <a class="code" href="cvmx-access_8h.html#a16bdc1b4b931bdd49740231c004c7ef4">cvmx_write_csr_node</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a6f2c08dbe7ceb9a5a70e40a71b4df5e3">CVMX_SMIX_CMD</a>(bus), smi_cmd.<a class="code" href="unioncvmx__smix__cmd.html#a904bd0c9406a524cd1b889eab090ba10">u64</a>);
<a name="l00570"></a>00570 
<a name="l00571"></a>00571     <span class="keywordflow">if</span> (<a class="code" href="cvmx-utils_8h.html#a008e6ab49838c73f90ee12a664718fd1" title="This macro spins on a field waiting for it to reach a value.">CVMX_WAIT_FOR_FIELD64_NODE</a>(node, <a class="code" href="cvmx-smix-defs_8h.html#a9f601d335768d942bf70c14ff29b4130">CVMX_SMIX_WR_DAT</a>(bus),
<a name="l00572"></a>00572                        <a class="code" href="unioncvmx__smix__wr__dat.html" title="cvmx_smi::_wr_dat">cvmx_smix_wr_dat_t</a>, pending, ==, 0,
<a name="l00573"></a>00573                        <a class="code" href="cvmx-mdio_8h.html#a045671b6faecec42bea0c0c94331b420">CVMX_MDIO_TIMEOUT</a>))
<a name="l00574"></a>00574         <span class="keywordflow">return</span> -1;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576     <span class="keywordflow">return</span> 0;
<a name="l00577"></a>00577 <span class="preprocessor">#endif</span>
<a name="l00578"></a>00578 <span class="preprocessor"></span>}
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 <span class="preprocessor">#ifdef  __cplusplus</span>
<a name="l00581"></a>00581 <span class="preprocessor"></span><span class="comment">/* *INDENT-OFF* */</span>
<a name="l00582"></a>00582 }
<a name="l00583"></a>00583 <span class="comment">/* *INDENT-ON* */</span>
<a name="l00584"></a>00584 <span class="preprocessor">#endif</span>
<a name="l00585"></a>00585 <span class="preprocessor"></span>
<a name="l00586"></a>00586 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
