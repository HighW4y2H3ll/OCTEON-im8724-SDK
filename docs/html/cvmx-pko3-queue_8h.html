<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-pko3-queue.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-pko3-queue.h File Reference</h1><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-pko3-queue_8h__dep__incl.png" border="0" usemap="#cvmx-pko3-queue_8hdep_map" alt=""/></div>
<map name="cvmx-pko3-queue_8hdep_map" id="cvmx-pko3-queue_8hdep">
<area shape="rect" id="node3" href="cvmx-pko3-queue_8c.html" title="cvmx&#45;pko3&#45;queue.c" alt="" coords="255,160,409,189"/><area shape="rect" id="node5" href="cvmx-pko3_8h.html" title="cvmx&#45;pko3.h" alt="" coords="772,83,879,112"/><area shape="rect" id="node7" href="cvmx-app-init_8c.html" title="Main entry point for all simple executive based programs." alt="" coords="433,160,561,189"/><area shape="rect" id="node9" href="cvmx-helper-pko3_8c.html" title="cvmx&#45;helper&#45;pko3.c" alt="" coords="585,160,740,189"/><area shape="rect" id="node11" href="cvmx-helper_8c.html" title="Helper functions for common, but complicated tasks." alt="" coords="384,315,501,344"/><area shape="rect" id="node13" href="cvmx-hwpko_8h.html" title="Interface to the hardware Packet Output unit." alt="" coords="815,160,932,189"/><area shape="rect" id="node38" href="cvmx-pko3-compat_8c.html" title="cvmx&#45;pko3&#45;compat.c" alt="" coords="1455,315,1620,344"/><area shape="rect" id="node40" href="cvmx-pko3_8c.html" title="cvmx&#45;pko3.c" alt="" coords="1411,237,1517,267"/><area shape="rect" id="node44" href="cvmx-lap_8c.html" title="Support library for the LAP." alt="" coords="1592,160,1688,189"/><area shape="rect" id="node48" href="cvmx-pko3-resources_8c.html" title="PKO resources." alt="" coords="1712,160,1891,189"/><area shape="rect" id="node15" href="cvmx-helper-errata_8c.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="24,237,189,267"/><area shape="rect" id="node17" href="cvmx-helper-ilk_8c.html" title="Functions for ILK initialization, configuration, and monitoring." alt="" coords="213,237,349,267"/><area shape="rect" id="node19" href="cvmx-helper-npi_8c.html" title="Functions for NPI initialization, configuration, and monitoring." alt="" coords="373,237,515,267"/><area shape="rect" id="node21" href="cvmx-helper-pko_8c.html" title="Helper Functions for the PKO." alt="" coords="539,237,685,267"/><area shape="rect" id="node23" href="cvmx-helper-rgmii_8c.html" title="Functions for RGMII/GMII/MII initialization, configuration, and monitoring." alt="" coords="709,237,864,267"/><area shape="rect" id="node25" href="cvmx-helper-util_8c.html" title="Small helper utilities." alt="" coords="888,237,1032,267"/><area shape="rect" id="node27" href="cvmx-ilk_8c.html" title="Support library for the ILK." alt="" coords="1056,237,1147,267"/><area shape="rect" id="node29" href="cvmx-pko_8h.html" title="cvmx&#45;pko.h" alt="" coords="1171,237,1269,267"/><area shape="rect" id="node42" href="cvmx-spi_8c.html" title="Support library for the SPI." alt="" coords="1293,237,1387,267"/><area shape="rect" id="node31" href="cvmx-config-init_8c.html" title="cvmx&#45;config&#45;init.c" alt="" coords="980,315,1124,344"/><area shape="rect" id="node33" href="cvmx-helper-fpa_8c.html" title="Helper functions for FPA setup." alt="" coords="1148,315,1292,344"/><area shape="rect" id="node36" href="cvmx-pko_8c.html" title="Support library for the hardware Packet Output unit." alt="" coords="1316,315,1415,344"/></map>
</div>

<p><a href="cvmx-pko3-queue_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a4ed01fc9ddc1b0f930de4048e1ae7088">CVMX_SHOFT_MANT_BITS</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Macros to deal with short floating point numbers, where unsigned exponent, and an unsigned normalized mantissa are represented each with a defined field width.  <a href="#a4ed01fc9ddc1b0f930de4048e1ae7088"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#abe61c8dfa71afefa0399ac9185841240">CVMX_SHOFT_EXP_BITS</a>&nbsp;&nbsp;&nbsp;4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a84f61eb42b1dbf720f2450bdd9bbcc46">CVMX_SHOFT_TO_U64</a>(m, e)&nbsp;&nbsp;&nbsp;((((1ull&lt;&lt;CVMX_SHOFT_MANT_BITS) | (m)) &lt;&lt; (e))&gt;&gt;CVMX_SHOFT_MANT_BITS)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert short-float to an unsigned integer Note that it will lose precision.  <a href="#a84f61eb42b1dbf720f2450bdd9bbcc46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#aa7bda407a127a552c5a7b06a0e27fe6f">CVMX_SHOFT_FROM_U64</a>(ui, m, e)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert to short-float from an unsigned integer.  <a href="#aa7bda407a127a552c5a7b06a0e27fe6f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#ae91600dabf45e5dfb7273faeadfdd220">CVMX_SHOFT_MAX</a>()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a0dc1259bad1e623c512cfa3b9e433838">CVMX_SHOFT_MIN</a>()&nbsp;&nbsp;&nbsp;CVMX_SHOFT_TO_U64(0, 0)</td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55">red_action_t</a> { <br/>
&nbsp;&nbsp;<a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55ae88546b97338d8b84aa05c6dc9fc2656">CVMX_PKO3_SHAPE_RED_STALL</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55a25e187614f0f14b7ff977ac32362bb0d">CVMX_PKO3_SHAPE_RED_DISCARD</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55a8d12e9fc536cc02bc0ddb97455110d80">CVMX_PKO3_SHAPE_RED_PASS</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#ae77e58e8aabc86f0e33270efb0cfa9d2">__cvmx_pko3_dq_table_setup</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#ae77e58e8aabc86f0e33270efb0cfa9d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a1c430383440ab3f6bd798f399e5af123">cvmx_pko3_get_queue_base</a> (int ipd_port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a81bc236dec6ebffbe04b57a1dbc8c075">cvmx_pko3_get_queue_num</a> (int ipd_port)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#ab2a5692b2ef76d2b990c1231e1f71cfe">cvmx_pko3_get_port_queue</a> (int xiface, int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get L1/Port Queue number assigned to interface port.  <a href="#ab2a5692b2ef76d2b990c1231e1f71cfe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a2ad3e02a8201e1c129250b541c037d70">cvmx_pko3_sq_config_children</a> (unsigned int node, unsigned parent_level, unsigned parent_queue, unsigned child_base, unsigned child_count, int stat_prio_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a1f7a8ccb4defb01d36fb0b4e59772f68">__cvmx_pko3_ipd_dq_register</a> (int xiface, int index, unsigned dq_base, unsigned dq_count)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a8dbde8ab436b6dd2e3fc8bcb47562927">__cvmx_pko3_ipd_dq_unregister</a> (int xiface, int index)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Internal use function.  <a href="#a8dbde8ab436b6dd2e3fc8bcb47562927"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#ae12e37ff79c5867f74fd24197f1b2e50">cvmx_pko3_map_channel</a> (unsigned node, unsigned pq_num, unsigned l2_l3_q_num, uint16_t channel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a6b8a574368f2c3a96805baf7bd8e23b6">cvmx_pko3_pq_config</a> (unsigned node, unsigned mac_num, unsigned pq_num)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#ae1f36e4d87e482786d254cde1d9360a9">cvmx_pko3_port_cir_set</a> (unsigned node, unsigned pq_num, unsigned long rate_kbips, unsigned burst_bytes, int adj_bytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure per-port CIR rate limit parameters.  <a href="#ae1f36e4d87e482786d254cde1d9360a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a96fe3d2696bf8a8e90e10bb6aaa97835">cvmx_pko3_dq_cir_set</a> (unsigned node, unsigned pq_num, unsigned long rate_kbips, unsigned burst_bytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure per-queue CIR rate limit parameters.  <a href="#a96fe3d2696bf8a8e90e10bb6aaa97835"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#abeacd725e11d5147df6c1c8d5a15fb77">cvmx_pko3_dq_pir_set</a> (unsigned node, unsigned pq_num, unsigned long rate_kbips, unsigned burst_bytes)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure per-queue PIR rate limit parameters.  <a href="#abeacd725e11d5147df6c1c8d5a15fb77"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-pko3-queue_8h.html#a37224193c2ecceb4038ef4834fb70d63">cvmx_pko3_dq_red</a> (unsigned node, unsigned dq_num, <a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55">red_action_t</a> red_act, int8_t len_adjust)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Configure per-queue treatment of excess traffic.  <a href="#a37224193c2ecceb4038ef4834fb70d63"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd>0 </dd></dl>
<hr/>
 <hr/><h2>Define Documentation</h2>
<a class="anchor" id="abe61c8dfa71afefa0399ac9185841240"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::CVMX_SHOFT_EXP_BITS" ref="abe61c8dfa71afefa0399ac9185841240" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_SHOFT_EXP_BITS&nbsp;&nbsp;&nbsp;4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa7bda407a127a552c5a7b06a0e27fe6f"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::CVMX_SHOFT_FROM_U64" ref="aa7bda407a127a552c5a7b06a0e27fe6f" args="(ui, m, e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_SHOFT_FROM_U64</td>
          <td>(</td>
          <td class="paramtype">ui, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">m, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">e&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span> { \
        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> u; <span class="keywordtype">unsigned</span> k;       \
        k = (1ull &lt;&lt; (<a class="code" href="cvmx-pko3-queue_8h.html#a4ed01fc9ddc1b0f930de4048e1ae7088" title="Macros to deal with short floating point numbers, where unsigned exponent, and an...">CVMX_SHOFT_MANT_BITS</a>+1)) -1;      \
        (e) = 0; u = (ui) &lt;&lt; <a class="code" href="cvmx-pko3-queue_8h.html#a4ed01fc9ddc1b0f930de4048e1ae7088" title="Macros to deal with short floating point numbers, where unsigned exponent, and an...">CVMX_SHOFT_MANT_BITS</a>;  \
        <span class="keywordflow">while</span>((u) &gt; k) {                \
            u &gt;&gt;=1; (e)++;              \
        }                       \
        (m) = u &amp; (k&gt;&gt;1);               \
    } <span class="keywordflow">while</span>(0);
</pre></div>
<p>Convert to short-float from an unsigned integer. </p>

</div>
</div>
<a class="anchor" id="a4ed01fc9ddc1b0f930de4048e1ae7088"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::CVMX_SHOFT_MANT_BITS" ref="a4ed01fc9ddc1b0f930de4048e1ae7088" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_SHOFT_MANT_BITS&nbsp;&nbsp;&nbsp;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Macros to deal with short floating point numbers, where unsigned exponent, and an unsigned normalized mantissa are represented each with a defined field width. </p>

</div>
</div>
<a class="anchor" id="ae91600dabf45e5dfb7273faeadfdd220"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::CVMX_SHOFT_MAX" ref="ae91600dabf45e5dfb7273faeadfdd220" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_SHOFT_MAX</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><a class="code" href="cvmx-pko3-queue_8h.html#a84f61eb42b1dbf720f2450bdd9bbcc46" title="Convert short-float to an unsigned integer Note that it will lose precision.">CVMX_SHOFT_TO_U64</a>((1&lt;&lt;<a class="code" href="cvmx-pko3-queue_8h.html#a4ed01fc9ddc1b0f930de4048e1ae7088" title="Macros to deal with short floating point numbers, where unsigned exponent, and an...">CVMX_SHOFT_MANT_BITS</a>)-1, \
                        (1&lt;&lt;<a class="code" href="cvmx-pko3-queue_8h.html#abe61c8dfa71afefa0399ac9185841240">CVMX_SHOFT_EXP_BITS</a>)-1)
</pre></div>
</div>
</div>
<a class="anchor" id="a0dc1259bad1e623c512cfa3b9e433838"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::CVMX_SHOFT_MIN" ref="a0dc1259bad1e623c512cfa3b9e433838" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_SHOFT_MIN</td>
          <td>(</td>
&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;CVMX_SHOFT_TO_U64(0, 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a84f61eb42b1dbf720f2450bdd9bbcc46"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::CVMX_SHOFT_TO_U64" ref="a84f61eb42b1dbf720f2450bdd9bbcc46" args="(m, e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CVMX_SHOFT_TO_U64</td>
          <td>(</td>
          <td class="paramtype">m, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">e&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((((1ull&lt;&lt;CVMX_SHOFT_MANT_BITS) | (m)) &lt;&lt; (e))&gt;&gt;CVMX_SHOFT_MANT_BITS)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Convert short-float to an unsigned integer Note that it will lose precision. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a76c5d0c0aa2b484057848a5f63d71e55"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::red_action_t" ref="a76c5d0c0aa2b484057848a5f63d71e55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55">red_action_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a76c5d0c0aa2b484057848a5f63d71e55ae88546b97338d8b84aa05c6dc9fc2656"></a><!-- doxytag: member="CVMX_PKO3_SHAPE_RED_STALL" ref="a76c5d0c0aa2b484057848a5f63d71e55ae88546b97338d8b84aa05c6dc9fc2656" args="" -->CVMX_PKO3_SHAPE_RED_STALL</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a76c5d0c0aa2b484057848a5f63d71e55a25e187614f0f14b7ff977ac32362bb0d"></a><!-- doxytag: member="CVMX_PKO3_SHAPE_RED_DISCARD" ref="a76c5d0c0aa2b484057848a5f63d71e55a25e187614f0f14b7ff977ac32362bb0d" args="" -->CVMX_PKO3_SHAPE_RED_DISCARD</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a76c5d0c0aa2b484057848a5f63d71e55a8d12e9fc536cc02bc0ddb97455110d80"></a><!-- doxytag: member="CVMX_PKO3_SHAPE_RED_PASS" ref="a76c5d0c0aa2b484057848a5f63d71e55a8d12e9fc536cc02bc0ddb97455110d80" args="" -->CVMX_PKO3_SHAPE_RED_PASS</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae77e58e8aabc86f0e33270efb0cfa9d2"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::__cvmx_pko3_dq_table_setup" ref="ae77e58e8aabc86f0e33270efb0cfa9d2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_pko3_dq_table_setup </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
</p>
<p>Find or allocate global port/dq map table which is a named table, contains entries for all possible OCI nodes.</p>
<p>The table global pointer is stored in core-local variable so that every core will call this function once, on first use. </p>

</div>
</div>
<a class="anchor" id="a1f7a8ccb4defb01d36fb0b4e59772f68"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::__cvmx_pko3_ipd_dq_register" ref="a1f7a8ccb4defb01d36fb0b4e59772f68" args="(int xiface, int index, unsigned dq_base, unsigned dq_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_pko3_ipd_dq_register </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dq_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dq_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8dbde8ab436b6dd2e3fc8bcb47562927"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::__cvmx_pko3_ipd_dq_unregister" ref="a8dbde8ab436b6dd2e3fc8bcb47562927" args="(int xiface, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __cvmx_pko3_ipd_dq_unregister </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Internal use function. </p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
</p>
<p>Unregister DQs associated with CHAN_E (IPD port)</p>
<p><b>This function's parameters and processing may change in future SDKs.</b><br/>
<br/>
</p>
<p>Unregister DQs associated with CHAN_E (IPD port)</p>
<p>NOTE: This function would be cleaner if it had a single ipd_port argument </p>

</div>
</div>
<a class="anchor" id="a96fe3d2696bf8a8e90e10bb6aaa97835"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_dq_cir_set" ref="a96fe3d2696bf8a8e90e10bb6aaa97835" args="(unsigned node, unsigned pq_num, unsigned long rate_kbips, unsigned burst_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_dq_cir_set </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rate_kbips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>burst_bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure per-queue CIR rate limit parameters. </p>
<p>This function configures rate limit at the <a class="el" href="structdescriptor.html">descriptor</a> queue level.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The OCI node where the target port is located </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dq_num</em>&nbsp;</td><td>The <a class="el" href="structdescriptor.html">descriptor</a> queue number for this setting </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rate_kbips</em>&nbsp;</td><td>The desired throughput in kilo-bits-per-second </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>burst_bytes</em>&nbsp;</td><td>The size of a burst in bytes, at least MTU</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns zero if both settings applied within allowed tolerance, otherwise the error is returned in parts-per-million. 'rate_bps error is a negative number, otherwise 'birst_rate' error is returned as a positive integer. </dd></dl>

</div>
</div>
<a class="anchor" id="abeacd725e11d5147df6c1c8d5a15fb77"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_dq_pir_set" ref="abeacd725e11d5147df6c1c8d5a15fb77" args="(unsigned node, unsigned pq_num, unsigned long rate_kbips, unsigned burst_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_dq_pir_set </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rate_kbips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>burst_bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure per-queue PIR rate limit parameters. </p>
<p>This function configures rate limit at the <a class="el" href="structdescriptor.html">descriptor</a> queue level.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The OCI node where the target port is located </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dq_num</em>&nbsp;</td><td>The <a class="el" href="structdescriptor.html">descriptor</a> queue number for this setting </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rate_kbips</em>&nbsp;</td><td>The desired throughput in kilo-bits-per-second </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>burst_bytes</em>&nbsp;</td><td>The size of a burst in bytes, at least MTU</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns zero if both settings applied within allowed tolerance, otherwise the error is returned in parts-per-million. 'rate_bps error is a negative number, otherwise 'birst_rate' error is returned as a positive integer. </dd></dl>

</div>
</div>
<a class="anchor" id="a37224193c2ecceb4038ef4834fb70d63"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_dq_red" ref="a37224193c2ecceb4038ef4834fb70d63" args="(unsigned node, unsigned dq_num, red_action_t red_act, int8_t len_adjust)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_pko3_dq_red </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>dq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-pko3-queue_8h.html#a76c5d0c0aa2b484057848a5f63d71e55">red_action_t</a>&nbsp;</td>
          <td class="paramname"> <em>red_act</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&nbsp;</td>
          <td class="paramname"> <em>len_adjust</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure per-queue treatment of excess traffic. </p>
<p>The default and most sensible behavior is to stall the packets colored Red (i.e. exceeding the PIR rate in full 3-color mode). There is also the option to discard excess traffic, which is the desired action for some applications that do not rely on back-pressure flow control. The shaper may be programmed to pass the RED packets onwards, which may be useful it the color is translated to a change in packet priority on egress.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The OCI node where the target port is located </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dq_num</em>&nbsp;</td><td>The <a class="el" href="structdescriptor.html">descriptor</a> queue number for this setting </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>red_act</em>&nbsp;</td><td>The action required for all packets in excess of PIR </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len_adjust</em>&nbsp;</td><td>A 2's complement 8 bit value to add/subtract from packet length for the purpose of shaping calculations, e.g. a value of -14 will subtract the length of the Ethernet header and hence only account IP packet size.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>N/A </dd></dl>

</div>
</div>
<a class="anchor" id="ab2a5692b2ef76d2b990c1231e1f71cfe"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_get_port_queue" ref="ab2a5692b2ef76d2b990c1231e1f71cfe" args="(int xiface, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_get_port_queue </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>xiface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get L1/Port Queue number assigned to interface port. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xiface</em>&nbsp;</td><td>is interface number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>is port index. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1c430383440ab3f6bd798f399e5af123"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_get_queue_base" ref="a1c430383440ab3f6bd798f399e5af123" args="(int ipd_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_get_queue_base </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ipd_port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a81bc236dec6ebffbe04b57a1dbc8c075"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_get_queue_num" ref="a81bc236dec6ebffbe04b57a1dbc8c075" args="(int ipd_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_get_queue_num </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ipd_port</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae12e37ff79c5867f74fd24197f1b2e50"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_map_channel" ref="ae12e37ff79c5867f74fd24197f1b2e50" args="(unsigned node, unsigned pq_num, unsigned l2_l3_q_num, uint16_t channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_pko3_map_channel </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>pq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>l2_l3_q_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>channel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae1f36e4d87e482786d254cde1d9360a9"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_port_cir_set" ref="ae1f36e4d87e482786d254cde1d9360a9" args="(unsigned node, unsigned pq_num, unsigned long rate_kbips, unsigned burst_bytes, int adj_bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_port_cir_set </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>pq_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long&nbsp;</td>
          <td class="paramname"> <em>rate_kbips</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>burst_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>adj_bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure per-port CIR rate limit parameters. </p>
<p>This function configures rate limit at the L1/PQ level, i.e. for an entire MAC or physical port.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>node</em>&nbsp;</td><td>The OCI node where the target port is located </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pq_num</em>&nbsp;</td><td>The L1/PQ queue number for this setting </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rate_kbips</em>&nbsp;</td><td>The desired throughput in kilo-bits-per-second </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>burst_bytes</em>&nbsp;</td><td>The size of a burst in bytes, at least MTU</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns zero if both settings applied within allowed tolerance, otherwise the error is returned in parts-per-million. 'rate_bps error is e negative number, otherwise 'birst_rate' error is returned as a positive integer. </dd></dl>

</div>
</div>
<a class="anchor" id="a6b8a574368f2c3a96805baf7bd8e23b6"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_pq_config" ref="a6b8a574368f2c3a96805baf7bd8e23b6" args="(unsigned node, unsigned mac_num, unsigned pq_num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_pq_config </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>mac_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>pq_num</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ad3e02a8201e1c129250b541c037d70"></a><!-- doxytag: member="cvmx&#45;pko3&#45;queue.h::cvmx_pko3_sq_config_children" ref="a2ad3e02a8201e1c129250b541c037d70" args="(unsigned int node, unsigned parent_level, unsigned parent_queue, unsigned child_base, unsigned child_count, int stat_prio_count)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_pko3_sq_config_children </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>parent_level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>parent_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>child_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>child_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>stat_prio_count</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
