<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-spi.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-spi.h File Reference</h1>
<p>This file contains defines for the SPI interface.  
<a href="#_details">More...</a></p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-spi_8h__dep__incl.png" border="0" usemap="#cvmx-spi_8hdep_map" alt=""/></div>
<map name="cvmx-spi_8hdep_map" id="cvmx-spi_8hdep">
<area shape="rect" id="node3" href="cvmx-helper-errata_8c.html" title="Fixes and workaround for Octeon chip errata." alt="" coords="5,83,171,112"/><area shape="rect" id="node5" href="cvmx-helper-spi_8c.html" title="Functions for SPI initialization, configuration, and monitoring." alt="" coords="195,83,336,112"/><area shape="rect" id="node7" href="cvmx-helper-util_8c.html" title="Small helper utilities." alt="" coords="360,83,504,112"/><area shape="rect" id="node9" href="cvmx-helper_8c.html" title="Helper functions for common, but complicated tasks." alt="" coords="528,83,645,112"/><area shape="rect" id="node11" href="cvmx-spi_8c.html" title="Support library for the SPI." alt="" coords="669,83,763,112"/><area shape="rect" id="node13" href="cvmx-spi4000_8c.html" title="Support library for the SPI4000 card." alt="" coords="787,83,912,112"/></map>
</div>

<p><a href="cvmx-spi_8h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcvmx__spi__callbacks__t.html">cvmx_spi_callbacks_t</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callbacks structure to customize SPI4 initialization sequence.  <a href="structcvmx__spi__callbacks__t.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> { <br/>
&nbsp;&nbsp;<a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3caa725ce9acd6425a709f7c0c8ae24f2af8">CVMX_SPI_MODE_UNKNOWN</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3caacdae6a34c367ba15a696e3346dcb5506">CVMX_SPI_MODE_TX_HALFPLEX</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3caa0b8a234e2a7396598bd250e50cfa3ab2">CVMX_SPI_MODE_RX_HALFPLEX</a> =  2, 
<br/>
&nbsp;&nbsp;<a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3caa980f6968f51657a478751d8f3074a8ec">CVMX_SPI_MODE_DUPLEX</a> =  3
<br/>
 }</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a0b2a7521180c3dda23ca3b5691e6b3b2">cvmx_spi_is_spi_interface</a> (int interface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return true if the supplied interface is configured for SPI.  <a href="#a0b2a7521180c3dda23ca3b5691e6b3b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a707be6d1afe85158db5d545f58f37e46">cvmx_spi_start_interface</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode, int timeout, int num_ports)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize and start the SPI interface.  <a href="#a707be6d1afe85158db5d545f58f37e46"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a0e31ef09c3897ab6343286d27cbf9ec2">cvmx_spi_restart_interface</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode, int timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This routine restarts the SPI interface after it has lost synchronization with its corespondant system.  <a href="#a0e31ef09c3897ab6343286d27cbf9ec2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#acaf3b62c5ecfd3d2120acc7c29d41aa9">cvmx_spi4000_is_present</a> (int interface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return non-zero if the SPI interface has a SPI4000 attached.  <a href="#acaf3b62c5ecfd3d2120acc7c29d41aa9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#afc943ee68acf7f7479f1d75ff2924818">cvmx_spi4000_initialize</a> (int interface)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize the SPI4000 for use.  <a href="#afc943ee68acf7f7479f1d75ff2924818"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="unioncvmx__gmxx__rxx__rx__inbnd.html">cvmx_gmxx_rxx_rx_inbnd_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a9e53ec79e69dfd6cb999f2577a84c4e9">cvmx_spi4000_check_speed</a> (int interface, int port)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Poll all the SPI4000 port and check its speed.  <a href="#a9e53ec79e69dfd6cb999f2577a84c4e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a34287897ae0869dc8dc286ce3f6de4a7">cvmx_spi_get_callbacks</a> (<a class="el" href="structcvmx__spi__callbacks__t.html">cvmx_spi_callbacks_t</a> *callbacks)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current SPI4 initialization callbacks.  <a href="#a34287897ae0869dc8dc286ce3f6de4a7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a9560dc3435d8abef9697229d08add61c">cvmx_spi_set_callbacks</a> (<a class="el" href="structcvmx__spi__callbacks__t.html">cvmx_spi_callbacks_t</a> *new_callbacks)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set new SPI4 initialization callbacks.  <a href="#a9560dc3435d8abef9697229d08add61c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a6d81ea3725d3051f6e1ba08f3f71b029">cvmx_spi_reset_cb</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback to perform SPI4 reset.  <a href="#a6d81ea3725d3051f6e1ba08f3f71b029"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a1475ec897234b01130107eb767d2a7c5">cvmx_spi_calendar_setup_cb</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode, int num_ports)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback to setup calendar and miscellaneous settings before clock detection.  <a href="#a1475ec897234b01130107eb767d2a7c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a9855423a848dadd4f2ab463f0093783b">cvmx_spi_clock_detect_cb</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode, int timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback to perform clock detection.  <a href="#a9855423a848dadd4f2ab463f0093783b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a4c178908c3a7c4dde235b38374d398ce">cvmx_spi_training_cb</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode, int timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback to perform link training.  <a href="#a4c178908c3a7c4dde235b38374d398ce"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#a944acdbed7c7342615dc08545888435b">cvmx_spi_calendar_sync_cb</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode, int timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback to perform calendar data synchronization.  <a href="#a944acdbed7c7342615dc08545888435b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-spi_8h.html#adc3221ad169e9bd473e4b6eda7400089">cvmx_spi_interface_up_cb</a> (int interface, <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a> mode)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback to handle interface up.  <a href="#adc3221ad169e9bd473e4b6eda7400089"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This file contains defines for the SPI interface. </p>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd>78888 </dd></dl>
<hr/>
 <hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="aeba9ea10ca44f4837e40cd31441cb3ca"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_mode_t" ref="aeba9ea10ca44f4837e40cd31441cb3ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="aeba9ea10ca44f4837e40cd31441cb3caa725ce9acd6425a709f7c0c8ae24f2af8"></a><!-- doxytag: member="CVMX_SPI_MODE_UNKNOWN" ref="aeba9ea10ca44f4837e40cd31441cb3caa725ce9acd6425a709f7c0c8ae24f2af8" args="" -->CVMX_SPI_MODE_UNKNOWN</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aeba9ea10ca44f4837e40cd31441cb3caacdae6a34c367ba15a696e3346dcb5506"></a><!-- doxytag: member="CVMX_SPI_MODE_TX_HALFPLEX" ref="aeba9ea10ca44f4837e40cd31441cb3caacdae6a34c367ba15a696e3346dcb5506" args="" -->CVMX_SPI_MODE_TX_HALFPLEX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aeba9ea10ca44f4837e40cd31441cb3caa0b8a234e2a7396598bd250e50cfa3ab2"></a><!-- doxytag: member="CVMX_SPI_MODE_RX_HALFPLEX" ref="aeba9ea10ca44f4837e40cd31441cb3caa0b8a234e2a7396598bd250e50cfa3ab2" args="" -->CVMX_SPI_MODE_RX_HALFPLEX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="aeba9ea10ca44f4837e40cd31441cb3caa980f6968f51657a478751d8f3074a8ec"></a><!-- doxytag: member="CVMX_SPI_MODE_DUPLEX" ref="aeba9ea10ca44f4837e40cd31441cb3caa980f6968f51657a478751d8f3074a8ec" args="" -->CVMX_SPI_MODE_DUPLEX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9e53ec79e69dfd6cb999f2577a84c4e9"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi4000_check_speed" ref="a9e53ec79e69dfd6cb999f2577a84c4e9" args="(int interface, int port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="unioncvmx__gmxx__rxx__rx__inbnd.html">cvmx_gmxx_rxx_rx_inbnd_t</a> cvmx_spi4000_check_speed </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Poll all the SPI4000 port and check its speed. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>Interface the SPI4000 is on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>Port to poll (0-9) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Status of the port. 0=down. All other values the port is up. </dd></dl>

</div>
</div>
<a class="anchor" id="afc943ee68acf7f7479f1d75ff2924818"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi4000_initialize" ref="afc943ee68acf7f7479f1d75ff2924818" args="(int interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi4000_initialize </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the SPI4000 for use. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>SPI interface the SPI4000 is connected to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="acaf3b62c5ecfd3d2120acc7c29d41aa9"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi4000_is_present" ref="acaf3b62c5ecfd3d2120acc7c29d41aa9" args="(int interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi4000_is_present </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return non-zero if the SPI interface has a SPI4000 attached. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>SPI interface the SPI4000 is connected to</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="a1475ec897234b01130107eb767d2a7c5"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_calendar_setup_cb" ref="a1475ec897234b01130107eb767d2a7c5" args="(int interface, cvmx_spi_mode_t mode, int num_ports)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_calendar_setup_cb </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_ports</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback to setup calendar and miscellaneous settings before clock detection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_ports</em>&nbsp;</td><td>Number of ports to configure on SPI</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero error code on failure (will cause SPI initialization to abort) </dd></dl>

</div>
</div>
<a class="anchor" id="a944acdbed7c7342615dc08545888435b"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_calendar_sync_cb" ref="a944acdbed7c7342615dc08545888435b" args="(int interface, cvmx_spi_mode_t mode, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_calendar_sync_cb </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback to perform calendar data synchronization. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to wait for calendar data in seconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero error code on failure (will cause SPI initialization to abort) </dd></dl>

</div>
</div>
<a class="anchor" id="a9855423a848dadd4f2ab463f0093783b"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_clock_detect_cb" ref="a9855423a848dadd4f2ab463f0093783b" args="(int interface, cvmx_spi_mode_t mode, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_clock_detect_cb </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback to perform clock detection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to wait for clock synchronization in seconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero error code on failure (will cause SPI initialization to abort) </dd></dl>

</div>
</div>
<a class="anchor" id="a34287897ae0869dc8dc286ce3f6de4a7"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_get_callbacks" ref="a34287897ae0869dc8dc286ce3f6de4a7" args="(cvmx_spi_callbacks_t *callbacks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_spi_get_callbacks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__spi__callbacks__t.html">cvmx_spi_callbacks_t</a> *&nbsp;</td>
          <td class="paramname"> <em>callbacks</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get current SPI4 initialization callbacks. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>callbacks</em>&nbsp;</td><td>Pointer to the callbacks structure.to fill</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Pointer to <a class="el" href="structcvmx__spi__callbacks__t.html" title="Callbacks structure to customize SPI4 initialization sequence.">cvmx_spi_callbacks_t</a> structure. </dd></dl>

</div>
</div>
<a class="anchor" id="adc3221ad169e9bd473e4b6eda7400089"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_interface_up_cb" ref="adc3221ad169e9bd473e4b6eda7400089" args="(int interface, cvmx_spi_mode_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_interface_up_cb </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback to handle interface up. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero error code on failure (will cause SPI initialization to abort) </dd></dl>

</div>
</div>
<a class="anchor" id="a0b2a7521180c3dda23ca3b5691e6b3b2"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_is_spi_interface" ref="a0b2a7521180c3dda23ca3b5691e6b3b2" args="(int interface)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_spi_is_spi_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return true if the supplied interface is configured for SPI. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>Interface to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>True if interface is SPI </dd></dl>

</div>
</div>
<a class="anchor" id="a6d81ea3725d3051f6e1ba08f3f71b029"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_reset_cb" ref="a6d81ea3725d3051f6e1ba08f3f71b029" args="(int interface, cvmx_spi_mode_t mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_reset_cb </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback to perform SPI4 reset. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero error code on failure (will cause SPI initialization to abort) </dd></dl>

</div>
</div>
<a class="anchor" id="a0e31ef09c3897ab6343286d27cbf9ec2"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_restart_interface" ref="a0e31ef09c3897ab6343286d27cbf9ec2" args="(int interface, cvmx_spi_mode_t mode, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_restart_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This routine restarts the SPI interface after it has lost synchronization with its corespondant system. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to wait for clock synchronization in seconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative of failure.</dd></dl>
<p>This routine restarts the SPI interface after it has lost synchronization with its corespondant system.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to wait for clock synchronization in seconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative of failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a9560dc3435d8abef9697229d08add61c"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_set_callbacks" ref="a9560dc3435d8abef9697229d08add61c" args="(cvmx_spi_callbacks_t *new_callbacks)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cvmx_spi_set_callbacks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcvmx__spi__callbacks__t.html">cvmx_spi_callbacks_t</a> *&nbsp;</td>
          <td class="paramname"> <em>new_callbacks</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set new SPI4 initialization callbacks. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>new_callbacks</em>&nbsp;</td><td>Pointer to an updated callbacks structure. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a707be6d1afe85158db5d545f58f37e46"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_start_interface" ref="a707be6d1afe85158db5d545f58f37e46" args="(int interface, cvmx_spi_mode_t mode, int timeout, int num_ports)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_start_interface </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_ports</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize and start the SPI interface. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to wait for clock synchronization in seconds </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_ports</em>&nbsp;</td><td>Number of SPI ports to configure</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, negative of failure. </dd></dl>

</div>
</div>
<a class="anchor" id="a4c178908c3a7c4dde235b38374d398ce"></a><!-- doxytag: member="cvmx&#45;spi.h::cvmx_spi_training_cb" ref="a4c178908c3a7c4dde235b38374d398ce" args="(int interface, cvmx_spi_mode_t mode, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_spi_training_cb </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="cvmx-spi_8h.html#aeba9ea10ca44f4837e40cd31441cb3ca">cvmx_spi_mode_t</a>&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback to perform link training. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>interface</em>&nbsp;</td><td>The identifier of the packet interface to configure and use as a SPI interface. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The operating mode for the SPI interface. The interface can operate as a full duplex (both Tx and Rx data paths active) or as a halfplex (either the Tx data path is active or the Rx data path is active, but not both). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>Timeout to wait for link to be trained (in seconds) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero on success, non-zero error code on failure (will cause SPI initialization to abort) </dd></dl>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
