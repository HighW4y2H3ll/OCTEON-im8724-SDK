<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-twsi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx-twsi.c File Reference</h1>
<p>Interface to the TWSI / I2C bus.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="cvmx_8h_source.html">cvmx.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-twsi_8h_source.html">cvmx-twsi.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="cvmx-csr-db_8h_source.html">cvmx-csr-db.h</a>&quot;</code><br/>
<div class="dynheader">
Include dependency graph for cvmx-twsi.c:</div>
<div class="dynsection">
<div class="center"><img src="cvmx-twsi_8c__incl.png" border="0" usemap="#cvmx-twsi_8c_map" alt=""/></div>
<map name="cvmx-twsi_8c_map" id="cvmx-twsi_8c">
<area shape="rect" id="node3" href="cvmx_8h.html" title="Main Octeon executive header file (This should be the second header file included..." alt="" coords="864,83,933,112"/><area shape="rect" id="node111" href="cvmx-twsi_8h.html" title="Interface to the TWSI / I2C bus." alt="" coords="957,83,1061,112"/><area shape="rect" id="node113" href="cvmx-csr-db_8h.html" title="Interface for the Octeon CSR database." alt="" coords="647,83,764,112"/><area shape="rect" id="node5" href="cvmx-platform_8h.html" title="This file is resposible for including all system dependent headers for the cvmx&#45;*..." alt="" coords="587,237,720,267"/><area shape="rect" id="node27" href="cvmx-access_8h.html" title="Function prototypes for accessing memory and CSRs on Octeon." alt="" coords="237,237,360,267"/><area shape="rect" id="node29" href="cvmx-address_8h.html" title="Typedefs and defines for working with Octeon physical addresses." alt="" coords="1189,237,1317,267"/><area shape="rect" id="node32" href="cvmx-asm_8h.html" title="This is file defines ASM primitives for the executive." alt="" coords="5,392,109,421"/><area shape="rect" id="node34" href="cvmx-packet_8h.html" title="Packet buffer defines." alt="" coords="768,160,891,189"/><area shape="rect" id="node36" href="cvmx-warn_8h.html" title="Functions for warning users about errors and such." alt="" coords="915,160,1024,189"/><area shape="rect" id="node38" href="cvmx-sysinfo_8h.html" title="This module provides system/board information obtained by the bootloader." alt="" coords="395,160,517,189"/><area shape="rect" id="node48" href="octeon-model_8h.html" title="File defining different Octeon model IDs and macros to compare them." alt="" coords="1048,160,1176,189"/><area shape="rect" id="node50" href="cvmx-csr_8h.html" title="Configuration and status register (CSR) address and type definitions for Octoen." alt="" coords="648,160,744,189"/><area shape="rect" id="node89" href="cvmx-utils_8h.html" title="Small utility functions and macros to ease programming of Octeon." alt="" coords="109,237,213,267"/><area shape="rect" id="node92" href="cvmx-clock_8h.html" title="Interface to Core, IO and DDR Clock." alt="" coords="1200,160,1309,189"/><area shape="rect" id="node95" href="octeon-feature_8h.html" title="File defining checks for different Octeon features." alt="" coords="1333,160,1472,189"/><area shape="rect" id="node97" href="cvmx-fpa_8h.html" title="Interface to the hardware Free Pool Allocator." alt="" coords="3459,160,3557,189"/><area shape="rect" id="node7" href="cvmx-abi_8h.html" title="This file defines macros for use in determining the current calling ABI." alt="" coords="949,315,1045,344"/><area shape="rect" id="node40" href="cvmx-app-init_8h.html" title="Header file for simple executive application initialization." alt="" coords="435,237,563,267"/><area shape="rect" id="node42" href="cvmx-coremask_8h.html" title="Module to support operations on bitmap of cores." alt="" coords="40,315,181,344"/><area shape="rect" id="node53" href="cvmx-csr-enums_8h.html" title="Definitions for enumerations used with Octeon CSRs." alt="" coords="744,237,891,267"/><area shape="rect" id="node55" href="cvmx-csr-typedefs_8h.html" title="Configuration and status register (CSR) address and type definitions for Octeon." alt="" coords="2184,237,2347,267"/><area shape="rect" id="node57" href="cvmx-agl-defs_8h.html" title="cvmx&#45;agl&#45;defs.h" alt="" coords="2043,315,2173,344"/><area shape="rect" id="node59" href="cvmx-ase-defs_8h.html" title="cvmx&#45;ase&#45;defs.h" alt="" coords="2197,315,2333,344"/><area shape="rect" id="node61" href="cvmx-asxx-defs_8h.html" title="cvmx&#45;asxx&#45;defs.h" alt="" coords="2357,315,2499,344"/><area shape="rect" id="node63" href="cvmx-asx0-defs_8h.html" title="cvmx&#45;asx0&#45;defs.h" alt="" coords="2523,315,2664,344"/><area shape="rect" id="node65" href="cvmx-bbp-defs_8h.html" title="cvmx&#45;bbp&#45;defs.h" alt="" coords="2688,315,2824,344"/><area shape="rect" id="node67" href="cvmx-bbxa-defs_8h.html" title="cvmx&#45;bbxa&#45;defs.h" alt="" coords="2848,315,2992,344"/><area shape="rect" id="node69" href="cvmx-bbxbx-defs_8h.html" title="cvmx&#45;bbxbx&#45;defs.h" alt="" coords="3016,315,3168,344"/><area shape="rect" id="node71" href="cvmx-bbxc-defs_8h.html" title="cvmx&#45;bbxc&#45;defs.h" alt="" coords="3192,315,3336,344"/><area shape="rect" id="node73" href="cvmx-bch-defs_8h.html" title="cvmx&#45;bch&#45;defs.h" alt="" coords="3360,315,3496,344"/><area shape="rect" id="node75" href="cvmx-bgxx-defs_8h.html" title="cvmx&#45;bgxx&#45;defs.h" alt="" coords="1069,315,1213,344"/><area shape="rect" id="node77" href="cvmx-bts-defs_8h.html" title="cvmx&#45;bts&#45;defs.h" alt="" coords="1237,315,1371,344"/><area shape="rect" id="node79" href="cvmx-ciu2-defs_8h.html" title="cvmx&#45;ciu2&#45;defs.h" alt="" coords="1395,315,1533,344"/><area shape="rect" id="node81" href="cvmx-ciu3-defs_8h.html" title="cvmx&#45;ciu3&#45;defs.h" alt="" coords="1557,315,1696,344"/><area shape="rect" id="node83" href="cvmx-ciu-defs_8h.html" title="cvmx&#45;ciu&#45;defs.h" alt="" coords="1720,315,1851,344"/><area shape="rect" id="node85" href="cvmx-cprix-defs_8h.html" title="cvmx&#45;cprix&#45;defs.h" alt="" coords="1875,315,2019,344"/><area shape="rect" id="node87" href="cvmx-fpa-defs_8h.html" title="cvmx&#45;fpa&#45;defs.h" alt="" coords="3520,315,3653,344"/><area shape="rect" id="node99" href="cvmx-scratch_8h.html" title="This file provides support for the processor local scratch memory." alt="" coords="3677,315,3805,344"/><area shape="rect" id="node103" href="cvmx-fpa1_8h.html" title="Interface to the hardware Free Pool Allocator on Octeon chips." alt="" coords="3631,237,3737,267"/><area shape="rect" id="node107" href="cvmx-fpa3_8h.html" title="Interface to the CN78XX Free Pool Allocator, a.k.a." alt="" coords="3500,237,3607,267"/></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a96801466c280ee779a0d84500cd9f721">TWSI_TIMEOUT</a>&nbsp;&nbsp;&nbsp;10000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#ade62d4eab8513872caa43c6af4a12630">twsi_printf</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a46cc462e6af457928b3616f5fab97fab">cvmx_csr_db_decode</a>(...)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a63b6fbe31f7bf9799ebd789aa1f8734f">SW_TWSI_EOP_TWSI_DATA</a>&nbsp;&nbsp;&nbsp;0x1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a1b6161f9657ce776cf3881a863756578">SW_TWSI_EOP_TWSI_CTL</a>&nbsp;&nbsp;&nbsp;0x2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#ae81b535447adc12e0bb13ee218b8f5ce">SW_TWSI_EOP_TWSI_CLKCTL</a>&nbsp;&nbsp;&nbsp;0x3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aac268413368251201049451820acb6e8">SW_TWSI_EOP_TWSI_STAT</a>&nbsp;&nbsp;&nbsp;0x3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a4c4eac47b9038ac5eb339ad93f1692a3">SW_TWSI_EOP_TWSI_RST</a>&nbsp;&nbsp;&nbsp;0x7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a124efc768797349bda8848bc9ffbe923">TWSI_CTL_CE</a>&nbsp;&nbsp;&nbsp;0x80</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a629867d42b8d00fe1b0b91a0d97707d3">TWSI_CTL_ENAB</a>&nbsp;&nbsp;&nbsp;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aa3eb4b5e4a5e3b4c92802cb4b0b84afc">TWSI_CTL_STA</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#af8411fd170ee46fe77c3b4d936f111e6">TWSI_CTL_STP</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a006846e22fa038be00cabae34cb338bd">TWSI_CTL_IFLG</a>&nbsp;&nbsp;&nbsp;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#ab2796dd8a340b86a0b73c73c431a7a7f">TWSI_CTL_AAK</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aca1bddf62fe6ac0c3788aee460e04308">STAT_START</a>&nbsp;&nbsp;&nbsp;0x08</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a9d623daeada24f96972853570d1816f0">STAT_RSTART</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a058ffbe4e79f275b8b273c62c7da26ba">STAT_TXADDR_ACK</a>&nbsp;&nbsp;&nbsp;0x18</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a01b139e41eb291e66ae757fc61829459">STAT_TXDATA_ACK</a>&nbsp;&nbsp;&nbsp;0x28</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a8554ed1747272d82229b3bb225110764">STAT_RXADDR_ACK</a>&nbsp;&nbsp;&nbsp;0x40</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a71ba6bb34d5fa541d23c4fffa0f7cd13">STAT_RXDATA_ACK</a>&nbsp;&nbsp;&nbsp;0x50</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a6df14fc750320eaaa23f76981eff953e">STAT_IDLE</a>&nbsp;&nbsp;&nbsp;0xF8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#ab9c0ddb92155a43e11b863cb9d6268ae">MAX_BUF_SZ</a>&nbsp;&nbsp;&nbsp;256</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#ae9bad5e80622c65840ecf1054b711ae6">i2c_bus_to_node</a> (int i2c_bus)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aaf18b9487ec799a54b02c515081dae1e">__i2c_twsi_bus</a> (int i2c_bus)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aab81fb9f3ba269a06f9c9abac3e97046">cvmx_twsix_unblock</a> (int twsi_id)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Unblock the I2C bus.  <a href="#aab81fb9f3ba269a06f9c9abac3e97046"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a265f8b087eec7a41be4af348ae41a2ab">cvmx_twsix_read_ia</a> (int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Do a twsi read from a 7 bit device address using an (optional) internal address.  <a href="#a265f8b087eec7a41be4af348ae41a2ab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a5ad0967cdc54fce20d0bb0f93ecd83ed">EXPORT_SYMBOL</a> (cvmx_twsix_read_ia)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a70b53765e839582329de0ed1cc8d436e">cvmx_twsix_read</a> (int twsi_id, uint8_t dev_addr, int num_bytes, uint64_t *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read from a TWSI device (7 bit device address only) without generating any internal addresses.  <a href="#a70b53765e839582329de0ed1cc8d436e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a75f1935b19e791ec2ba1cff47f5b5c8a">EXPORT_SYMBOL</a> (cvmx_twsix_read)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aeb395b86a4f1e40c5820b99e67270ddb">cvmx_twsix_write</a> (int twsi_id, uint8_t dev_addr, int num_bytes, uint64_t data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Perform a twsi write operation to a 7 bit device address.  <a href="#aeb395b86a4f1e40c5820b99e67270ddb"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a6431d5062c86f748b386f2b7d87b5568">EXPORT_SYMBOL</a> (cvmx_twsix_write)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#afde0b10af9b82f406dae4f114d20134b">cvmx_twsix_write_ia</a> (int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write 1-8 bytes to a TWSI device using an internal address.  <a href="#afde0b10af9b82f406dae4f114d20134b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a58a4ab9dac3d4637769b5343c6778b14">EXPORT_SYMBOL</a> (cvmx_twsix_write_ia)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aa40ae2363c14857535d202405a495df2">cvmx_twsix_write_llc_reg</a> (int twsi_id, uint8_t eop_reg, uint8_t data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a2bac38017b347e1e22f40b9c53fbe050">cvmx_twsix_read_llc_reg</a> (int twsi_id, uint8_t eop_reg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a5203b2ccf4dcf6e9b9a338e966de4d4d">cvmx_twsix_wait</a> (int twsi_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a57428bb3e515dd46da0c100d0b862871">cvmx_twsix_start</a> (int twsi_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#afe78e748fa527ebcfd7968ef70ea452e">octeon_i2c_lost_arb</a> (uint8_t code)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a130d125e4716424eaecbacf0427935be">cvmx_twsix_write_seg</a> (int twsi_id, uint8_t dev_addr, uint8_t *buf, int length, int phase)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#aa8820846ac1911869bb9970b772f26e9">cvmx_twsix_read_seg</a> (int twsi_id, uint8_t dev_addr, uint8_t *buf, int length, int phase)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a71e53f0b8c5da6c8ee48ce2724ccb2fb">cvmx_twsix_stop</a> (int twsi_id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a953f62baccc53c027d6796886858717f">cvmx_twsix_read_ia_llc</a> (int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read up to 256 bytes to a TWSI device using an internal address.  <a href="#a953f62baccc53c027d6796886858717f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="cvmx-twsi_8c.html#a765fc04eeea121c96da3111adf6c8a62">cvmx_twsix_write_ia_llc</a> (int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t *data)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write up to 256 bytes to a TWSI device using an internal address.  <a href="#a765fc04eeea121c96da3111adf6c8a62"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Interface to the TWSI / I2C bus. </p>
<hr/>
<dl class="rcs"><dt><b>Revision</b></dt><dd>130009 </dd></dl>
<hr/>
 <hr/><h2>Define Documentation</h2>
<a class="anchor" id="a46cc462e6af457928b3616f5fab97fab"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_csr_db_decode" ref="a46cc462e6af457928b3616f5fab97fab" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define cvmx_csr_db_decode</td>
          <td>(</td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab9c0ddb92155a43e11b863cb9d6268ae"></a><!-- doxytag: member="cvmx&#45;twsi.c::MAX_BUF_SZ" ref="ab9c0ddb92155a43e11b863cb9d6268ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BUF_SZ&nbsp;&nbsp;&nbsp;256</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6df14fc750320eaaa23f76981eff953e"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_IDLE" ref="a6df14fc750320eaaa23f76981eff953e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_IDLE&nbsp;&nbsp;&nbsp;0xF8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d623daeada24f96972853570d1816f0"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_RSTART" ref="a9d623daeada24f96972853570d1816f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_RSTART&nbsp;&nbsp;&nbsp;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8554ed1747272d82229b3bb225110764"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_RXADDR_ACK" ref="a8554ed1747272d82229b3bb225110764" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_RXADDR_ACK&nbsp;&nbsp;&nbsp;0x40</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a71ba6bb34d5fa541d23c4fffa0f7cd13"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_RXDATA_ACK" ref="a71ba6bb34d5fa541d23c4fffa0f7cd13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_RXDATA_ACK&nbsp;&nbsp;&nbsp;0x50</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aca1bddf62fe6ac0c3788aee460e04308"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_START" ref="aca1bddf62fe6ac0c3788aee460e04308" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_START&nbsp;&nbsp;&nbsp;0x08</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a058ffbe4e79f275b8b273c62c7da26ba"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_TXADDR_ACK" ref="a058ffbe4e79f275b8b273c62c7da26ba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_TXADDR_ACK&nbsp;&nbsp;&nbsp;0x18</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a01b139e41eb291e66ae757fc61829459"></a><!-- doxytag: member="cvmx&#45;twsi.c::STAT_TXDATA_ACK" ref="a01b139e41eb291e66ae757fc61829459" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_TXDATA_ACK&nbsp;&nbsp;&nbsp;0x28</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae81b535447adc12e0bb13ee218b8f5ce"></a><!-- doxytag: member="cvmx&#45;twsi.c::SW_TWSI_EOP_TWSI_CLKCTL" ref="ae81b535447adc12e0bb13ee218b8f5ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_TWSI_EOP_TWSI_CLKCTL&nbsp;&nbsp;&nbsp;0x3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1b6161f9657ce776cf3881a863756578"></a><!-- doxytag: member="cvmx&#45;twsi.c::SW_TWSI_EOP_TWSI_CTL" ref="a1b6161f9657ce776cf3881a863756578" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_TWSI_EOP_TWSI_CTL&nbsp;&nbsp;&nbsp;0x2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a63b6fbe31f7bf9799ebd789aa1f8734f"></a><!-- doxytag: member="cvmx&#45;twsi.c::SW_TWSI_EOP_TWSI_DATA" ref="a63b6fbe31f7bf9799ebd789aa1f8734f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_TWSI_EOP_TWSI_DATA&nbsp;&nbsp;&nbsp;0x1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4c4eac47b9038ac5eb339ad93f1692a3"></a><!-- doxytag: member="cvmx&#45;twsi.c::SW_TWSI_EOP_TWSI_RST" ref="a4c4eac47b9038ac5eb339ad93f1692a3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_TWSI_EOP_TWSI_RST&nbsp;&nbsp;&nbsp;0x7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aac268413368251201049451820acb6e8"></a><!-- doxytag: member="cvmx&#45;twsi.c::SW_TWSI_EOP_TWSI_STAT" ref="aac268413368251201049451820acb6e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SW_TWSI_EOP_TWSI_STAT&nbsp;&nbsp;&nbsp;0x3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab2796dd8a340b86a0b73c73c431a7a7f"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_CTL_AAK" ref="ab2796dd8a340b86a0b73c73c431a7a7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_CTL_AAK&nbsp;&nbsp;&nbsp;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a124efc768797349bda8848bc9ffbe923"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_CTL_CE" ref="a124efc768797349bda8848bc9ffbe923" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_CTL_CE&nbsp;&nbsp;&nbsp;0x80</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a629867d42b8d00fe1b0b91a0d97707d3"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_CTL_ENAB" ref="a629867d42b8d00fe1b0b91a0d97707d3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_CTL_ENAB&nbsp;&nbsp;&nbsp;0x40</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a006846e22fa038be00cabae34cb338bd"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_CTL_IFLG" ref="a006846e22fa038be00cabae34cb338bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_CTL_IFLG&nbsp;&nbsp;&nbsp;0x08</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa3eb4b5e4a5e3b4c92802cb4b0b84afc"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_CTL_STA" ref="aa3eb4b5e4a5e3b4c92802cb4b0b84afc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_CTL_STA&nbsp;&nbsp;&nbsp;0x20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af8411fd170ee46fe77c3b4d936f111e6"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_CTL_STP" ref="af8411fd170ee46fe77c3b4d936f111e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_CTL_STP&nbsp;&nbsp;&nbsp;0x10</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ade62d4eab8513872caa43c6af4a12630"></a><!-- doxytag: member="cvmx&#45;twsi.c::twsi_printf" ref="ade62d4eab8513872caa43c6af4a12630" args="(...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define twsi_printf</td>
          <td>(</td>
          <td class="paramtype"> <em>...</em>&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a96801466c280ee779a0d84500cd9f721"></a><!-- doxytag: member="cvmx&#45;twsi.c::TWSI_TIMEOUT" ref="a96801466c280ee779a0d84500cd9f721" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWSI_TIMEOUT&nbsp;&nbsp;&nbsp;10000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="aaf18b9487ec799a54b02c515081dae1e"></a><!-- doxytag: member="cvmx&#45;twsi.c::__i2c_twsi_bus" ref="aaf18b9487ec799a54b02c515081dae1e" args="(int i2c_bus)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int __i2c_twsi_bus </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i2c_bus</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a70b53765e839582329de0ed1cc8d436e"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_read" ref="a70b53765e839582329de0ed1cc8d436e" args="(int twsi_id, uint8_t dev_addr, int num_bytes, uint64_t *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_read </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read from a TWSI device (7 bit device address only) without generating any internal addresses. </p>
<p>Read from 1-8 bytes and returns them in the data pointer.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>twsi_id</em>&nbsp;</td><td>TWSI interface on Octeon to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev_addr</em>&nbsp;</td><td>TWSI device address (7 bit only) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes</em>&nbsp;</td><td>number of bytes to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer to data read from TWSI device</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of bytes read on success -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="a265f8b087eec7a41be4af348ae41a2ab"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_read_ia" ref="a265f8b087eec7a41be4af348ae41a2ab" args="(int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_read_ia </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>internal_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ia_width_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Do a twsi read from a 7 bit device address using an (optional) internal address. </p>
<p>Up to 8 bytes can be read at a time.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>twsi_id</em>&nbsp;</td><td>which Octeon TWSI bus to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev_addr</em>&nbsp;</td><td>Device address (7 bit) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>internal_addr</em>&nbsp;</td><td>Internal address. Can be 0, 1 or 2 bytes in width </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes</em>&nbsp;</td><td>Number of data bytes to read </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ia_width_bytes</em>&nbsp;</td><td>Internal address size in bytes (0, 1, or 2) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Pointer argument where the read data is returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>read data returned in 'data' argument Number of bytes read on success -1 on failure </dd></dl>

</div>
</div>
<a class="anchor" id="a953f62baccc53c027d6796886858717f"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_read_ia_llc" ref="a953f62baccc53c027d6796886858717f" args="(int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_read_ia_llc </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>internal_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ia_width_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read up to 256 bytes to a TWSI device using an internal address. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>twsi_id</em>&nbsp;</td><td>Which TWSI interface on Octeon to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev_addr</em>&nbsp;</td><td>TWSI device address (7 bit only) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>internal_addr</em>&nbsp;</td><td>TWSI internal address (8 or 16 bits) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes</em>&nbsp;</td><td>Number of bytes to read (1-256) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ia_width_bytes</em>&nbsp;</td><td>Internal address width, in bytes (1 or 2) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data to read. Data is read MSB first on the twsi bus, and only the higher "num_bytes" bytes of the argument are valid. (If a 2 byte read is done, only the high 2 bytes of the argument is used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success; -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="a2bac38017b347e1e22f40b9c53fbe050"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_read_llc_reg" ref="a2bac38017b347e1e22f40b9c53fbe050" args="(int twsi_id, uint8_t eop_reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static uint8_t cvmx_twsix_read_llc_reg </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>eop_reg</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aa8820846ac1911869bb9970b772f26e9"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_read_seg" ref="aa8820846ac1911869bb9970b772f26e9" args="(int twsi_id, uint8_t dev_addr, uint8_t *buf, int length, int phase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_twsix_read_seg </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>phase</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a57428bb3e515dd46da0c100d0b862871"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_start" ref="a57428bb3e515dd46da0c100d0b862871" args="(int twsi_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_twsix_start </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a71e53f0b8c5da6c8ee48ce2724ccb2fb"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_stop" ref="a71e53f0b8c5da6c8ee48ce2724ccb2fb" args="(int twsi_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_twsix_stop </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aab81fb9f3ba269a06f9c9abac3e97046"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_unblock" ref="aab81fb9f3ba269a06f9c9abac3e97046" args="(int twsi_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_unblock </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unblock the I2C bus. </p>
<p>This should be done during initialization and if the I2C bus gets stuck due to a device resetting unexpectedly. </p>

</div>
</div>
<a class="anchor" id="a5203b2ccf4dcf6e9b9a338e966de4d4d"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_wait" ref="a5203b2ccf4dcf6e9b9a338e966de4d4d" args="(int twsi_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_twsix_wait </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aeb395b86a4f1e40c5820b99e67270ddb"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_write" ref="aeb395b86a4f1e40c5820b99e67270ddb" args="(int twsi_id, uint8_t dev_addr, int num_bytes, uint64_t data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_write </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Perform a twsi write operation to a 7 bit device address. </p>
<p>Note that many eeprom devices have page restrictions regarding address boundaries that can be crossed in one write operation. This is device dependent, and this routine does nothing in this regard. This command does not generate any internal addressess.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>twsi_id</em>&nbsp;</td><td>Octeon TWSI interface to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev_addr</em>&nbsp;</td><td>TWSI device address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes</em>&nbsp;</td><td>Number of bytes to write (between 1 and 8 inclusive) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success -1 on failure </dd></dl>

</div>
</div>
<a class="anchor" id="afde0b10af9b82f406dae4f114d20134b"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_write_ia" ref="afde0b10af9b82f406dae4f114d20134b" args="(int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_write_ia </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>internal_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ia_width_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write 1-8 bytes to a TWSI device using an internal address. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>twsi_id</em>&nbsp;</td><td>which TWSI interface on Octeon to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev_addr</em>&nbsp;</td><td>TWSI device address (7 bit only) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>internal_addr</em>&nbsp;</td><td>TWSI internal address (0, 8, or 16 bits) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes</em>&nbsp;</td><td>Number of bytes to write (1-8) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ia_width_bytes</em>&nbsp;</td><td>internal address width, in bytes (0, 1, 2) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data to write. Data is written MSB first on the twsi bus, and only the lower num_bytes bytes of the argument are valid. (If a 2 byte write is done, only the low 2 bytes of the argument is used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of bytes read on success, -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="a765fc04eeea121c96da3111adf6c8a62"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_write_ia_llc" ref="a765fc04eeea121c96da3111adf6c8a62" args="(int twsi_id, uint8_t dev_addr, uint16_t internal_addr, int num_bytes, int ia_width_bytes, uint64_t *data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cvmx_twsix_write_ia_llc </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>internal_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>ia_width_bytes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write up to 256 bytes to a TWSI device using an internal address. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>twsi_id</em>&nbsp;</td><td>Which TWSI interface on Octeon to use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dev_addr</em>&nbsp;</td><td>TWSI device address (7 bit only) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>internal_addr</em>&nbsp;</td><td>TWSI internal address (8 or 16 bits) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num_bytes</em>&nbsp;</td><td>Number of bytes to write (1-256) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ia_width_bytes</em>&nbsp;</td><td>Internal address width, in bytes (1 or 2) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>Data to write. Data is written MSB first on the twsi bus, and only the higher "num_bytes" bytes of the argument are valid. (If a 2 byte write is done, only the high 2 bytes of the argument is used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success; -1 on error </dd></dl>

</div>
</div>
<a class="anchor" id="aa40ae2363c14857535d202405a495df2"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_write_llc_reg" ref="aa40ae2363c14857535d202405a495df2" args="(int twsi_id, uint8_t eop_reg, uint8_t data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void cvmx_twsix_write_llc_reg </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>eop_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a130d125e4716424eaecbacf0427935be"></a><!-- doxytag: member="cvmx&#45;twsi.c::cvmx_twsix_write_seg" ref="a130d125e4716424eaecbacf0427935be" args="(int twsi_id, uint8_t dev_addr, uint8_t *buf, int length, int phase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int cvmx_twsix_write_seg </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twsi_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>dev_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>phase</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a58a4ab9dac3d4637769b5343c6778b14"></a><!-- doxytag: member="cvmx&#45;twsi.c::EXPORT_SYMBOL" ref="a58a4ab9dac3d4637769b5343c6778b14" args="(cvmx_twsix_write_ia)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_twsix_write_ia&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a6431d5062c86f748b386f2b7d87b5568"></a><!-- doxytag: member="cvmx&#45;twsi.c::EXPORT_SYMBOL" ref="a6431d5062c86f748b386f2b7d87b5568" args="(cvmx_twsix_write)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_twsix_write&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a75f1935b19e791ec2ba1cff47f5b5c8a"></a><!-- doxytag: member="cvmx&#45;twsi.c::EXPORT_SYMBOL" ref="a75f1935b19e791ec2ba1cff47f5b5c8a" args="(cvmx_twsix_read)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_twsix_read&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5ad0967cdc54fce20d0bb0f93ecd83ed"></a><!-- doxytag: member="cvmx&#45;twsi.c::EXPORT_SYMBOL" ref="a5ad0967cdc54fce20d0bb0f93ecd83ed" args="(cvmx_twsix_read_ia)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EXPORT_SYMBOL </td>
          <td>(</td>
          <td class="paramtype">cvmx_twsix_read_ia&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae9bad5e80622c65840ecf1054b711ae6"></a><!-- doxytag: member="cvmx&#45;twsi.c::i2c_bus_to_node" ref="ae9bad5e80622c65840ecf1054b711ae6" args="(int i2c_bus)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int i2c_bus_to_node </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>i2c_bus</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="afe78e748fa527ebcfd7968ef70ea452e"></a><!-- doxytag: member="cvmx&#45;twsi.c::octeon_i2c_lost_arb" ref="afe78e748fa527ebcfd7968ef70ea452e" args="(uint8_t code)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int octeon_i2c_lost_arb </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>code</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
