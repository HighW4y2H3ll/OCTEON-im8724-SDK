<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx-wqe.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>cvmx-wqe.h</h1><a href="cvmx-wqe_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/***********************license start***************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) 2003-2015  Cavium Inc. (support@cavium.com). All rights</span>
<a name="l00003"></a>00003 <span class="comment"> * reserved.</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00007"></a>00007 <span class="comment"> * modification, are permitted provided that the following conditions are</span>
<a name="l00008"></a>00008 <span class="comment"> * met:</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> *   * Redistributions of source code must retain the above copyright</span>
<a name="l00011"></a>00011 <span class="comment"> *     notice, this list of conditions and the following disclaimer.</span>
<a name="l00012"></a>00012 <span class="comment"> *</span>
<a name="l00013"></a>00013 <span class="comment"> *   * Redistributions in binary form must reproduce the above</span>
<a name="l00014"></a>00014 <span class="comment"> *     copyright notice, this list of conditions and the following</span>
<a name="l00015"></a>00015 <span class="comment"> *     disclaimer in the documentation and/or other materials provided</span>
<a name="l00016"></a>00016 <span class="comment"> *     with the distribution.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment"> *   * Neither the name of Cavium Inc. nor the names of</span>
<a name="l00019"></a>00019 <span class="comment"> *     its contributors may be used to endorse or promote products</span>
<a name="l00020"></a>00020 <span class="comment"> *     derived from this software without specific prior written</span>
<a name="l00021"></a>00021 <span class="comment"> *     permission.</span>
<a name="l00022"></a>00022 <span class="comment"></span>
<a name="l00023"></a>00023 <span class="comment"> * This Software, including technical data, may be subject to U.S. export  control</span>
<a name="l00024"></a>00024 <span class="comment"> * laws, including the U.S. Export Administration Act and its  associated</span>
<a name="l00025"></a>00025 <span class="comment"> * regulations, and may be subject to export or import  regulations in other</span>
<a name="l00026"></a>00026 <span class="comment"> * countries.</span>
<a name="l00027"></a>00027 <span class="comment"></span>
<a name="l00028"></a>00028 <span class="comment"> * TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE SOFTWARE IS PROVIDED &quot;AS IS&quot;</span>
<a name="l00029"></a>00029 <span class="comment"> * AND WITH ALL FAULTS AND CAVIUM INC. MAKES NO PROMISES, REPRESENTATIONS OR</span>
<a name="l00030"></a>00030 <span class="comment"> * WARRANTIES, EITHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, WITH RESPECT TO</span>
<a name="l00031"></a>00031 <span class="comment"> * THE SOFTWARE, INCLUDING ITS CONDITION, ITS CONFORMITY TO ANY REPRESENTATION OR</span>
<a name="l00032"></a>00032 <span class="comment"> * DESCRIPTION, OR THE EXISTENCE OF ANY LATENT OR PATENT DEFECTS, AND CAVIUM</span>
<a name="l00033"></a>00033 <span class="comment"> * SPECIFICALLY DISCLAIMS ALL IMPLIED (IF ANY) WARRANTIES OF TITLE,</span>
<a name="l00034"></a>00034 <span class="comment"> * MERCHANTABILITY, NONINFRINGEMENT, FITNESS FOR A PARTICULAR PURPOSE, LACK OF</span>
<a name="l00035"></a>00035 <span class="comment"> * VIRUSES, ACCURACY OR COMPLETENESS, QUIET ENJOYMENT, QUIET POSSESSION OR</span>
<a name="l00036"></a>00036 <span class="comment"> * CORRESPONDENCE TO DESCRIPTION. THE ENTIRE  RISK ARISING OUT OF USE OR</span>
<a name="l00037"></a>00037 <span class="comment"> * PERFORMANCE OF THE SOFTWARE LIES WITH YOU.</span>
<a name="l00038"></a>00038 <span class="comment"> ***********************license end**************************************/</span>
<a name="l00039"></a>00039 <span class="comment"></span>
<a name="l00040"></a>00040 <span class="comment">/**</span>
<a name="l00041"></a>00041 <span class="comment"> * @file</span>
<a name="l00042"></a>00042 <span class="comment"> *</span>
<a name="l00043"></a>00043 <span class="comment"> * This header file defines the work queue entry (wqe) data structure.</span>
<a name="l00044"></a>00044 <span class="comment"> * Since this is a commonly used structure that depends on structures</span>
<a name="l00045"></a>00045 <span class="comment"> * from several hardware blocks, those definitions have been placed</span>
<a name="l00046"></a>00046 <span class="comment"> * in this file to create a single point of definition of the wqe</span>
<a name="l00047"></a>00047 <span class="comment"> * format.</span>
<a name="l00048"></a>00048 <span class="comment"> * Data structures are still named according to the block that they</span>
<a name="l00049"></a>00049 <span class="comment"> * relate to.</span>
<a name="l00050"></a>00050 <span class="comment"> *</span>
<a name="l00051"></a>00051 <span class="comment"> * This file must not depend on any other header files, except for cvmx.h!!!</span>
<a name="l00052"></a>00052 <span class="comment"> */</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#ifndef __CVMX_WQE_H__</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#define __CVMX_WQE_H__</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="preprocessor">#include &quot;<a class="code" href="cvmx-pki-defs_8h.html">cvmx-pki-defs.h</a>&quot;</span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &quot;<a class="code" href="cvmx-pip-defs_8h.html">cvmx-pip-defs.h</a>&quot;</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#ifdef  __cplusplus</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="comment">/* *INDENT-OFF* */</span>
<a name="l00062"></a>00062 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00063"></a>00063 <span class="comment">/* *INDENT-ON* */</span>
<a name="l00064"></a>00064 <span class="preprocessor">#endif</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="cvmx-wqe_8h.html#a1481b0f2bffff3b3f992b7eb970a7852">00066</a> <span class="preprocessor">#define OCT_TAG_TYPE_STRING(x) \</span>
<a name="l00067"></a>00067 <span class="preprocessor">    (((x) == CVMX_POW_TAG_TYPE_ORDERED) ?  &quot;ORDERED&quot; : \</span>
<a name="l00068"></a>00068 <span class="preprocessor">        (((x) == CVMX_POW_TAG_TYPE_ATOMIC) ?  &quot;ATOMIC&quot; : \</span>
<a name="l00069"></a>00069 <span class="preprocessor">            (((x) == CVMX_POW_TAG_TYPE_NULL) ?  &quot;NULL&quot; : &quot;NULL_NULL&quot;)))</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a>00071 <span class="comment">/* Error levels in WQE WORD2 (ERRLEV).*/</span>
<a name="l00072"></a><a class="code" href="cvmx-wqe_8h.html#aa6b8030e22f0ba183ac8df76422ab12e">00072</a> <span class="preprocessor">#define PKI_ERRLEV_E__RE_M  0x0</span>
<a name="l00073"></a><a class="code" href="cvmx-wqe_8h.html#a9af3848cfcefba8e0eba9905e6b269b3">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LA_M  0x1</span>
<a name="l00074"></a><a class="code" href="cvmx-wqe_8h.html#afb085ca2ebe8e058fe1da844869b7696">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LB_M  0x2</span>
<a name="l00075"></a><a class="code" href="cvmx-wqe_8h.html#ac0b25e5418b3032dcc0d76f95c2b4501">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LC_M  0x3</span>
<a name="l00076"></a><a class="code" href="cvmx-wqe_8h.html#a578eafd67854f61a663b48a895c1de08">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LD_M  0x4</span>
<a name="l00077"></a><a class="code" href="cvmx-wqe_8h.html#a6b324f47ec232d1fa9b706155fc6f515">00077</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LE_M  0x5</span>
<a name="l00078"></a><a class="code" href="cvmx-wqe_8h.html#a360ae648c4f66841049505a9412eacf8">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LF_M  0x6</span>
<a name="l00079"></a><a class="code" href="cvmx-wqe_8h.html#ac49611eb4f0cbcebab8ffed038dde02d">00079</a> <span class="preprocessor"></span><span class="preprocessor">#define PKI_ERRLEV_E__LG_M  0x7</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13">00081</a> <span class="keyword">enum</span> <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13">cvmx_pki_errlevel</a> {
<a name="l00082"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a1b179967023e9513255260d6a0456a79">00082</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a1b179967023e9513255260d6a0456a79">CVMX_PKI_ERRLEV_E_RE</a> = <a class="code" href="cvmx-wqe_8h.html#aa6b8030e22f0ba183ac8df76422ab12e">PKI_ERRLEV_E__RE_M</a>,
<a name="l00083"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13af2d8479dfbf8a5ac4fe2d9cb8b4d045b">00083</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13af2d8479dfbf8a5ac4fe2d9cb8b4d045b">CVMX_PKI_ERRLEV_E_LA</a> = <a class="code" href="cvmx-wqe_8h.html#a9af3848cfcefba8e0eba9905e6b269b3">PKI_ERRLEV_E__LA_M</a>,
<a name="l00084"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a8ff088fe93b088f6767b3525a85258ba">00084</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a8ff088fe93b088f6767b3525a85258ba">CVMX_PKI_ERRLEV_E_LB</a> = <a class="code" href="cvmx-wqe_8h.html#afb085ca2ebe8e058fe1da844869b7696">PKI_ERRLEV_E__LB_M</a>,
<a name="l00085"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a6dedbf5ea90348c845eb723ed19ec21f">00085</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a6dedbf5ea90348c845eb723ed19ec21f">CVMX_PKI_ERRLEV_E_LC</a> = <a class="code" href="cvmx-wqe_8h.html#ac0b25e5418b3032dcc0d76f95c2b4501">PKI_ERRLEV_E__LC_M</a>,
<a name="l00086"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a5c141353405409050447c7529d94edc4">00086</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a5c141353405409050447c7529d94edc4">CVMX_PKI_ERRLEV_E_LD</a> = <a class="code" href="cvmx-wqe_8h.html#a578eafd67854f61a663b48a895c1de08">PKI_ERRLEV_E__LD_M</a>,
<a name="l00087"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a33368d6e69dfa095d760680b893ce02e">00087</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a33368d6e69dfa095d760680b893ce02e">CVMX_PKI_ERRLEV_E_LE</a> = <a class="code" href="cvmx-wqe_8h.html#a6b324f47ec232d1fa9b706155fc6f515">PKI_ERRLEV_E__LE_M</a>,
<a name="l00088"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a8a0e5cda7dbb307e9d465acaa8473e5b">00088</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a8a0e5cda7dbb307e9d465acaa8473e5b">CVMX_PKI_ERRLEV_E_LF</a> = <a class="code" href="cvmx-wqe_8h.html#a360ae648c4f66841049505a9412eacf8">PKI_ERRLEV_E__LF_M</a>,
<a name="l00089"></a><a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a56a4ad365cdd2c53e4c638fa7e15f4bc">00089</a>     <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a56a4ad365cdd2c53e4c638fa7e15f4bc">CVMX_PKI_ERRLEV_E_LG</a> = <a class="code" href="cvmx-wqe_8h.html#ac49611eb4f0cbcebab8ffed038dde02d">PKI_ERRLEV_E__LG_M</a>
<a name="l00090"></a>00090 };
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="cvmx-wqe_8h.html#a45ebb7e454c9d7dcdd405001d337c0d4">00092</a> <span class="preprocessor">#define CVMX_PKI_ERRLEV_MAX  (1 &lt;&lt; 3) </span><span class="comment">/* The size of WORD2:ERRLEV field.*/</span>
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">/* Error code in WQE WORD2 (OPCODE).*/</span>
<a name="l00095"></a><a class="code" href="cvmx-wqe_8h.html#a6e7ca7acb0fc927909d438712f1588f0">00095</a> <span class="preprocessor">#define CVMX_PKI_OPCODE_RE_NONE        0x0</span>
<a name="l00096"></a><a class="code" href="cvmx-wqe_8h.html#acd012245cebbe9f6ce0685be153de90c">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_PARTIAL     0x1</span>
<a name="l00097"></a><a class="code" href="cvmx-wqe_8h.html#a1510e67239987d2beee5067e80793330">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_JABBER      0x2</span>
<a name="l00098"></a><a class="code" href="cvmx-wqe_8h.html#af3c4dae630c9a1fda6af3cb821a2c620">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_FCS         0x7</span>
<a name="l00099"></a><a class="code" href="cvmx-wqe_8h.html#a588ce0396b6073477ed8255db8868a4b">00099</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_FCS_RCV     0x8</span>
<a name="l00100"></a><a class="code" href="cvmx-wqe_8h.html#a212fbec2d77c7f35ea56a8044b128173">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_TERMINATE   0x9</span>
<a name="l00101"></a><a class="code" href="cvmx-wqe_8h.html#a608c51c6a624c9a01b8b32ec2e90fc45">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_RX_CTL      0xb</span>
<a name="l00102"></a><a class="code" href="cvmx-wqe_8h.html#a529e95c14be6322640f03387d9c2df1f">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_SKIP        0xc</span>
<a name="l00103"></a><a class="code" href="cvmx-wqe_8h.html#a804edcac52d4da8a1a63a07735005b08">00103</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_DMAPKT      0xf</span>
<a name="l00104"></a><a class="code" href="cvmx-wqe_8h.html#a716cac7e5351554bbce6809d69d00b8b">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_PKIPAR      0x13</span>
<a name="l00105"></a><a class="code" href="cvmx-wqe_8h.html#a4b70d93ee179da846a01d4daa4985809">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_PKIPCAM     0x14</span>
<a name="l00106"></a><a class="code" href="cvmx-wqe_8h.html#abe5e4ec58fd9982178303503a7f28fe0">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_MEMOUT      0x15</span>
<a name="l00107"></a><a class="code" href="cvmx-wqe_8h.html#a728623a27dbf0c2cfaa57384a01f985a">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_RE_BUFS_OFLOW  0x16</span>
<a name="l00108"></a><a class="code" href="cvmx-wqe_8h.html#a344141252cad6f9a28de0142d07ea420">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_FRAGMENT    0x20</span>
<a name="l00109"></a><a class="code" href="cvmx-wqe_8h.html#a3b1a3cc57fc34ac51e20baf7f9f536f3">00109</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_OVERRUN     0x21</span>
<a name="l00110"></a><a class="code" href="cvmx-wqe_8h.html#af10f3aa48a991f0c85f9784d29211bd9">00110</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_PFCS        0x22</span>
<a name="l00111"></a><a class="code" href="cvmx-wqe_8h.html#a1798f00e1f7f24b030f263c61b79cc13">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_PUNY        0x23</span>
<a name="l00112"></a><a class="code" href="cvmx-wqe_8h.html#a6104ea2628d8331522c250fe40fdb529">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_MAL         0x24</span>
<a name="l00113"></a><a class="code" href="cvmx-wqe_8h.html#ad934af77a572a507b87192309127c064">00113</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_OVERSIZE    0x25</span>
<a name="l00114"></a><a class="code" href="cvmx-wqe_8h.html#a697f5882427a7b150a4aabf16c2787b8">00114</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_UNDERSIZE   0x26</span>
<a name="l00115"></a><a class="code" href="cvmx-wqe_8h.html#a3cc86114546586529422b515904d60e3">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L2_LENMISM     0x27</span>
<a name="l00116"></a><a class="code" href="cvmx-wqe_8h.html#a113970ba1578fb72ea101c37add07fd6">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_IP_NOT         0x41</span>
<a name="l00117"></a><a class="code" href="cvmx-wqe_8h.html#aefadfdb0fcb3331b27609ba4d34e6c88">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_IP_CHK         0x42</span>
<a name="l00118"></a><a class="code" href="cvmx-wqe_8h.html#a6cedc9d9daa06167727ba2e130b502ad">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_IP_MAL         0x43</span>
<a name="l00119"></a><a class="code" href="cvmx-wqe_8h.html#a450276a4296e601bca0c4c7c998def5c">00119</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_IP_MALD        0x44</span>
<a name="l00120"></a><a class="code" href="cvmx-wqe_8h.html#a1db30d8271a350fef20824af7f664470">00120</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_IP_HOP         0x45</span>
<a name="l00121"></a><a class="code" href="cvmx-wqe_8h.html#ab9e284f7073c50d55e1bd2b72296eea2">00121</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L4_MAL         0x61</span>
<a name="l00122"></a><a class="code" href="cvmx-wqe_8h.html#a80797ed8120a2111d476eccaaf5f1623">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L4_CHK         0x62</span>
<a name="l00123"></a><a class="code" href="cvmx-wqe_8h.html#aacd7802d22461c34c6abcec41a348779">00123</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L4_LEN         0x63</span>
<a name="l00124"></a><a class="code" href="cvmx-wqe_8h.html#ab72131bdb2e14f3f175e289ba7fe803e">00124</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_L4_PORT        0x64</span>
<a name="l00125"></a><a class="code" href="cvmx-wqe_8h.html#af41f007a5c5da1c645faf08b2b68fa11">00125</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_OPCODE_TCP_FLAG       0x65</span>
<a name="l00126"></a>00126 <span class="preprocessor"></span>
<a name="l00127"></a><a class="code" href="cvmx-wqe_8h.html#aac6282f54f90739c33fcbd17f0461d43">00127</a> <span class="preprocessor">#define CVMX_PKI_OPCODE_MAX  (1 &lt;&lt; 8) </span><span class="comment">/* The size of WORD2:OPCODE field.*/</span>
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 <span class="comment">/* Layer types in pki */</span>
<a name="l00130"></a><a class="code" href="cvmx-wqe_8h.html#a83137d8a888caf41e645a2ac4c992864">00130</a> <span class="preprocessor">#define CVMX_PKI_LTYPE_E_NONE_M       0x0</span>
<a name="l00131"></a><a class="code" href="cvmx-wqe_8h.html#a5f6c9e8393559ee8049b1662c1135a22">00131</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_ENET_M       0x1</span>
<a name="l00132"></a><a class="code" href="cvmx-wqe_8h.html#ab56a062432953d8304058a7f1ce264a7">00132</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_VLAN_M       0x2</span>
<a name="l00133"></a><a class="code" href="cvmx-wqe_8h.html#a3401ae96e730b597204bbf24e692fd06">00133</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_SNAP_PAYLD_M 0x5</span>
<a name="l00134"></a><a class="code" href="cvmx-wqe_8h.html#a37ca8dd5de5ec0d6e0e21e99fff139f6">00134</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_ARP_M        0x6</span>
<a name="l00135"></a><a class="code" href="cvmx-wqe_8h.html#af6b5d80f7270382dd44977b7bd3791ea">00135</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_RARP_M       0x7</span>
<a name="l00136"></a><a class="code" href="cvmx-wqe_8h.html#a429e1b6a04bf48a54a29eb7d2b15cb04">00136</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IP4_M        0x8</span>
<a name="l00137"></a><a class="code" href="cvmx-wqe_8h.html#ae1dc9cb0cac55e92cdb07d75e717cf10">00137</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IP4_OPT_M    0x9</span>
<a name="l00138"></a><a class="code" href="cvmx-wqe_8h.html#a02aa23d37305c890cbf6292a11e45ec8">00138</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IP6_M        0xA</span>
<a name="l00139"></a><a class="code" href="cvmx-wqe_8h.html#a130ead27bcb10e2a131a083e8e15dfd3">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IP6_OPT_M    0xB</span>
<a name="l00140"></a><a class="code" href="cvmx-wqe_8h.html#ab8eb11cc9aa71ceeee0bf03f46aca941">00140</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IPSEC_ESP_M  0xC</span>
<a name="l00141"></a><a class="code" href="cvmx-wqe_8h.html#a751b0ccd9dff51dc6b90655e5bde67b4">00141</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IPFRAG_M     0xD</span>
<a name="l00142"></a><a class="code" href="cvmx-wqe_8h.html#aff15d4fd0f6fccc246098c5dd78e9b1f">00142</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_IPCOMP_M     0xE</span>
<a name="l00143"></a><a class="code" href="cvmx-wqe_8h.html#ab26f0cc3ff3ccefcdcc7a569c4967575">00143</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_TCP_M        0x10</span>
<a name="l00144"></a><a class="code" href="cvmx-wqe_8h.html#af8719bfd3dbe11f20f6a3c7c2e94622e">00144</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_UDP_M        0x11</span>
<a name="l00145"></a><a class="code" href="cvmx-wqe_8h.html#a3bd8d3298994f88278faf81e397b421b">00145</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_SCTP_M       0x12</span>
<a name="l00146"></a><a class="code" href="cvmx-wqe_8h.html#af54245e22a81a8acae0d24b3dce6dba3">00146</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_UDP_VXLAN_M  0x13</span>
<a name="l00147"></a><a class="code" href="cvmx-wqe_8h.html#a8e18a39f9ab2bc3d2fa1b613fbbf81a1">00147</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_GRE_M        0x14</span>
<a name="l00148"></a><a class="code" href="cvmx-wqe_8h.html#ae081c8f409cdeb0fae2a4f45c7a22b3d">00148</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_NVGRE_M      0x15</span>
<a name="l00149"></a><a class="code" href="cvmx-wqe_8h.html#aab9321ca9da0393a6fbdc519864396ab">00149</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_GTP_M        0x16</span>
<a name="l00150"></a><a class="code" href="cvmx-wqe_8h.html#ac21904889899845be41c064f26c438b2">00150</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_SW28_M       0x1C</span>
<a name="l00151"></a><a class="code" href="cvmx-wqe_8h.html#adce4d6d65761d1766a93596da71ad5bc">00151</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_SW29_M       0x1D</span>
<a name="l00152"></a><a class="code" href="cvmx-wqe_8h.html#ab29e3a7acf2e78ff87d1e81ed7f85831">00152</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_SW30_M       0x1E</span>
<a name="l00153"></a><a class="code" href="cvmx-wqe_8h.html#a795965501e5833a7f9f73c3f86c1db34">00153</a> <span class="preprocessor"></span><span class="preprocessor">#define CVMX_PKI_LTYPE_E_SW31_M       0x1F</span>
<a name="l00154"></a>00154 <span class="preprocessor"></span>
<a name="l00155"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679">00155</a> <span class="keyword">enum</span> <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679">cvmx_pki_layer_type</a> {
<a name="l00156"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">00156</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>       = <a class="code" href="cvmx-wqe_8h.html#a83137d8a888caf41e645a2ac4c992864">CVMX_PKI_LTYPE_E_NONE_M</a>,
<a name="l00157"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ab3008fae648e0399dd1252d8ce3efb75">00157</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ab3008fae648e0399dd1252d8ce3efb75">CVMX_PKI_LTYPE_E_ENET</a>       = <a class="code" href="cvmx-wqe_8h.html#a5f6c9e8393559ee8049b1662c1135a22">CVMX_PKI_LTYPE_E_ENET_M</a>,
<a name="l00158"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a9cf34568ee5b045e9ee35dffb8eddd1d">00158</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a9cf34568ee5b045e9ee35dffb8eddd1d">CVMX_PKI_LTYPE_E_VLAN</a>       = <a class="code" href="cvmx-wqe_8h.html#ab56a062432953d8304058a7f1ce264a7">CVMX_PKI_LTYPE_E_VLAN_M</a>,
<a name="l00159"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a0ae122054aa7487224a70a3e33d389fa">00159</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a0ae122054aa7487224a70a3e33d389fa">CVMX_PKI_LTYPE_E_SNAP_PAYLD</a> = <a class="code" href="cvmx-wqe_8h.html#a3401ae96e730b597204bbf24e692fd06">CVMX_PKI_LTYPE_E_SNAP_PAYLD_M</a>,
<a name="l00160"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679adb981613883b31556d85b17617d702f7">00160</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679adb981613883b31556d85b17617d702f7">CVMX_PKI_LTYPE_E_ARP</a>        = <a class="code" href="cvmx-wqe_8h.html#a37ca8dd5de5ec0d6e0e21e99fff139f6">CVMX_PKI_LTYPE_E_ARP_M</a>,
<a name="l00161"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a2285abced84e000825711f279cad8aa3">00161</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a2285abced84e000825711f279cad8aa3">CVMX_PKI_LTYPE_E_RARP</a>       = <a class="code" href="cvmx-wqe_8h.html#af6b5d80f7270382dd44977b7bd3791ea">CVMX_PKI_LTYPE_E_RARP_M</a>,
<a name="l00162"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">00162</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>        = <a class="code" href="cvmx-wqe_8h.html#a429e1b6a04bf48a54a29eb7d2b15cb04">CVMX_PKI_LTYPE_E_IP4_M</a>,
<a name="l00163"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a3db469db33cf1018720f52d780a28424">00163</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a3db469db33cf1018720f52d780a28424">CVMX_PKI_LTYPE_E_IP4_OPT</a>    = <a class="code" href="cvmx-wqe_8h.html#ae1dc9cb0cac55e92cdb07d75e717cf10">CVMX_PKI_LTYPE_E_IP4_OPT_M</a>,
<a name="l00164"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a287e03c1180695755087a4260329ac8a">00164</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a287e03c1180695755087a4260329ac8a">CVMX_PKI_LTYPE_E_IP6</a>        = <a class="code" href="cvmx-wqe_8h.html#a02aa23d37305c890cbf6292a11e45ec8">CVMX_PKI_LTYPE_E_IP6_M</a>,
<a name="l00165"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679af78d1e16cab3253f5c25142f62ff0736">00165</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679af78d1e16cab3253f5c25142f62ff0736">CVMX_PKI_LTYPE_E_IP6_OPT</a>    = <a class="code" href="cvmx-wqe_8h.html#a130ead27bcb10e2a131a083e8e15dfd3">CVMX_PKI_LTYPE_E_IP6_OPT_M</a>,
<a name="l00166"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a5f508fbe408556003e1080cb3d2a127f">00166</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a5f508fbe408556003e1080cb3d2a127f">CVMX_PKI_LTYPE_E_IPSEC_ESP</a>  = <a class="code" href="cvmx-wqe_8h.html#ab8eb11cc9aa71ceeee0bf03f46aca941">CVMX_PKI_LTYPE_E_IPSEC_ESP_M</a>,
<a name="l00167"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679abeb689d9227d55ba16c276c907f69bd4">00167</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679abeb689d9227d55ba16c276c907f69bd4">CVMX_PKI_LTYPE_E_IPFRAG</a>     = <a class="code" href="cvmx-wqe_8h.html#a751b0ccd9dff51dc6b90655e5bde67b4">CVMX_PKI_LTYPE_E_IPFRAG_M</a>,
<a name="l00168"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a751e8d9ca33f130beef9afdc6add1a68">00168</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a751e8d9ca33f130beef9afdc6add1a68">CVMX_PKI_LTYPE_E_IPCOMP</a>     = <a class="code" href="cvmx-wqe_8h.html#aff15d4fd0f6fccc246098c5dd78e9b1f">CVMX_PKI_LTYPE_E_IPCOMP_M</a>,
<a name="l00169"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac8a5a88eb5091c2cf4cee5df00d61784">00169</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac8a5a88eb5091c2cf4cee5df00d61784">CVMX_PKI_LTYPE_E_TCP</a>        = <a class="code" href="cvmx-wqe_8h.html#ab26f0cc3ff3ccefcdcc7a569c4967575">CVMX_PKI_LTYPE_E_TCP_M</a>,
<a name="l00170"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a8ed3c1771823ec89dc8bcf9ed5756d0b">00170</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a8ed3c1771823ec89dc8bcf9ed5756d0b">CVMX_PKI_LTYPE_E_UDP</a>        = <a class="code" href="cvmx-wqe_8h.html#af8719bfd3dbe11f20f6a3c7c2e94622e">CVMX_PKI_LTYPE_E_UDP_M</a>,
<a name="l00171"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679adfc14e82984fcf35b2cfecd7043e1e4d">00171</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679adfc14e82984fcf35b2cfecd7043e1e4d">CVMX_PKI_LTYPE_E_SCTP</a>       = <a class="code" href="cvmx-wqe_8h.html#a3bd8d3298994f88278faf81e397b421b">CVMX_PKI_LTYPE_E_SCTP_M</a>,
<a name="l00172"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a9e0352ed3376bd6b0a41063ed6bf371f">00172</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a9e0352ed3376bd6b0a41063ed6bf371f">CVMX_PKI_LTYPE_E_UDP_VXLAN</a>  = <a class="code" href="cvmx-wqe_8h.html#af54245e22a81a8acae0d24b3dce6dba3">CVMX_PKI_LTYPE_E_UDP_VXLAN_M</a>,
<a name="l00173"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7b5616fef454e904b9396a19e20ed2cb">00173</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7b5616fef454e904b9396a19e20ed2cb">CVMX_PKI_LTYPE_E_GRE</a>        = <a class="code" href="cvmx-wqe_8h.html#a8e18a39f9ab2bc3d2fa1b613fbbf81a1">CVMX_PKI_LTYPE_E_GRE_M</a>,
<a name="l00174"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a47b73d279534d51761104c0c3ef28536">00174</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a47b73d279534d51761104c0c3ef28536">CVMX_PKI_LTYPE_E_NVGRE</a>      = <a class="code" href="cvmx-wqe_8h.html#ae081c8f409cdeb0fae2a4f45c7a22b3d">CVMX_PKI_LTYPE_E_NVGRE_M</a>,
<a name="l00175"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac404487be2cf682003687bea8039df73">00175</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac404487be2cf682003687bea8039df73">CVMX_PKI_LTYPE_E_GTP</a>        = <a class="code" href="cvmx-wqe_8h.html#aab9321ca9da0393a6fbdc519864396ab">CVMX_PKI_LTYPE_E_GTP_M</a>,
<a name="l00176"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac56f9c14a8b1e90f9ec10e8955c87209">00176</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac56f9c14a8b1e90f9ec10e8955c87209">CVMX_PKI_LTYPE_E_SW28</a>       = <a class="code" href="cvmx-wqe_8h.html#ac21904889899845be41c064f26c438b2">CVMX_PKI_LTYPE_E_SW28_M</a>,
<a name="l00177"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7e3a4061145a31b3b698c4e0332db14f">00177</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7e3a4061145a31b3b698c4e0332db14f">CVMX_PKI_LTYPE_E_SW29</a>       = <a class="code" href="cvmx-wqe_8h.html#adce4d6d65761d1766a93596da71ad5bc">CVMX_PKI_LTYPE_E_SW29_M</a>,
<a name="l00178"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a4e7a7b5ce7c2fbfc1b7b0de3fb457659">00178</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a4e7a7b5ce7c2fbfc1b7b0de3fb457659">CVMX_PKI_LTYPE_E_SW30</a>       = <a class="code" href="cvmx-wqe_8h.html#ab29e3a7acf2e78ff87d1e81ed7f85831">CVMX_PKI_LTYPE_E_SW30_M</a>,
<a name="l00179"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ad183e3effb92ed4343e43b5d72c2b5a1">00179</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ad183e3effb92ed4343e43b5d72c2b5a1">CVMX_PKI_LTYPE_E_SW31</a>       = <a class="code" href="cvmx-wqe_8h.html#a795965501e5833a7f9f73c3f86c1db34">CVMX_PKI_LTYPE_E_SW31_M</a>,
<a name="l00180"></a><a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679aecf367693e5cee0c3540372d65afb0da">00180</a>     <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679aecf367693e5cee0c3540372d65afb0da">CVMX_PKI_LTYPE_E_MAX</a>        = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ad183e3effb92ed4343e43b5d72c2b5a1">CVMX_PKI_LTYPE_E_SW31</a>
<a name="l00181"></a>00181 };
<a name="l00182"></a>00182 
<a name="l00183"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html">00183</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00184"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#a81ae1b6be1ef1d97baf54e82b0ad2d27">00184</a>     uint64_t <a class="code" href="unioncvmx__wpse__status.html#a72a345c8aa7f1a291176cd4d01adcb7e">u64</a>;
<a name="l00185"></a>00185 <span class="preprocessor">#ifdef __BIG_ENDIAN_BITFIELD</span>
<a name="l00186"></a>00186 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00187"></a>00187         uint64_t ptr_vlan:8; <span class="comment">/**&lt; Contains a byte pointer to the first byte</span>
<a name="l00188"></a>00188 <span class="comment">            of the VLAN ID field for the first or second VLAN. */</span>
<a name="l00189"></a>00189         uint64_t ptr_layer_g:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer G */</span>
<a name="l00190"></a>00190         uint64_t ptr_layer_f:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer F */</span>
<a name="l00191"></a>00191         uint64_t ptr_layer_e:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer E */</span>
<a name="l00192"></a>00192         uint64_t ptr_layer_d:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer D */</span>
<a name="l00193"></a>00193         uint64_t ptr_layer_c:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer C */</span>
<a name="l00194"></a>00194         uint64_t ptr_layer_b:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer B */</span>
<a name="l00195"></a>00195         uint64_t ptr_layer_a:8; <span class="comment">/**&lt; Contains a byte pointer to the start of layer A */</span>
<a name="l00196"></a>00196     };
<a name="l00197"></a>00197 <span class="preprocessor">#else</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00199"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#ac026c590b9b8c8a074f22db3f8e4e15b">00199</a>         uint64_t ptr_layer_a:8;
<a name="l00200"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#a2965fa37d993dd8bf03eb730164a9233">00200</a>         uint64_t ptr_layer_b:8;
<a name="l00201"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#a6e19d7df8be7112ba8961233f0f52171">00201</a>         uint64_t ptr_layer_c:8;
<a name="l00202"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#ac0df1e8ec14ccf1c0fd690d22180b505">00202</a>         uint64_t ptr_layer_d:8;
<a name="l00203"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#a3587ec6bd6594e2c31079c40558935c0">00203</a>         uint64_t ptr_layer_e:8;
<a name="l00204"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#ae3b80dbe7d861de14cda4808de94eaa5">00204</a>         uint64_t ptr_layer_f:8;
<a name="l00205"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#a648022795255d51a05389d5bc597d882">00205</a>         uint64_t ptr_layer_g:8;
<a name="l00206"></a><a class="code" href="unioncvmx__pki__wqe__word4__t.html#ab0a19352c7da3c69e3042b6415fb7f5b">00206</a>         uint64_t ptr_vlan:8;
<a name="l00207"></a>00207     };
<a name="l00208"></a>00208 <span class="preprocessor">#endif</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>} <a class="code" href="unioncvmx__pki__wqe__word4__t.html">cvmx_pki_wqe_word4_t</a>;
<a name="l00210"></a>00210 <span class="comment"></span>
<a name="l00211"></a>00211 <span class="comment">/**</span>
<a name="l00212"></a>00212 <span class="comment"> * HW decode / err_code in work queue entry</span>
<a name="l00213"></a>00213 <span class="comment"> */</span>
<a name="l00214"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html">00214</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00215"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a1e7ffbd2461c1b613e3ca680b8c95434">00215</a>     uint64_t u64;
<a name="l00216"></a>00216 <span class="preprocessor">#ifdef __BIG_ENDIAN_BITFIELD</span>
<a name="l00217"></a>00217 <span class="preprocessor"></span><span class="comment">    /** Use this struct if the hardware determines that the packet is IP */</span>
<a name="l00218"></a>00218     <span class="keyword">struct </span>{
<a name="l00219"></a>00219         uint64_t bufs:8; <span class="comment">/**&lt; HW sets this to the number of buffers used by this packet */</span>
<a name="l00220"></a>00220         uint64_t ip_offset:8; <span class="comment">/**&lt; HW sets to the number of L2 bytes prior to the IP */</span>
<a name="l00221"></a>00221         uint64_t vlan_valid:1; <span class="comment">/**&lt; set to 1 if we found DSA/VLAN in the L2 */</span>
<a name="l00222"></a>00222         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the DSA/VLAN tag is stacked */</span>
<a name="l00223"></a>00223         uint64_t unassigned:1;
<a name="l00224"></a>00224         uint64_t vlan_cfi:1; <span class="comment">/**&lt; HW sets to the DSA/VLAN CFI flag (valid when vlan_valid) */</span>
<a name="l00225"></a>00225         uint64_t vlan_id:12; <span class="comment">/**&lt; HW sets to the DSA/VLAN_ID field (valid when vlan_valid) */</span>
<a name="l00226"></a>00226         uint64_t varies:12; <span class="comment">/**&lt; 38xx and 68xx have different definitions.  */</span>
<a name="l00227"></a>00227         uint64_t dec_ipcomp:1; <span class="comment">/**&lt; the packet needs to be decompressed */</span>
<a name="l00228"></a>00228         uint64_t tcp_or_udp:1; <span class="comment">/**&lt; the packet is either TCP or UDP */</span>
<a name="l00229"></a>00229         uint64_t dec_ipsec:1; <span class="comment">/**&lt; the packet needs to be decrypted (ESP or AH) */</span>
<a name="l00230"></a>00230         uint64_t is_v6:1; <span class="comment">/**&lt; The packet is IPv6 */</span>
<a name="l00231"></a>00231         <span class="comment">/* (rcv_error, not_IP, IP_exc, is_frag, L4_error, software, etc.) */</span>
<a name="l00232"></a>00232         uint64_t software:1; <span class="comment">/**&lt; reserved for software use, hardware will</span>
<a name="l00233"></a>00233 <span class="comment">            clear on packet creation */</span>
<a name="l00234"></a>00234         <span class="comment">/* Exceptional conditions below */</span>
<a name="l00235"></a>00235         uint64_t L4_error:1; <span class="comment">/**&lt; The receive interface hardware detected an L4 error</span>
<a name="l00236"></a>00236 <span class="comment">            (Only applies, if !is_frag)</span>
<a name="l00237"></a>00237 <span class="comment">            (Only applies, if !rcv_error &amp;&amp; !not_IP &amp;&amp; !IP_exc &amp;&amp; !is_frag)</span>
<a name="l00238"></a>00238 <span class="comment">            failure indicated in err_code below, decode:</span>
<a name="l00239"></a>00239 <span class="comment">            - 1 = Malformed L4</span>
<a name="l00240"></a>00240 <span class="comment">            - 2 = L4 Checksum Error: the L4 checksum value is</span>
<a name="l00241"></a>00241 <span class="comment">            - 3 = UDP Length Error: The UDP length field would make the UDP data</span>
<a name="l00242"></a>00242 <span class="comment">                longer than what remains in the IP packet (as defined by</span>
<a name="l00243"></a>00243 <span class="comment">                the IP header length field).</span>
<a name="l00244"></a>00244 <span class="comment">            - 4 = Bad L4 Port: either the source or destination TCP/UDP port is 0.</span>
<a name="l00245"></a>00245 <span class="comment">            - 8 = TCP FIN Only: the packet is TCP and only the FIN flag set.</span>
<a name="l00246"></a>00246 <span class="comment">            - 9 = TCP No Flags: the packet is TCP and no flags are set.</span>
<a name="l00247"></a>00247 <span class="comment">            - 10 = TCP FIN RST: the packet is TCP and both FIN and RST are set.</span>
<a name="l00248"></a>00248 <span class="comment">            - 11 = TCP SYN URG: the packet is TCP and both SYN and URG are set.</span>
<a name="l00249"></a>00249 <span class="comment">            - 12 = TCP SYN RST: the packet is TCP and both SYN and RST are set.</span>
<a name="l00250"></a>00250 <span class="comment">            - 13 = TCP SYN FIN: the packet is TCP and both SYN and FIN are set. */</span>
<a name="l00251"></a>00251         uint64_t is_frag:1; <span class="comment">/**&lt; Set if the packet is a fragment */</span>
<a name="l00252"></a>00252         uint64_t IP_exc:1; <span class="comment">/**&lt; The receive interface hardware detected</span>
<a name="l00253"></a>00253 <span class="comment">            an IP error / exception.</span>
<a name="l00254"></a>00254 <span class="comment">            (Only applies if !rcv_error &amp;&amp; !not_IP).</span>
<a name="l00255"></a>00255 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00256"></a>00256 <span class="comment">            - 1 = Not IP: the IP version field is neither 4 nor 6.</span>
<a name="l00257"></a>00257 <span class="comment">            - 2 = IPv4 Header Checksum Error: the IPv4 header has a checksum violation.</span>
<a name="l00258"></a>00258 <span class="comment">            - 3 = IP Malformed Header: the packet is not long enough to contain the IP header.</span>
<a name="l00259"></a>00259 <span class="comment">            - 4 = IP Malformed: the packet is not long enough to contain the bytes</span>
<a name="l00260"></a>00260 <span class="comment">                indicated by the IP header. Pad is allowed.</span>
<a name="l00261"></a>00261 <span class="comment">            - 5 = IP TTL Hop: the IPv4 TTL field or the IPv6 Hop Count field are zero.</span>
<a name="l00262"></a>00262 <span class="comment">            - 6 = IP Options */</span>
<a name="l00263"></a>00263         uint64_t is_bcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a broadcast */</span>
<a name="l00264"></a>00264         uint64_t is_mcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a multi-cast */</span>
<a name="l00265"></a>00265         uint64_t not_IP:1; <span class="comment">/**&lt; Set if the packet may not be IP (must be zero in this case) */</span>
<a name="l00266"></a>00266         uint64_t rcv_error:1; <span class="comment">/**&lt; the receive interface hardware detected</span>
<a name="l00267"></a>00267 <span class="comment">            a receive error (must be zero in this case) */</span>
<a name="l00268"></a>00268         <span class="comment">/* Lower err_code = first-level descriptor of the work */</span>
<a name="l00269"></a>00269         <span class="comment">/* Zero for packet submitted by hardware that isn&apos;t on the slow path */</span>
<a name="l00270"></a>00270         uint64_t err_code:8; <span class="comment">/**&lt; Type is cvmx_pip_err_t */</span>
<a name="l00271"></a>00271     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00272"></a>00272     <span class="keyword">struct </span>{
<a name="l00273"></a>00273         uint64_t bufs:8; <span class="comment">/**&lt; HW sets this to the number of buffers used by this packet */</span>
<a name="l00274"></a>00274         uint64_t ip_offset:8; <span class="comment">/**&lt; HW sets to the number of L2 bytes prior to the IP */</span>
<a name="l00275"></a>00275         uint64_t vlan_valid:1; <span class="comment">/**&lt; Set to 1 if we found DSA/VLAN in the L2 */</span>
<a name="l00276"></a>00276         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the DSA/VLAN tag is stacked */</span>
<a name="l00277"></a>00277         uint64_t unassigned:1;
<a name="l00278"></a>00278         uint64_t vlan_cfi:1; <span class="comment">/**&lt; HW sets to the DSA/VLAN CFI flag (valid when vlan_valid) */</span>
<a name="l00279"></a>00279         uint64_t vlan_id:12; <span class="comment">/**&lt; HW sets to the DSA/VLAN_ID field (valid when vlan_valid) */</span>
<a name="l00280"></a>00280         uint64_t port:12; <span class="comment">/**&lt; MAC/PIP port number. */</span>
<a name="l00281"></a>00281         uint64_t dec_ipcomp:1; <span class="comment">/**&lt; The packet needs to be decompressed */</span>
<a name="l00282"></a>00282         uint64_t tcp_or_udp:1; <span class="comment">/**&lt; The packet is either TCP or UDP */</span>
<a name="l00283"></a>00283         uint64_t dec_ipsec:1; <span class="comment">/**&lt; The packet needs to be decrypted (ESP or AH) */</span>
<a name="l00284"></a>00284         uint64_t is_v6:1; <span class="comment">/**&lt; The packet is IPv6 */</span>
<a name="l00285"></a>00285         <span class="comment">/* (rcv_error, not_IP, IP_exc, is_frag, L4_error, software, etc.) */</span>
<a name="l00286"></a>00286         uint64_t software:1; <span class="comment">/**&lt; Reserved for software use,</span>
<a name="l00287"></a>00287 <span class="comment">            hardware will clear on packet creation */</span>
<a name="l00288"></a>00288         <span class="comment">/* Exceptional conditions below */</span>
<a name="l00289"></a>00289         uint64_t L4_error:1; <span class="comment">/**&lt; The receive interface hardware detected an L4 error.</span>
<a name="l00290"></a>00290 <span class="comment">            (Only applies if !is_frag)</span>
<a name="l00291"></a>00291 <span class="comment">            (Only applies if !rcv_error &amp;&amp; !not_IP &amp;&amp; !IP_exc &amp;&amp; !is_frag)</span>
<a name="l00292"></a>00292 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00293"></a>00293 <span class="comment">            - 1 = Malformed L4</span>
<a name="l00294"></a>00294 <span class="comment">            - 2 = L4 Checksum Error: the L4 checksum value is</span>
<a name="l00295"></a>00295 <span class="comment">            - 3 = UDP Length Error: The UDP length field would make the UDP data</span>
<a name="l00296"></a>00296 <span class="comment">                longer than what remains in the IP packet</span>
<a name="l00297"></a>00297 <span class="comment">                (as defined by the IP header length field).</span>
<a name="l00298"></a>00298 <span class="comment">            - 4 = Bad L4 Port: either the source or destination TCP/UDP port is 0.</span>
<a name="l00299"></a>00299 <span class="comment">            - 8 = TCP FIN Only: the packet is TCP and only the FIN flag set.</span>
<a name="l00300"></a>00300 <span class="comment">            - 9 = TCP No Flags: the packet is TCP and no flags are set.</span>
<a name="l00301"></a>00301 <span class="comment">            - 10 = TCP FIN RST: the packet is TCP and both FIN and RST are set.</span>
<a name="l00302"></a>00302 <span class="comment">            - 11 = TCP SYN URG: the packet is TCP and both SYN and URG are set.</span>
<a name="l00303"></a>00303 <span class="comment">            - 12 = TCP SYN RST: the packet is TCP and both SYN and RST are set.</span>
<a name="l00304"></a>00304 <span class="comment">            - 13 = TCP SYN FIN: the packet is TCP and both SYN and FIN are set. */</span>
<a name="l00305"></a>00305         uint64_t is_frag:1; <span class="comment">/**&lt; Set if the packet is a fragment */</span>
<a name="l00306"></a>00306         uint64_t IP_exc:1; <span class="comment">/**&lt; The receive interface hardware detected</span>
<a name="l00307"></a>00307 <span class="comment">            an IP error / exception.</span>
<a name="l00308"></a>00308 <span class="comment">            (Only applies if !rcv_error &amp;&amp; !not_IP)</span>
<a name="l00309"></a>00309 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00310"></a>00310 <span class="comment">            - 1 = Not IP: the IP version field is neither 4 nor 6.</span>
<a name="l00311"></a>00311 <span class="comment">            - 2 = IPv4 Header Checksum Error: the IPv4 header has a checksum violation.</span>
<a name="l00312"></a>00312 <span class="comment">            - 3 = IP Malformed Header: the packet is not long enough to contain the IP header.</span>
<a name="l00313"></a>00313 <span class="comment">            - 4 = IP Malformed: the packet is not long enough to contain the bytes</span>
<a name="l00314"></a>00314 <span class="comment">                indicated by the IP header. Pad is allowed.</span>
<a name="l00315"></a>00315 <span class="comment">            - 5 = IP TTL Hop: the IPv4 TTL field or the IPv6 Hop Count field are zero.</span>
<a name="l00316"></a>00316 <span class="comment">            - 6 = IP Options */</span>
<a name="l00317"></a>00317         uint64_t is_bcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a broadcast */</span>
<a name="l00318"></a>00318         uint64_t is_mcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a multi-cast */</span>
<a name="l00319"></a>00319         uint64_t not_IP:1; <span class="comment">/**&lt; Set if the packet may not be IP (must be zero in this case) */</span>
<a name="l00320"></a>00320         uint64_t rcv_error:1; <span class="comment">/**&lt; The receive interface hardware detected a receive error</span>
<a name="l00321"></a>00321 <span class="comment">            (must be zero in this case) */</span>
<a name="l00322"></a>00322             <span class="comment">/* Lower err_code = first-level descriptor of the work */</span>
<a name="l00323"></a>00323             <span class="comment">/* Zero for packet submitted by hardware that isn&apos;t on the slow path */</span>
<a name="l00324"></a>00324         uint64_t err_code:8; <span class="comment">/**&lt; type is cvmx_pip_err_t */</span>
<a name="l00325"></a>00325     } s_cn68xx;
<a name="l00326"></a>00326     <span class="keyword">struct </span>{
<a name="l00327"></a>00327         uint64_t bufs:8; <span class="comment">/**&lt; HW sets this to the number of buffers used by this packet */</span>
<a name="l00328"></a>00328         uint64_t ip_offset:8; <span class="comment">/**&lt; HW sets to the number of L2 bytes prior to the IP */</span>
<a name="l00329"></a>00329         uint64_t vlan_valid:1; <span class="comment">/**&lt; set to 1 if we found DSA/VLAN in the L2 */</span>
<a name="l00330"></a>00330         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the DSA/VLAN tag is stacked */</span>
<a name="l00331"></a>00331         uint64_t unassigned:1;
<a name="l00332"></a>00332         uint64_t vlan_cfi:1; <span class="comment">/**&lt; HW sets to the DSA/VLAN CFI flag (valid when vlan_valid) */</span>
<a name="l00333"></a>00333         uint64_t vlan_id:12; <span class="comment">/**&lt; HW sets to the DSA/VLAN_ID field (valid when vlan_valid) */</span>
<a name="l00334"></a>00334         uint64_t pr:4; <span class="comment">/**&lt; Ring Identifier (if PCIe). Requires PIP_GBL_CTL[RING_EN]=1 */</span>
<a name="l00335"></a>00335         uint64_t unassigned2a:4;
<a name="l00336"></a>00336         uint64_t unassigned2:4;
<a name="l00337"></a>00337         uint64_t dec_ipcomp:1; <span class="comment">/**&lt; the packet needs to be decompressed */</span>
<a name="l00338"></a>00338         uint64_t tcp_or_udp:1; <span class="comment">/**&lt; the packet is either TCP or UDP */</span>
<a name="l00339"></a>00339         uint64_t dec_ipsec:1; <span class="comment">/**&lt; the packet needs to be decrypted (ESP or AH) */</span>
<a name="l00340"></a>00340         uint64_t is_v6:1; <span class="comment">/**&lt; the packet is IPv6 */</span>
<a name="l00341"></a>00341         <span class="comment">/* (rcv_error, not_IP, IP_exc, is_frag, L4_error, software, etc.) */</span>
<a name="l00342"></a>00342         uint64_t software:1; <span class="comment">/**&lt; reserved for software use,</span>
<a name="l00343"></a>00343 <span class="comment">            hardware will clear on packet creation */</span>
<a name="l00344"></a>00344         <span class="comment">/* Exceptional conditions below */</span>
<a name="l00345"></a>00345         uint64_t L4_error:1; <span class="comment">/**&lt; The receive interface hardware detected an L4 error.</span>
<a name="l00346"></a>00346 <span class="comment">            (Only applies if !is_frag)</span>
<a name="l00347"></a>00347 <span class="comment">            (Only applies if !rcv_error &amp;&amp; !not_IP &amp;&amp; !IP_exc &amp;&amp; !is_frag)</span>
<a name="l00348"></a>00348 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00349"></a>00349 <span class="comment">            - 1 = Malformed L4</span>
<a name="l00350"></a>00350 <span class="comment">            - 2 = L4 Checksum Error: the L4 checksum value is</span>
<a name="l00351"></a>00351 <span class="comment">            - 3 = UDP Length Error: The UDP length field would make the UDP data</span>
<a name="l00352"></a>00352 <span class="comment">                longer than what remains in the IP packet</span>
<a name="l00353"></a>00353 <span class="comment">                (as defined by the IP header length field).</span>
<a name="l00354"></a>00354 <span class="comment">            - 4 = Bad L4 Port: either the source or destination TCP/UDP port is 0.</span>
<a name="l00355"></a>00355 <span class="comment">            - 8 = TCP FIN Only: the packet is TCP and only the FIN flag set.</span>
<a name="l00356"></a>00356 <span class="comment">            - 9 = TCP No Flags: the packet is TCP and no flags are set.</span>
<a name="l00357"></a>00357 <span class="comment">            - 10 = TCP FIN RST: the packet is TCP and both FIN and RST are set.</span>
<a name="l00358"></a>00358 <span class="comment">            - 11 = TCP SYN URG: the packet is TCP and both SYN and URG are set.</span>
<a name="l00359"></a>00359 <span class="comment">            - 12 = TCP SYN RST: the packet is TCP and both SYN and RST are set.</span>
<a name="l00360"></a>00360 <span class="comment">            - 13 = TCP SYN FIN: the packet is TCP and both SYN and FIN are set. */</span>
<a name="l00361"></a>00361         uint64_t is_frag:1; <span class="comment">/**&lt; Set if the packet is a fragment */</span>
<a name="l00362"></a>00362         uint64_t IP_exc:1; <span class="comment">/**&lt; The receive interface hardware detected</span>
<a name="l00363"></a>00363 <span class="comment">            an IP error / exception.</span>
<a name="l00364"></a>00364 <span class="comment">            (Only applies if !rcv_error &amp;&amp; !not_IP)</span>
<a name="l00365"></a>00365 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00366"></a>00366 <span class="comment">            - 1 = Not IP: the IP version field is neither 4 nor 6.</span>
<a name="l00367"></a>00367 <span class="comment">            - 2 = IPv4 Header Checksum Error: the IPv4 header has a checksum violation.</span>
<a name="l00368"></a>00368 <span class="comment">            - 3 = IP Malformed Header: the packet is not long enough to contain the IP header.</span>
<a name="l00369"></a>00369 <span class="comment">            - 4 = IP Malformed: the packet is not long enough to contain the bytes</span>
<a name="l00370"></a>00370 <span class="comment">                indicated by the IP header. Pad is allowed.</span>
<a name="l00371"></a>00371 <span class="comment">            - 5 = IP TTL Hop: the IPv4 TTL field or the IPv6 Hop Count field are zero.</span>
<a name="l00372"></a>00372 <span class="comment">            - 6 = IP Options */</span>
<a name="l00373"></a>00373         uint64_t is_bcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a broadcast */</span>
<a name="l00374"></a>00374         uint64_t is_mcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a multi-cast */</span>
<a name="l00375"></a>00375         uint64_t not_IP:1; <span class="comment">/**&lt; Set if the packet may not be IP (must be zero in this case) */</span>
<a name="l00376"></a>00376         uint64_t rcv_error:1; <span class="comment">/**&lt; The receive interface hardware detected</span>
<a name="l00377"></a>00377 <span class="comment">            a receive error (must be zero in this case) */</span>
<a name="l00378"></a>00378             <span class="comment">/* Lower err_code = first-level descriptor of the work */</span>
<a name="l00379"></a>00379             <span class="comment">/* Zero for packet submitted by hardware that isn&apos;t on the slow path */</span>
<a name="l00380"></a>00380         uint64_t err_code:8; <span class="comment">/**&lt; type is cvmx_pip_err_t */</span>
<a name="l00381"></a>00381     } s_cn38xx;<span class="comment"></span>
<a name="l00382"></a>00382 <span class="comment">    /**&lt; Use this to get at the 16 vlan bits */</span>
<a name="l00383"></a>00383     <span class="keyword">struct </span>{
<a name="l00384"></a>00384         uint64_t unused1:16;
<a name="l00385"></a>00385         uint64_t vlan:16;
<a name="l00386"></a>00386         uint64_t unused2:32;
<a name="l00387"></a>00387     } svlan;<span class="comment"></span>
<a name="l00388"></a>00388 <span class="comment">    /**&lt; Use this struct if the hardware could not determine that the packet is ip */</span>
<a name="l00389"></a>00389     <span class="keyword">struct </span>{
<a name="l00390"></a>00390         uint64_t bufs:8; <span class="comment">/**&lt; HW sets this to the number of buffers used by this packet */</span>
<a name="l00391"></a>00391         uint64_t unused:8;
<a name="l00392"></a>00392         uint64_t vlan_valid:1; <span class="comment">/**&lt; set to 1 if we found DSA/VLAN in the L2 */</span>
<a name="l00393"></a>00393         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the DSA/VLAN tag is stacked */</span>
<a name="l00394"></a>00394         uint64_t unassigned:1;
<a name="l00395"></a>00395         uint64_t vlan_cfi:1; <span class="comment">/**&lt; HW sets to the DSA/VLAN CFI flag (valid when vlan_valid) */</span>
<a name="l00396"></a>00396         uint64_t vlan_id:12; <span class="comment">/**&lt; HW sets to the DSA/VLAN_ID field (valid when vlan_valid) */</span>
<a name="l00397"></a>00397         uint64_t varies:12; <span class="comment">/**&lt; 38xx and 68xx have different definitions.  */</span>
<a name="l00398"></a>00398         uint64_t unassigned2:4;
<a name="l00399"></a>00399         uint64_t software:1; <span class="comment">/**&lt; Reserved for software use,</span>
<a name="l00400"></a>00400 <span class="comment">            hardware will clear on packet creation */</span>
<a name="l00401"></a>00401         uint64_t unassigned3:1;
<a name="l00402"></a>00402         uint64_t is_rarp:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is rarp */</span>
<a name="l00403"></a>00403         uint64_t is_arp:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is arp */</span>
<a name="l00404"></a>00404         uint64_t is_bcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a broadcast */</span>
<a name="l00405"></a>00405         uint64_t is_mcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a multi-cast */</span>
<a name="l00406"></a>00406         uint64_t not_IP:1; <span class="comment">/**&lt; Set if the packet may not be IP (must be one in this case) */</span>
<a name="l00407"></a>00407         uint64_t rcv_error:1; <span class="comment">/**&lt; The receive interface hardware detected a receive error.</span>
<a name="l00408"></a>00408 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00409"></a>00409 <span class="comment">            - 1 = partial error: a packet was partially received, but internal</span>
<a name="l00410"></a>00410 <span class="comment">                buffering / bandwidth was not adequate to receive the entire packet.</span>
<a name="l00411"></a>00411 <span class="comment">            - 2 = jabber error: the RGMII packet was too large and is truncated.</span>
<a name="l00412"></a>00412 <span class="comment">            - 3 = overrun error: the RGMII packet is longer than allowed and had an FCS error.</span>
<a name="l00413"></a>00413 <span class="comment">            - 4 = oversize error: the RGMII packet is longer than allowed.</span>
<a name="l00414"></a>00414 <span class="comment">            - 5 = alignment error: the RGMII packet is not an integer number of bytes</span>
<a name="l00415"></a>00415 <span class="comment">                and had an FCS error (100M and 10M only).</span>
<a name="l00416"></a>00416 <span class="comment">            - 6 = fragment error: the RGMII packet is shorter than allowed and had an FCS error.</span>
<a name="l00417"></a>00417 <span class="comment">            - 7 = GMX FCS error: the RGMII packet had an FCS error.</span>
<a name="l00418"></a>00418 <span class="comment">            - 8 = undersize error: the RGMII packet is shorter than allowed.</span>
<a name="l00419"></a>00419 <span class="comment">            - 9 = extend error: the RGMII packet had an extend error.</span>
<a name="l00420"></a>00420 <span class="comment">            - 10 = length mismatch error: the RGMII packet had a length that did not</span>
<a name="l00421"></a>00421 <span class="comment">                match the length field in the L2 HDR.</span>
<a name="l00422"></a>00422 <span class="comment">            - 11 = RGMII RX error/SPI4 DIP4 Error: the RGMII packet had one or more data</span>
<a name="l00423"></a>00423 <span class="comment">                reception errors (RXERR) or the SPI4 packet had one or more DIP4 errors.</span>
<a name="l00424"></a>00424 <span class="comment">            - 12 = RGMII skip error/SPI4 Abort Error: the RGMII packet was not large enough</span>
<a name="l00425"></a>00425 <span class="comment">                to cover the skipped bytes or the SPI4 packet was terminated with an About EOPS.</span>
<a name="l00426"></a>00426 <span class="comment">            - 13 = RGMII nibble error/SPI4 Port NXA Error: the RGMII packet had a studder</span>
<a name="l00427"></a>00427 <span class="comment">                error (data not repeated - 10/100M only) or the SPI4 packet was sent to an NXA.</span>
<a name="l00428"></a>00428 <span class="comment">            - 16 = FCS error: a SPI4.2 packet had an FCS error.</span>
<a name="l00429"></a>00429 <span class="comment">            - 17 = Skip error: a packet was not large enough to cover the skipped bytes.</span>
<a name="l00430"></a>00430 <span class="comment">            - 18 = L2 header malformed: the packet is not long enough to contain the L2 */</span>
<a name="l00431"></a>00431         <span class="comment">/* Lower err_code = first-level descriptor of the work */</span>
<a name="l00432"></a>00432         <span class="comment">/* Zero for packet submitted by hardware that isn&apos;t on the slow path */</span>
<a name="l00433"></a>00433         uint64_t err_code:8; <span class="comment">/* type is cvmx_pip_err_t (union, so can&apos;t use directly */</span>
<a name="l00434"></a>00434     } snoip;
<a name="l00435"></a>00435     <span class="keyword">struct </span>{
<a name="l00436"></a>00436         uint64_t bufs:8; <span class="comment">/**&lt; HW sets this to the number of buffers used by this packet */</span>
<a name="l00437"></a>00437         uint64_t unused:8;
<a name="l00438"></a>00438         uint64_t vlan_valid:1; <span class="comment">/**&lt; Set to 1 if we found DSA/VLAN in the L2 */</span>
<a name="l00439"></a>00439         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the DSA/VLAN tag is stacked */</span>
<a name="l00440"></a>00440         uint64_t unassigned:1;
<a name="l00441"></a>00441         uint64_t vlan_cfi:1; <span class="comment">/**&lt; HW sets to the DSA/VLAN CFI flag (valid when vlan_valid) */</span>
<a name="l00442"></a>00442         uint64_t vlan_id:12; <span class="comment">/**&lt; HW sets to the DSA/VLAN_ID field (valid when vlan_valid) */</span>
<a name="l00443"></a>00443         uint64_t port:12; <span class="comment">/**&lt; MAC/PIP port number.  */</span>
<a name="l00444"></a>00444         uint64_t unassigned2:4;
<a name="l00445"></a>00445         uint64_t software:1; <span class="comment">/**&lt; Reserved for software use,</span>
<a name="l00446"></a>00446 <span class="comment">            hardware will clear on packet creation */</span>
<a name="l00447"></a>00447         uint64_t unassigned3:1;
<a name="l00448"></a>00448         uint64_t is_rarp:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is rarp */</span>
<a name="l00449"></a>00449         uint64_t is_arp:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is arp */</span>
<a name="l00450"></a>00450         uint64_t is_bcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a broadcast */</span>
<a name="l00451"></a>00451         uint64_t is_mcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a multi-cast */</span>
<a name="l00452"></a>00452         uint64_t not_IP:1; <span class="comment">/**&lt; Set if the packet may not be IP (must be one in this case) */</span>
<a name="l00453"></a>00453         uint64_t rcv_error:1; <span class="comment">/**&lt; The receive interface hardware detected a receive error.</span>
<a name="l00454"></a>00454 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00455"></a>00455 <span class="comment">            - 1 = partial error: a packet was partially received, but internal</span>
<a name="l00456"></a>00456 <span class="comment">                buffering / bandwidth was not adequate to receive the entire packet.</span>
<a name="l00457"></a>00457 <span class="comment">            - 2 = jabber error: the RGMII packet was too large and is truncated.</span>
<a name="l00458"></a>00458 <span class="comment">            - 3 = overrun error: the RGMII packet is longer than allowed and had an FCS error.</span>
<a name="l00459"></a>00459 <span class="comment">            - 4 = oversize error: the RGMII packet is longer than allowed.</span>
<a name="l00460"></a>00460 <span class="comment">            - 5 = alignment error: the RGMII packet is not an integer number of bytes</span>
<a name="l00461"></a>00461 <span class="comment">                and had an FCS error (100M and 10M only).</span>
<a name="l00462"></a>00462 <span class="comment">            - 6 = fragment error: the RGMII packet is shorter than allowed and had an FCS error.</span>
<a name="l00463"></a>00463 <span class="comment">            - 7 = GMX FCS error: the RGMII packet had an FCS error.</span>
<a name="l00464"></a>00464 <span class="comment">            - 8 = undersize error: the RGMII packet is shorter than allowed.</span>
<a name="l00465"></a>00465 <span class="comment">            - 9 = extend error: the RGMII packet had an extend error.</span>
<a name="l00466"></a>00466 <span class="comment">            - 10 = length mismatch error: the RGMII packet had a length that did not</span>
<a name="l00467"></a>00467 <span class="comment">                match the length field in the L2 HDR.</span>
<a name="l00468"></a>00468 <span class="comment">            - 11 = RGMII RX error/SPI4 DIP4 Error: the RGMII packet had one or more</span>
<a name="l00469"></a>00469 <span class="comment">                data reception errors (RXERR) or the SPI4 packet had one or more DIP4 errors.</span>
<a name="l00470"></a>00470 <span class="comment">            - 12 = RGMII skip error/SPI4 Abort Error: the RGMII packet was not large enough</span>
<a name="l00471"></a>00471 <span class="comment">                to cover the skipped bytes or the SPI4 packet was terminated with an About EOPS.</span>
<a name="l00472"></a>00472 <span class="comment">            - 13 = RGMII nibble error/SPI4 Port NXA Error: the RGMII packet had a studder</span>
<a name="l00473"></a>00473 <span class="comment">                error (data not repeated - 10/100M only) or the SPI4 packet was sent to an NXA.</span>
<a name="l00474"></a>00474 <span class="comment">            - 16 = FCS error: a SPI4.2 packet had an FCS error.</span>
<a name="l00475"></a>00475 <span class="comment">            - 17 = Skip error: a packet was not large enough to cover the skipped bytes.</span>
<a name="l00476"></a>00476 <span class="comment">            - 18 = L2 header malformed: the packet is not long enough to contain the L2 */</span>
<a name="l00477"></a>00477         <span class="comment">/* Lower err_code = first-level descriptor of the work */</span>
<a name="l00478"></a>00478         <span class="comment">/* Zero for packet submitted by hardware that isn&apos;t on the slow path */</span>
<a name="l00479"></a>00479         uint64_t err_code:8; <span class="comment">/* Type is cvmx_pip_err_t (union, so can&apos;t use directly */</span>
<a name="l00480"></a>00480     } snoip_cn68xx;
<a name="l00481"></a>00481     <span class="keyword">struct </span>{
<a name="l00482"></a>00482         uint64_t bufs:8; <span class="comment">/**&lt; HW sets this to the number of buffers used by this packet */</span>
<a name="l00483"></a>00483         uint64_t unused:8;
<a name="l00484"></a>00484         uint64_t vlan_valid:1; <span class="comment">/**&lt; Set to 1 if we found DSA/VLAN in the L2 */</span>
<a name="l00485"></a>00485         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the DSA/VLAN tag is stacked */</span>
<a name="l00486"></a>00486         uint64_t unassigned:1;
<a name="l00487"></a>00487         uint64_t vlan_cfi:1; <span class="comment">/**&lt; HW sets to the DSA/VLAN CFI flag (valid when vlan_valid) */</span>
<a name="l00488"></a>00488         uint64_t vlan_id:12; <span class="comment">/**&lt; HW sets to the DSA/VLAN_ID field (valid when vlan_valid) */</span>
<a name="l00489"></a>00489         uint64_t pr:4; <span class="comment">/**&lt; Ring Identifier (if PCIe). Requires PIP_GBL_CTL[RING_EN]=1 */</span>
<a name="l00490"></a>00490         uint64_t unassigned2a:8;
<a name="l00491"></a>00491         uint64_t unassigned2:4;
<a name="l00492"></a>00492         uint64_t software:1; <span class="comment">/**&lt; Reserved for software use,</span>
<a name="l00493"></a>00493 <span class="comment">            hardware will clear on packet creation */</span>
<a name="l00494"></a>00494         uint64_t unassigned3:1;
<a name="l00495"></a>00495         uint64_t is_rarp:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is rarp */</span>
<a name="l00496"></a>00496         uint64_t is_arp:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is arp */</span>
<a name="l00497"></a>00497         uint64_t is_bcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a broadcast */</span>
<a name="l00498"></a>00498         uint64_t is_mcast:1; <span class="comment">/**&lt; Set if the hardware determined that the packet is a multi-cast */</span>
<a name="l00499"></a>00499         uint64_t not_IP:1; <span class="comment">/**&lt; Set if the packet may not be IP (must be one in this case) */</span>
<a name="l00500"></a>00500         uint64_t rcv_error:1; <span class="comment">/**&lt; The receive interface hardware detected a receive error.</span>
<a name="l00501"></a>00501 <span class="comment">            Failure indicated in err_code below, decode:</span>
<a name="l00502"></a>00502 <span class="comment">            - 1 = partial error: a packet was partially received, but internal</span>
<a name="l00503"></a>00503 <span class="comment">                buffering / bandwidth was not adequate to receive the entire packet.</span>
<a name="l00504"></a>00504 <span class="comment">            - 2 = jabber error: the RGMII packet was too large and is truncated.</span>
<a name="l00505"></a>00505 <span class="comment">            - 3 = overrun error: the RGMII packet is longer than allowed and had an FCS error.</span>
<a name="l00506"></a>00506 <span class="comment">            - 4 = oversize error: the RGMII packet is longer than allowed.</span>
<a name="l00507"></a>00507 <span class="comment">            - 5 = alignment error: the RGMII packet is not an integer number of bytes</span>
<a name="l00508"></a>00508 <span class="comment">                and had an FCS error (100M and 10M only).</span>
<a name="l00509"></a>00509 <span class="comment">            - 6 = fragment error: the RGMII packet is shorter than allowed and had an FCS error.</span>
<a name="l00510"></a>00510 <span class="comment">            - 7 = GMX FCS error: the RGMII packet had an FCS error.</span>
<a name="l00511"></a>00511 <span class="comment">            - 8 = undersize error: the RGMII packet is shorter than allowed.</span>
<a name="l00512"></a>00512 <span class="comment">            - 9 = extend error: the RGMII packet had an extend error.</span>
<a name="l00513"></a>00513 <span class="comment">            - 10 = length mismatch error: the RGMII packet had a length that did not</span>
<a name="l00514"></a>00514 <span class="comment">                match the length field in the L2 HDR.</span>
<a name="l00515"></a>00515 <span class="comment">            - 11 = RGMII RX error/SPI4 DIP4 Error: the RGMII packet had one or more data</span>
<a name="l00516"></a>00516 <span class="comment">                reception errors (RXERR) or the SPI4 packet had one or more DIP4 errors.</span>
<a name="l00517"></a>00517 <span class="comment">            - 12 = RGMII skip error/SPI4 Abort Error: the RGMII packet was not large enough</span>
<a name="l00518"></a>00518 <span class="comment">                to cover the skipped bytes or the SPI4 packet was terminated with an About EOPS.</span>
<a name="l00519"></a>00519 <span class="comment">            - 13 = RGMII nibble error/SPI4 Port NXA Error: the RGMII packet had a studder</span>
<a name="l00520"></a>00520 <span class="comment">                error (data not repeated - 10/100M only) or the SPI4 packet was sent to an NXA.</span>
<a name="l00521"></a>00521 <span class="comment">            - 16 = FCS error: a SPI4.2 packet had an FCS error.</span>
<a name="l00522"></a>00522 <span class="comment">            - 17 = Skip error: a packet was not large enough to cover the skipped bytes.</span>
<a name="l00523"></a>00523 <span class="comment">            - 18 = L2 header malformed: the packet is not long enough to contain the L2 */</span>
<a name="l00524"></a>00524         <span class="comment">/* Lower err_code = first-level descriptor of the work */</span>
<a name="l00525"></a>00525         <span class="comment">/* Zero for packet submitted by hardware that isn&apos;t on the slow path */</span>
<a name="l00526"></a>00526         uint64_t err_code:8; <span class="comment">/* Type is cvmx_pip_err_t (union, so can&apos;t use directly */</span>
<a name="l00527"></a>00527     } snoip_cn38xx;
<a name="l00528"></a>00528 <span class="preprocessor">#else </span><span class="comment">/* __LITTLE_ENDIAN_BITFIELD */</span>
<a name="l00529"></a>00529     <span class="keyword">struct </span>{
<a name="l00530"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#ae5e3a581782a41ef0a347318b73ddc8f">00530</a>         uint64_t err_code:8;
<a name="l00531"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a0e4c32d6ed697b532f616808827f4808">00531</a>         uint64_t rcv_error:1;
<a name="l00532"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">00532</a>         uint64_t not_IP:1;
<a name="l00533"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a0ff646ecfb2c8a252552ff2febb325d7">00533</a>         uint64_t is_mcast:1;
<a name="l00534"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a90088dbf44f647b97de81317aa2aa9a7">00534</a>         uint64_t is_bcast:1;
<a name="l00535"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#aad33d272344fbcc137df9315c1181de1">00535</a>         uint64_t IP_exc:1;
<a name="l00536"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#ade716ff40914addaa9686ae01b663f2a">00536</a>         uint64_t is_frag:1;
<a name="l00537"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a9597b3c74b7fd3b209df1ebb0a625feb">00537</a>         uint64_t L4_error:1;
<a name="l00538"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#afc17346c1b7b2a2127fb2debc00e8aba">00538</a>         uint64_t software:1;
<a name="l00539"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad95688c6aa3221a7a5171f8cc03efc97">00539</a>         uint64_t is_v6:1;
<a name="l00540"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a6fb6dbeedeaad6bd2e497ac51c2ed2dc">00540</a>         uint64_t dec_ipsec:1;
<a name="l00541"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad7b41e904c8e9d4c4708ea6bee7e21b1">00541</a>         uint64_t tcp_or_udp:1;
<a name="l00542"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#abcccbe7065e32b44ce77a4a80af2032d">00542</a>         uint64_t dec_ipcomp:1;
<a name="l00543"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a9b4523449e35be5f8afb565e37d34c80">00543</a>         uint64_t varies:12;
<a name="l00544"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#ace73b05afa9eca056a07dfcd73b80ce7">00544</a>         uint64_t vlan_id:12;
<a name="l00545"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5eb186049c21c3c0918fad9d8b36fbfa">00545</a>         uint64_t vlan_cfi:1;
<a name="l00546"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#ab0e89abfa6f8d0fc62aaf899012b79fd">00546</a>         uint64_t unassigned:1;
<a name="l00547"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a7402e30f048ca5b5eb4731fabd1d3fe0">00547</a>         uint64_t vlan_stacked:1;
<a name="l00548"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#acc44385a4f8506e2278a9fdf662f77b1">00548</a>         uint64_t vlan_valid:1;
<a name="l00549"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#aae4aa0c318904e6f6f1719fc2093659f">00549</a>         uint64_t ip_offset:8;
<a name="l00550"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a8655021d6f8864bdf78413d2599a08de">00550</a>         uint64_t bufs:8;
<a name="l00551"></a>00551     } <a class="code" href="cvmx-coremask_8c.html#a7cc33a7fd56e1ab82f778fe3f0e88c25">s</a>;
<a name="l00552"></a>00552     <span class="keyword">struct </span>{
<a name="l00553"></a>00553         uint64_t err_code:8;
<a name="l00554"></a>00554         uint64_t rcv_error:1;
<a name="l00555"></a>00555         uint64_t not_IP:1;
<a name="l00556"></a>00556         uint64_t is_mcast:1;
<a name="l00557"></a>00557         uint64_t is_bcast:1;
<a name="l00558"></a>00558         uint64_t IP_exc:1;
<a name="l00559"></a>00559         uint64_t is_frag:1;
<a name="l00560"></a>00560         uint64_t L4_error:1;
<a name="l00561"></a>00561         uint64_t software:1;
<a name="l00562"></a>00562         uint64_t is_v6:1;
<a name="l00563"></a>00563         uint64_t dec_ipsec:1;
<a name="l00564"></a>00564         uint64_t tcp_or_udp:1;
<a name="l00565"></a>00565         uint64_t dec_ipcomp:1;
<a name="l00566"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a1aebfe5d51f9f7cb9d005d3235ebd32e">00566</a>         uint64_t port:12;
<a name="l00567"></a>00567         uint64_t vlan_id:12;
<a name="l00568"></a>00568         uint64_t vlan_cfi:1;
<a name="l00569"></a>00569         uint64_t unassigned:1;
<a name="l00570"></a>00570         uint64_t vlan_stacked:1;
<a name="l00571"></a>00571         uint64_t vlan_valid:1;
<a name="l00572"></a>00572         uint64_t ip_offset:8;
<a name="l00573"></a>00573         uint64_t bufs:8;
<a name="l00574"></a>00574     } s_cn68xx;
<a name="l00575"></a>00575     <span class="keyword">struct </span>{
<a name="l00576"></a>00576         uint64_t err_code:8;
<a name="l00577"></a>00577         uint64_t rcv_error:1;
<a name="l00578"></a>00578         uint64_t not_IP:1;
<a name="l00579"></a>00579         uint64_t is_mcast:1;
<a name="l00580"></a>00580         uint64_t is_bcast:1;
<a name="l00581"></a>00581         uint64_t IP_exc:1;
<a name="l00582"></a>00582         uint64_t is_frag:1;
<a name="l00583"></a>00583         uint64_t L4_error:1;
<a name="l00584"></a>00584         uint64_t software:1;
<a name="l00585"></a>00585         uint64_t is_v6:1;
<a name="l00586"></a>00586         uint64_t dec_ipsec:1;
<a name="l00587"></a>00587         uint64_t tcp_or_udp:1;
<a name="l00588"></a>00588         uint64_t dec_ipcomp:1;
<a name="l00589"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#aa73618f5f32e5943b4324bf0052abeb6">00589</a>         uint64_t unassigned2:4;
<a name="l00590"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a6ff9255a782c4065f1d30001a34bf2de">00590</a>         uint64_t unassigned2a:4;
<a name="l00591"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a019df29418b34cb47aa12ded14deb377">00591</a>         uint64_t pr:4;
<a name="l00592"></a>00592         uint64_t vlan_id:12;
<a name="l00593"></a>00593         uint64_t vlan_cfi:1;
<a name="l00594"></a>00594         uint64_t unassigned:1;
<a name="l00595"></a>00595         uint64_t vlan_stacked:1;
<a name="l00596"></a>00596         uint64_t vlan_valid:1;
<a name="l00597"></a>00597         uint64_t ip_offset:8;
<a name="l00598"></a>00598         uint64_t bufs:8;
<a name="l00599"></a>00599     } s_cn38xx;
<a name="l00600"></a>00600 
<a name="l00601"></a>00601     <span class="keyword">struct </span>{
<a name="l00602"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a0a7c69c26e762b8de8fd388bc7d5c29e">00602</a>         uint64_t unused2:32;
<a name="l00603"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a011740c4b6847823f685413f781fe044">00603</a>         uint64_t vlan:16;
<a name="l00604"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a125da735e55c2619d7674a95959dae0b">00604</a>         uint64_t unused1:16;
<a name="l00605"></a>00605     } svlan;
<a name="l00606"></a>00606 
<a name="l00607"></a>00607     <span class="keyword">struct </span>{
<a name="l00608"></a>00608         uint64_t err_code:8;
<a name="l00609"></a>00609         uint64_t rcv_error:1;
<a name="l00610"></a>00610         uint64_t not_IP:1;
<a name="l00611"></a>00611         uint64_t is_mcast:1;
<a name="l00612"></a>00612         uint64_t is_bcast:1;
<a name="l00613"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2437257aaba1d3e4cba068c0b4212403">00613</a>         uint64_t is_arp:1;
<a name="l00614"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#aad98698ab7f79451c0771ff3626fb540">00614</a>         uint64_t is_rarp:1;
<a name="l00615"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#a7ab6a1a8554886008b7952da62c20e6f">00615</a>         uint64_t unassigned3:1;
<a name="l00616"></a>00616         uint64_t software:1;
<a name="l00617"></a>00617         uint64_t unassigned2:4;
<a name="l00618"></a>00618         uint64_t varies:12;
<a name="l00619"></a>00619         uint64_t vlan_id:12;
<a name="l00620"></a>00620         uint64_t vlan_cfi:1;
<a name="l00621"></a>00621         uint64_t unassigned:1;
<a name="l00622"></a>00622         uint64_t vlan_stacked:1;
<a name="l00623"></a>00623         uint64_t vlan_valid:1;
<a name="l00624"></a><a class="code" href="unioncvmx__pip__wqe__word2__t.html#abf44f1c88d8aac3c5d424e7bffc4dec1">00624</a>         uint64_t unused:8;
<a name="l00625"></a>00625         uint64_t bufs:8;
<a name="l00626"></a>00626     } snoip;
<a name="l00627"></a>00627     <span class="keyword">struct </span>{
<a name="l00628"></a>00628         uint64_t err_code:8;
<a name="l00629"></a>00629         uint64_t rcv_error:1;
<a name="l00630"></a>00630         uint64_t not_IP:1;
<a name="l00631"></a>00631         uint64_t is_mcast:1;
<a name="l00632"></a>00632         uint64_t is_bcast:1;
<a name="l00633"></a>00633         uint64_t is_arp:1;
<a name="l00634"></a>00634         uint64_t is_rarp:1;
<a name="l00635"></a>00635         uint64_t unassigned3:1;
<a name="l00636"></a>00636         uint64_t software:1;
<a name="l00637"></a>00637         uint64_t unassigned2:4;
<a name="l00638"></a>00638         uint64_t port:12;
<a name="l00639"></a>00639         uint64_t vlan_id:12;
<a name="l00640"></a>00640         uint64_t vlan_cfi:1;
<a name="l00641"></a>00641         uint64_t unassigned:1;
<a name="l00642"></a>00642         uint64_t vlan_stacked:1;
<a name="l00643"></a>00643         uint64_t vlan_valid:1;
<a name="l00644"></a>00644         uint64_t unused:8;
<a name="l00645"></a>00645         uint64_t bufs:8;
<a name="l00646"></a>00646     } snoip_cn68xx;
<a name="l00647"></a>00647     <span class="keyword">struct </span>{
<a name="l00648"></a>00648         uint64_t err_code:8;
<a name="l00649"></a>00649         uint64_t rcv_error:1;
<a name="l00650"></a>00650         uint64_t not_IP:1;
<a name="l00651"></a>00651         uint64_t is_mcast:1;
<a name="l00652"></a>00652         uint64_t is_bcast:1;
<a name="l00653"></a>00653         uint64_t is_arp:1;
<a name="l00654"></a>00654         uint64_t is_rarp:1;
<a name="l00655"></a>00655         uint64_t unassigned3:1;
<a name="l00656"></a>00656         uint64_t software:1;
<a name="l00657"></a>00657         uint64_t unassigned2:4;
<a name="l00658"></a>00658         uint64_t unassigned2a:8;
<a name="l00659"></a>00659         uint64_t pr:4;
<a name="l00660"></a>00660         uint64_t vlan_id:12;
<a name="l00661"></a>00661         uint64_t vlan_cfi:1;
<a name="l00662"></a>00662         uint64_t unassigned:1;
<a name="l00663"></a>00663         uint64_t vlan_stacked:1;
<a name="l00664"></a>00664         uint64_t vlan_valid:1;
<a name="l00665"></a>00665         uint64_t unused:8;
<a name="l00666"></a>00666         uint64_t bufs:8;
<a name="l00667"></a>00667     } snoip_cn38xx;
<a name="l00668"></a>00668 <span class="preprocessor">#endif </span><span class="comment">/* __LITTLE_ENDIAN_BITFIELD */</span>
<a name="l00669"></a>00669 } <a class="code" href="unioncvmx__pip__wqe__word2__t.html" title="HW decode / err_code in work queue entry.">cvmx_pip_wqe_word2_t</a>;
<a name="l00670"></a>00670 
<a name="l00671"></a>00671 
<a name="l00672"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html">00672</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00673"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#addaa8c1303ff9c8f42d94e30608e8640">00673</a>     uint64_t u64;
<a name="l00674"></a>00674 <span class="preprocessor">#ifdef __BIG_ENDIAN_BITFIELD</span>
<a name="l00675"></a>00675 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00676"></a>00676         uint64_t software:1; <span class="comment">/**&lt; Reserved for software use,</span>
<a name="l00677"></a>00677 <span class="comment">            hardware always writes 0 to this bit */</span>
<a name="l00678"></a>00678         uint64_t lg_hdr_type:5; <span class="comment">/**&lt; Indicates the Layer G header typed parsed,PKI_LTYPE_E */</span>
<a name="l00679"></a>00679         uint64_t lf_hdr_type:5; <span class="comment">/**&lt; Indicates the Layer F header typed parsed, PKI_LTYPE_E */</span>
<a name="l00680"></a>00680         uint64_t le_hdr_type:5; <span class="comment">/**&lt; Indicates the Layer E header typed parsed, PKI_LTYPE_E */</span>
<a name="l00681"></a>00681         uint64_t ld_hdr_type:5; <span class="comment">/**&lt; Indicates the Layer D header typed parsed, PKI_LTYPE_E */</span>
<a name="l00682"></a>00682         uint64_t lc_hdr_type:5; <span class="comment">/**&lt; Indicates the Layer C header typed parsed, PKI_LTYPE_E */</span>
<a name="l00683"></a>00683         uint64_t lb_hdr_type:5; <span class="comment">/**&lt; Indicates the Layer B header typed parsed, PKI_LTYPE_E */</span>
<a name="l00684"></a>00684         uint64_t is_la_ether:1; <span class="comment">/**&lt; Indicates that Layer A Ethernet was parsed */</span>
<a name="l00685"></a>00685         uint64_t rsvd_0:8;
<a name="l00686"></a>00686         uint64_t vlan_valid:1; <span class="comment">/**&lt; Set to 1 if we found VLAN in the L2 */</span>
<a name="l00687"></a>00687         uint64_t vlan_stacked:1; <span class="comment">/**&lt; Set to 1 if the VLAN tag is stacked */</span>
<a name="l00688"></a>00688         uint64_t stat_inc:1; <span class="comment">/**&lt; Stat increment Reserved for Statistics hardware */</span>
<a name="l00689"></a>00689         uint64_t pcam_flag4:1; <span class="comment">/**&lt; Indicates if PCAM entry has set the flag */</span>
<a name="l00690"></a>00690         uint64_t pcam_flag3:1; <span class="comment">/**&lt; Indicates if PCAM entry has set the flag */</span>
<a name="l00691"></a>00691         uint64_t pcam_flag2:1; <span class="comment">/**&lt; Indicates if PCAM entry has set the flag */</span>
<a name="l00692"></a>00692         uint64_t pcam_flag1:1; <span class="comment">/**&lt; Indicates if PCAM entry has set the flag */</span>
<a name="l00693"></a>00693         uint64_t is_frag:1; <span class="comment">/**&lt; Set when the outer IP indicates a fragment */</span>
<a name="l00694"></a>00694         uint64_t is_l3_bcast:1; <span class="comment">/**&lt; Set when outer ip indicates broadcast */</span>
<a name="l00695"></a>00695         uint64_t is_l3_mcast:1; <span class="comment">/**&lt; Set when outer ipv4 indicates multicast */</span>
<a name="l00696"></a>00696         uint64_t is_l2_bcast:1; <span class="comment">/**&lt; Set when the packet’s destination MAC address</span>
<a name="l00697"></a>00697 <span class="comment">            field in the L2 HDR is the broadcast address */</span>
<a name="l00698"></a>00698         uint64_t is_l2_mcast:1; <span class="comment">/**&lt; Set when the packet’s destination MAC address</span>
<a name="l00699"></a>00699 <span class="comment">            field in the L2 HDR is a multicast address */</span>
<a name="l00700"></a>00700         uint64_t is_raw:1; <span class="comment">/**&lt; Set when PKI_INST_HDR[RAW] was set */</span>
<a name="l00701"></a>00701         uint64_t err_level:3; <span class="comment">/**&lt; Contains the lowest protocol layer containing error,</span>
<a name="l00702"></a>00702 <span class="comment">            when errors are detected, normally 0; PKI_ERROR_LEVEL_E */</span>
<a name="l00703"></a>00703         uint64_t err_code:8; <span class="comment">/**&lt; Normally 0, but contains a (non-zero) exception opcode</span>
<a name="l00704"></a>00704 <span class="comment">            enumerated by PKI_OPCODE_E when WQE[ERRLEV] is non-zero */</span>
<a name="l00705"></a>00705     };
<a name="l00706"></a>00706 <span class="preprocessor">#else</span>
<a name="l00707"></a>00707 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00708"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac20df080cfb15cacf0e821c3b9f7b84f">00708</a>         uint64_t err_code:8;
<a name="l00709"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a0a9cfb3b9504e2c1d6b39394177c3e9c">00709</a>         uint64_t err_level:3;
<a name="l00710"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a2ba6e378506695aa273b34ad690e6941">00710</a>         uint64_t is_raw:1;
<a name="l00711"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a7f5e58ff94e53c141ce51d0a7802dd6c">00711</a>         uint64_t is_l2_mcast:1;
<a name="l00712"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#af952d8234ac67bf638ef25a8746ba148">00712</a>         uint64_t is_l2_bcast:1;
<a name="l00713"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a35c3f9b4b3d02438b55a0165a496df3b">00713</a>         uint64_t is_l3_mcast:1;
<a name="l00714"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a55241918956de3e7a07d24f26eb9ecc6">00714</a>         uint64_t is_l3_bcast:1;
<a name="l00715"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a1c37bb0948250519b4c52db891e5fc75">00715</a>         uint64_t is_frag:1;
<a name="l00716"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a72969dcb84f763e9ec4e54498ed9347e">00716</a>         uint64_t pcam_flag1:1;
<a name="l00717"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a3de169a864d8b9bd92b5b63f375903ac">00717</a>         uint64_t pcam_flag2:1;
<a name="l00718"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a0d3b0d696c82f0ccf8b2286f78f30372">00718</a>         uint64_t pcam_flag3:1;
<a name="l00719"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#af5f42fe1589c60cc31c6963eba5aedb6">00719</a>         uint64_t pcam_flag4:1;
<a name="l00720"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#ae70631f6cee6618787ef58782bd51f96">00720</a>         uint64_t stat_inc:1;
<a name="l00721"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a88cfacb4a5729636086dc9d8fd6cf347">00721</a>         uint64_t vlan_stacked:1;
<a name="l00722"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a2c85a7e6359e50da6810eade5884ed15">00722</a>         uint64_t vlan_valid:1;
<a name="l00723"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a1b136bf6b46c90de8e7bc038b3244c92">00723</a>         uint64_t rsvd_0:8;
<a name="l00724"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#ad84f295de55f719f2d4e7005d9094268">00724</a>         uint64_t is_la_ether:1;
<a name="l00725"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a394e8f9691f2c912c75598b3815a65f4">00725</a>         uint64_t lb_hdr_type:5;
<a name="l00726"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">00726</a>         uint64_t lc_hdr_type:5;
<a name="l00727"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#aa314334bfee68947673c07eac49608ea">00727</a>         uint64_t ld_hdr_type:5;
<a name="l00728"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac3c899f9ff193aa9c0ef73265415cff0">00728</a>         uint64_t le_hdr_type:5;
<a name="l00729"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">00729</a>         uint64_t lf_hdr_type:5;
<a name="l00730"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#a7d15bc8f3c3dbff3084a2e9d268dc803">00730</a>         uint64_t lg_hdr_type:5;
<a name="l00731"></a><a class="code" href="unioncvmx__pki__wqe__word2__t.html#aea67d86541524721858d8b584dd3c552">00731</a>         uint64_t software:1;
<a name="l00732"></a>00732     };
<a name="l00733"></a>00733 <span class="preprocessor">#endif</span>
<a name="l00734"></a>00734 <span class="preprocessor"></span>} <a class="code" href="unioncvmx__pki__wqe__word2__t.html">cvmx_pki_wqe_word2_t</a>;
<a name="l00735"></a>00735 
<a name="l00736"></a><a class="code" href="unioncvmx__wqe__word2__t.html">00736</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00737"></a><a class="code" href="unioncvmx__wqe__word2__t.html#ac2f3e9eccfb4bee0c297085cc14baf63">00737</a>     uint64_t u64;
<a name="l00738"></a><a class="code" href="unioncvmx__wqe__word2__t.html#a556e42ef9d855d5c1620852dac5bf275">00738</a>     <a class="code" href="unioncvmx__pki__wqe__word2__t.html">cvmx_pki_wqe_word2_t</a> pki;
<a name="l00739"></a><a class="code" href="unioncvmx__wqe__word2__t.html#a97e088e4fe89bf8b33f9eda6a510c494">00739</a>     <a class="code" href="unioncvmx__pip__wqe__word2__t.html" title="HW decode / err_code in work queue entry.">cvmx_pip_wqe_word2_t</a> pip;
<a name="l00740"></a>00740 }<a class="code" href="unioncvmx__wqe__word2__t.html">cvmx_wqe_word2_t</a>;
<a name="l00741"></a>00741 
<a name="l00742"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html">00742</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00743"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a528cd9a160eaffa8e3cc3e492a7ce417">00743</a>     uint64_t u64;
<a name="l00744"></a>00744 <span class="preprocessor">#ifdef __BIG_ENDIAN_BITFIELD</span>
<a name="l00745"></a>00745 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00746"></a>00746         uint16_t hw_chksum; <span class="comment">/* Raw chksum result generated by the HW. */</span>
<a name="l00747"></a>00747         uint8_t unused; <span class="comment">/* Field unused by hardware - available for software */</span>
<a name="l00748"></a>00748         uint64_t next_ptr:40; <span class="comment">/* The pointer used by hardware for list maintenance.</span>
<a name="l00749"></a>00749 <span class="comment">            May be written/read by HW before the work queue entry is scheduled to</span>
<a name="l00750"></a>00750 <span class="comment">            a PP (Only 36 bits used in OCTEON 1). */</span>
<a name="l00751"></a>00751     } cn38xx;
<a name="l00752"></a>00752     <span class="keyword">struct </span>{
<a name="l00753"></a>00753         uint64_t l4ptr:8; <span class="comment">/* 56..63 */</span>
<a name="l00754"></a>00754         uint64_t unused0:8; <span class="comment">/* 48..55 */</span>
<a name="l00755"></a>00755         uint64_t l3ptr:8; <span class="comment">/* 40..47 */</span>
<a name="l00756"></a>00756         uint64_t l2ptr:8; <span class="comment">/* 32..39 */</span>
<a name="l00757"></a>00757         uint64_t unused1:18; <span class="comment">/* 14..31 */</span>
<a name="l00758"></a>00758         uint64_t bpid:6; <span class="comment">/* 8..13 */</span>
<a name="l00759"></a>00759         uint64_t unused2:2; <span class="comment">/* 6..7 */</span>
<a name="l00760"></a>00760         uint64_t pknd:6; <span class="comment">/* 0..5 */</span>
<a name="l00761"></a>00761     } cn68xx;
<a name="l00762"></a>00762 <span class="preprocessor">#else</span>
<a name="l00763"></a>00763 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00764"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a4cfcf7d720167698787f33d0e0ca67fa">00764</a>         uint64_t next_ptr:40;
<a name="l00765"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a9c6f7c2f0e715dbab1c0ec1b17098d9f">00765</a>         uint8_t unused;
<a name="l00766"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#ad69a43c227579ac56b38259b22e48e80">00766</a>         uint16_t hw_chksum;
<a name="l00767"></a>00767     } cn38xx;
<a name="l00768"></a>00768     <span class="keyword">struct </span>{
<a name="l00769"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a4ef485769f9982611c9efedebf6ab71a">00769</a>         uint64_t pknd:6;
<a name="l00770"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#ac068ec9c3bf901a929ddf978391af28b">00770</a>         uint64_t unused2:2;
<a name="l00771"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a6c8c3898e9c3350a95cd3f2783ca7455">00771</a>         uint64_t bpid:6;
<a name="l00772"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#acc13fe3a809908850678e57b58418b88">00772</a>         uint64_t unused1:18;
<a name="l00773"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a88ec6139eda57ebeea9bddfc503c0c18">00773</a>         uint64_t l2ptr:8;
<a name="l00774"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a0cd6225a6326237055e70edb50d20153">00774</a>         uint64_t l3ptr:8;
<a name="l00775"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a117d6361ad267bc6ff0aead0f50bf726">00775</a>         uint64_t unused0:8;
<a name="l00776"></a><a class="code" href="unioncvmx__pip__wqe__word0__t.html#a02ae35be4434fbef839b245dc11dcc2f">00776</a>         uint64_t l4ptr:8;
<a name="l00777"></a>00777     } cn68xx;
<a name="l00778"></a>00778 <span class="preprocessor">#endif</span>
<a name="l00779"></a>00779 <span class="preprocessor"></span>} <a class="code" href="unioncvmx__pip__wqe__word0__t.html">cvmx_pip_wqe_word0_t</a>;
<a name="l00780"></a>00780 
<a name="l00781"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html">00781</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00782"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#ac6b6af303f76cca2347b7cd8d7ea0666">00782</a>     uint64_t u64;
<a name="l00783"></a>00783 <span class="preprocessor">#ifdef __BIG_ENDIAN_BITFIELD</span>
<a name="l00784"></a>00784 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00785"></a>00785         uint64_t rsvd_0:4;
<a name="l00786"></a>00786         uint64_t aura:12;
<a name="l00787"></a>00787         uint64_t rsvd_1:1;
<a name="l00788"></a>00788         uint64_t apad:3;
<a name="l00789"></a>00789         uint64_t channel:12;
<a name="l00790"></a>00790         uint64_t bufs:8;
<a name="l00791"></a>00791         uint64_t style:8;
<a name="l00792"></a>00792         uint64_t rsvd_2:10;
<a name="l00793"></a>00793         uint64_t pknd:6;
<a name="l00794"></a>00794     };
<a name="l00795"></a>00795 <span class="preprocessor">#else</span>
<a name="l00796"></a>00796 <span class="preprocessor"></span>    <span class="keyword">struct </span>{
<a name="l00797"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#a3736d2b8a89c57a220aaad2b0f93f2bc">00797</a>         uint64_t pknd:6;
<a name="l00798"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#a646750df655c08245492987c3d4d3282">00798</a>         uint64_t rsvd_2:10;
<a name="l00799"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#afcc4827133af78c61ae99ae8453d3798">00799</a>         uint64_t style:8;
<a name="l00800"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#adc41a91c2466a7e545643446db205e61">00800</a>         uint64_t bufs:8;
<a name="l00801"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#a6abc9b41f0ca21e6421e5774e9267956">00801</a>         uint64_t channel:12;
<a name="l00802"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#acce93155d85016b8cb02568b514527a5">00802</a>         uint64_t apad:3;
<a name="l00803"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#af65788e7643ec8701349189b3a0ffe7f">00803</a>         uint64_t rsvd_1:1;
<a name="l00804"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#ae84fcf08ed0965fec5d1ec345887f089">00804</a>         uint64_t aura:12;
<a name="l00805"></a><a class="code" href="unioncvmx__pki__wqe__word0__t.html#a47c98e57fd181103bfceb17d55676f1d">00805</a>         uint64_t rsvd_0:4;
<a name="l00806"></a>00806     };
<a name="l00807"></a>00807 <span class="preprocessor">#endif</span>
<a name="l00808"></a>00808 <span class="preprocessor"></span>} <a class="code" href="unioncvmx__pki__wqe__word0__t.html">cvmx_pki_wqe_word0_t</a>;
<a name="l00809"></a>00809 
<a name="l00810"></a>00810 <span class="comment">/* Use reserved bit, set by HW to 0, to indicate buf_ptr legacy translation*/</span>
<a name="l00811"></a><a class="code" href="cvmx-wqe_8h.html#ae9ddd02f8d0c0b6e423d0c2ad348b296">00811</a> <span class="preprocessor">#define pki_wqe_translated word0.rsvd_1</span>
<a name="l00812"></a>00812 <span class="preprocessor"></span>
<a name="l00813"></a><a class="code" href="unioncvmx__wqe__word0__t.html">00813</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00814"></a><a class="code" href="unioncvmx__wqe__word0__t.html#aabc9e58607922eb5b6eb9027d8bad647">00814</a>     uint64_t u64;
<a name="l00815"></a><a class="code" href="unioncvmx__wqe__word0__t.html#a89d0cb5134e6dbf0a109d23c4b2905e4">00815</a>     <a class="code" href="unioncvmx__pip__wqe__word0__t.html">cvmx_pip_wqe_word0_t</a> pip;
<a name="l00816"></a><a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">00816</a>     <a class="code" href="unioncvmx__pki__wqe__word0__t.html">cvmx_pki_wqe_word0_t</a> pki;
<a name="l00817"></a>00817     <span class="keyword">struct </span>{
<a name="l00818"></a>00818 <span class="preprocessor">#ifdef __BIG_ENDIAN_BITFIELD</span>
<a name="l00819"></a>00819 <span class="preprocessor"></span>        uint64_t unused:24;
<a name="l00820"></a>00820         uint64_t next_ptr:40; <span class="comment">/* On cn68xx this is unused as well */</span>
<a name="l00821"></a>00821 <span class="preprocessor">#else</span>
<a name="l00822"></a><a class="code" href="unioncvmx__wqe__word0__t.html#a01e4f020ebb89564e1870b65c618b630">00822</a> <span class="preprocessor"></span>        uint64_t next_ptr:40;
<a name="l00823"></a><a class="code" href="unioncvmx__wqe__word0__t.html#af5182d717b8a00e6fbf6c4ca8a184758">00823</a>         uint64_t unused:24;
<a name="l00824"></a>00824 <span class="preprocessor">#endif</span>
<a name="l00825"></a>00825 <span class="preprocessor"></span>    } raw;
<a name="l00826"></a>00826 } <a class="code" href="unioncvmx__wqe__word0__t.html">cvmx_wqe_word0_t</a>;
<a name="l00827"></a>00827 
<a name="l00828"></a><a class="code" href="unioncvmx__pki__wqe__word1__t.html">00828</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00829"></a><a class="code" href="unioncvmx__pki__wqe__word1__t.html#a208bba7fde61963d1a275c8a5eb3a918">00829</a>     uint64_t u64;
<a name="l00830"></a>00830     <span class="keyword">struct </span>{
<a name="l00831"></a>00831         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t len:16,
<a name="l00832"></a>00832         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_0:2,
<a name="l00833"></a>00833         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_1:2,
<a name="l00834"></a>00834         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t grp:10, <span class="comment">/* The group that the work queue</span>
<a name="l00835"></a>00835 <span class="comment">            entry will be scheduled to. */</span>
<a name="l00836"></a>00836         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a> tag_type:2,
<a name="l00837"></a>00837         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t tag:32,
<a name="l00838"></a><a class="code" href="unioncvmx__pki__wqe__word1__t.html#a31371f143dd1069e49a69e1ce0b5f091">00838</a>         ))))));
<a name="l00839"></a>00839     };
<a name="l00840"></a>00840 } <a class="code" href="unioncvmx__pki__wqe__word1__t.html">cvmx_pki_wqe_word1_t</a>;
<a name="l00841"></a>00841 
<a name="l00842"></a><a class="code" href="cvmx-wqe_8h.html#ad7e95c71057bdb77fddc300d43fbe15f">00842</a> <span class="preprocessor">#define pki_errata20776 word1.rsvd_0</span>
<a name="l00843"></a>00843 <span class="preprocessor"></span>
<a name="l00844"></a><a class="code" href="unioncvmx__wqe__word1__t.html">00844</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00845"></a><a class="code" href="unioncvmx__wqe__word1__t.html#a8936a19cb43fd4131b01e23402738e15">00845</a>     uint64_t u64;
<a name="l00846"></a>00846     <span class="keyword">struct </span>{
<a name="l00847"></a>00847         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t len:16,
<a name="l00848"></a>00848         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t varies:14,
<a name="l00849"></a>00849         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a> tag_type:2, <span class="comment">/* The type of the tag</span>
<a name="l00850"></a>00850 <span class="comment">            (ORDERED, ATOMIC, NULL).*/</span>
<a name="l00851"></a>00851         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t tag:32,
<a name="l00852"></a><a class="code" href="unioncvmx__wqe__word1__t.html#a600b19014ad0e19a5a00bbaca815c9fa">00852</a>         ))));
<a name="l00853"></a>00853     };
<a name="l00854"></a><a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">00854</a>     <a class="code" href="unioncvmx__pki__wqe__word1__t.html">cvmx_pki_wqe_word1_t</a> cn78xx;
<a name="l00855"></a>00855     <span class="keyword">struct </span>{
<a name="l00856"></a>00856         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t len:16,
<a name="l00857"></a>00857         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t zero_0:1,
<a name="l00858"></a>00858         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t qos:3, <span class="comment">/* HW sets this to what it thought</span>
<a name="l00859"></a>00859 <span class="comment">            the priority of the input packet was.*/</span>
<a name="l00860"></a>00860         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t zero_1:1,
<a name="l00861"></a>00861         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t grp:6, <span class="comment">/* The group that the work queue entry</span>
<a name="l00862"></a>00862 <span class="comment">            will be scheduled to.*/</span>
<a name="l00863"></a>00863         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t zero_2:3,
<a name="l00864"></a>00864         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a> tag_type:2,
<a name="l00865"></a>00865         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t tag:32,
<a name="l00866"></a><a class="code" href="unioncvmx__wqe__word1__t.html#a194faf2d91b219f59aad77e8181f6de3">00866</a>         ))))))));
<a name="l00867"></a>00867     } cn68xx;
<a name="l00868"></a>00868     <span class="keyword">struct </span>{
<a name="l00869"></a>00869         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t len:16,
<a name="l00870"></a>00870         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t ipprt:6, <span class="comment">/* HW sets this to input physical port.*/</span>
<a name="l00871"></a>00871         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t qos:3, <span class="comment">/* HW sets this to what it thought</span>
<a name="l00872"></a>00872 <span class="comment">            the priority of the input packet was.*/</span>
<a name="l00873"></a>00873         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t grp:4, <span class="comment">/* The group that the work queue entry</span>
<a name="l00874"></a>00874 <span class="comment">            will be scheduled to.*/</span>
<a name="l00875"></a>00875         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t zero_2:1,
<a name="l00876"></a>00876         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a> tag_type:2,
<a name="l00877"></a>00877         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t tag:32,
<a name="l00878"></a><a class="code" href="unioncvmx__wqe__word1__t.html#ad95cc6d2e229ed98afcf2c85ac9e3368">00878</a>         )))))));
<a name="l00879"></a>00879     } cn38xx;
<a name="l00880"></a>00880 } <a class="code" href="unioncvmx__wqe__word1__t.html">cvmx_wqe_word1_t</a>;
<a name="l00881"></a>00881 
<a name="l00882"></a><a class="code" href="unioncvmx__wqe__word3__t.html">00882</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00883"></a><a class="code" href="unioncvmx__wqe__word3__t.html#acdbdd0083f535c0ee0535a7b2872877a">00883</a>     uint64_t u64;
<a name="l00884"></a>00884     <span class="keyword">struct </span>{
<a name="l00885"></a>00885         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_0:8,
<a name="l00886"></a>00886         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t hwerr:8, <span class="comment">/* NVMe queue manager hardware error info.*/</span>
<a name="l00887"></a>00887         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_1:24,
<a name="l00888"></a>00888         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t sqid:8, <span class="comment">/* Submission queue ID number.*/</span>
<a name="l00889"></a>00889         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_2:4,
<a name="l00890"></a>00890         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t vfnum:12, <span class="comment">/* Virtual function number.*/</span>
<a name="l00891"></a><a class="code" href="unioncvmx__wqe__word3__t.html#ac29c206517fb98f5d14cac12217630c0">00891</a>         ))))));
<a name="l00892"></a>00892     };
<a name="l00893"></a>00893 } <a class="code" href="unioncvmx__wqe__word3__t.html">cvmx_wqe_word3_t</a>;
<a name="l00894"></a>00894 
<a name="l00895"></a><a class="code" href="unioncvmx__wqe__word4__t.html">00895</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00896"></a><a class="code" href="unioncvmx__wqe__word4__t.html#a0e2ec987baaae7d95864300d8dea95e9">00896</a>     uint64_t u64;
<a name="l00897"></a>00897     <span class="keyword">struct </span>{
<a name="l00898"></a>00898         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_0:21,
<a name="l00899"></a>00899         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t sqfc:11, <span class="comment">/* SQ flow control counter.</span>
<a name="l00900"></a>00900 <span class="comment">            For diagnostic use only.*/</span>
<a name="l00901"></a>00901         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_1:5,
<a name="l00902"></a>00902         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t sqtail:11, <span class="comment">/* SQ tail. For diagnostic use only.*/</span>
<a name="l00903"></a>00903         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t rsvd_2:3,
<a name="l00904"></a>00904         <a class="code" href="cvmx-address_8h.html#a5861e5cbea1b71cdda5d5d6c61507315">CVMX_BITFIELD_FIELD</a>(uint64_t sqhead:13, <span class="comment">/* SQ head pointer. The SQ entry number</span>
<a name="l00905"></a>00905 <span class="comment">            that this command was read from. Useful for pairing up fused operations. */</span>
<a name="l00906"></a><a class="code" href="unioncvmx__wqe__word4__t.html#ab2ed0cefa7653e2c6527b9c741ac197b">00906</a>         ))))));
<a name="l00907"></a>00907     };
<a name="l00908"></a>00908 } <a class="code" href="unioncvmx__wqe__word4__t.html">cvmx_wqe_word4_t</a>;
<a name="l00909"></a>00909 <span class="comment"></span>
<a name="l00910"></a>00910 <span class="comment">/**</span>
<a name="l00911"></a>00911 <span class="comment"> * Work queue entry format.</span>
<a name="l00912"></a>00912 <span class="comment"> * Must be 8-byte aligned.</span>
<a name="l00913"></a>00913 <span class="comment"> */</span>
<a name="l00914"></a><a class="code" href="structcvmx__wqe__s.html">00914</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcvmx__wqe__s.html" title="Work queue entry format.">cvmx_wqe_s</a> {
<a name="l00915"></a>00915     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00916"></a>00916     <span class="comment">/* WORD 0                                                                    */</span>
<a name="l00917"></a>00917     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00918"></a>00918     <span class="comment">/* HW WRITE: the following 64 bits are filled by HW when a packet arrives. */</span>
<a name="l00919"></a><a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">00919</a>     <a class="code" href="unioncvmx__wqe__word0__t.html">cvmx_wqe_word0_t</a> <a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>;
<a name="l00920"></a>00920 
<a name="l00921"></a>00921     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00922"></a>00922     <span class="comment">/* WORD 1                                                                    */</span>
<a name="l00923"></a>00923     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00924"></a>00924     <span class="comment">/* HW WRITE: the following 64 bits are filled by HW when a packet arrives. */</span>
<a name="l00925"></a><a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">00925</a>     <a class="code" href="unioncvmx__wqe__word1__t.html">cvmx_wqe_word1_t</a> <a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>;
<a name="l00926"></a>00926 
<a name="l00927"></a>00927     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00928"></a>00928     <span class="comment">/* WORD 2                                                                    */</span>
<a name="l00929"></a>00929     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00930"></a>00930     <span class="comment">/* HW WRITE: the following 64-bits are filled in by hardware when a packet</span>
<a name="l00931"></a>00931 <span class="comment">     * arrives. This indicates a variety of status and error conditions.*/</span>
<a name="l00932"></a><a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">00932</a>     <a class="code" href="unioncvmx__pip__wqe__word2__t.html" title="HW decode / err_code in work queue entry.">cvmx_pip_wqe_word2_t</a> <a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>;
<a name="l00933"></a>00933 
<a name="l00934"></a>00934     <span class="comment">/* Pointer to the first segment of the packet. */</span>
<a name="l00935"></a><a class="code" href="structcvmx__wqe__s.html#a5dcd5b40716d41209227039d479af803">00935</a>     <a class="code" href="unioncvmx__buf__ptr.html" title="This structure defines a buffer pointer on Octeon.">cvmx_buf_ptr_t</a> <a class="code" href="structcvmx__wqe__s.html#a5dcd5b40716d41209227039d479af803">packet_ptr</a>;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937     <span class="comment">/* HW WRITE: OCTEON will fill in a programmable amount from the packet,</span>
<a name="l00938"></a>00938 <span class="comment">     * up to (at most, but perhaps less) the amount needed to fill the work queue</span>
<a name="l00939"></a>00939 <span class="comment">     * entry to 128 bytes. If the packet is recognized to be IP, the hardware starts</span>
<a name="l00940"></a>00940 <span class="comment">     * (except that the IPv4 header is padded for appropriate alignment) writing</span>
<a name="l00941"></a>00941 <span class="comment">     * here where the IP header starts. If the packet is not recognized to be IP,</span>
<a name="l00942"></a>00942 <span class="comment">     * the hardware starts writing the beginning of the packet here.</span>
<a name="l00943"></a>00943 <span class="comment">     */</span>
<a name="l00944"></a><a class="code" href="structcvmx__wqe__s.html#a4e4ca00139323303e737cd709e09e3a2">00944</a>     uint8_t <a class="code" href="structcvmx__wqe__s.html#a4e4ca00139323303e737cd709e09e3a2">packet_data</a>[96];
<a name="l00945"></a>00945 
<a name="l00946"></a>00946     <span class="comment">/* If desired, SW can make the work Q entry any length. For the purposes</span>
<a name="l00947"></a>00947 <span class="comment">     * of discussion here, Assume 128B always, as this is all that the hardware</span>
<a name="l00948"></a>00948 <span class="comment">     * deals with.*/</span>
<a name="l00949"></a>00949 } <a class="code" href="cvmx-utils_8h.html#a1e6d0d75cffd7a15260d42639478e56e">CVMX_CACHE_LINE_ALIGNED</a> <a class="code" href="structcvmx__wqe__s.html" title="Work queue entry format.">cvmx_wqe_t</a>;
<a name="l00950"></a>00950 <span class="comment"></span>
<a name="l00951"></a>00951 <span class="comment">/**</span>
<a name="l00952"></a>00952 <span class="comment"> * Work queue entry format for NQM</span>
<a name="l00953"></a>00953 <span class="comment"> * Must be 8-byte aligned</span>
<a name="l00954"></a>00954 <span class="comment"> */</span>
<a name="l00955"></a><a class="code" href="structcvmx__wqe__nqm__s.html">00955</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcvmx__wqe__nqm__s.html" title="Work queue entry format for NQM Must be 8-byte aligned.">cvmx_wqe_nqm_s</a> {
<a name="l00956"></a>00956     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00957"></a>00957     <span class="comment">/* WORD 0                                                                    */</span>
<a name="l00958"></a>00958     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00959"></a>00959     <span class="comment">/* HW WRITE: the following 64 bits are filled by HW when a packet arrives. */</span>
<a name="l00960"></a><a class="code" href="structcvmx__wqe__nqm__s.html#a5297b0431dd11590a44a1b2e961e1ae6">00960</a>     <a class="code" href="unioncvmx__wqe__word0__t.html">cvmx_wqe_word0_t</a> <a class="code" href="structcvmx__wqe__nqm__s.html#a5297b0431dd11590a44a1b2e961e1ae6">word0</a>;
<a name="l00961"></a>00961 
<a name="l00962"></a>00962     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00963"></a>00963     <span class="comment">/* WORD 1                                                                    */</span>
<a name="l00964"></a>00964     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00965"></a>00965     <span class="comment">/* HW WRITE: the following 64 bits are filled by HW when a packet arrives. */</span>
<a name="l00966"></a><a class="code" href="structcvmx__wqe__nqm__s.html#a073665287927c173cdbc1f9bf2466d44">00966</a>     <a class="code" href="unioncvmx__wqe__word1__t.html">cvmx_wqe_word1_t</a> <a class="code" href="structcvmx__wqe__nqm__s.html#a073665287927c173cdbc1f9bf2466d44">word1</a>;
<a name="l00967"></a>00967 
<a name="l00968"></a>00968     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00969"></a>00969     <span class="comment">/* WORD 2                                                                    */</span>
<a name="l00970"></a>00970     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00971"></a>00971     <span class="comment">/* Reserved */</span>
<a name="l00972"></a><a class="code" href="structcvmx__wqe__nqm__s.html#a037f2e3199858716bea1828147e13f88">00972</a>     uint64_t <a class="code" href="structcvmx__wqe__nqm__s.html#a037f2e3199858716bea1828147e13f88">word2</a>;
<a name="l00973"></a>00973 
<a name="l00974"></a>00974     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00975"></a>00975     <span class="comment">/* WORD 3                                                                    */</span>
<a name="l00976"></a>00976     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00977"></a>00977     <span class="comment">/* NVMe specific information.*/</span>
<a name="l00978"></a><a class="code" href="structcvmx__wqe__nqm__s.html#ae45d5c13621eac3d1f283b794496a26a">00978</a>     <a class="code" href="unioncvmx__wqe__word3__t.html">cvmx_wqe_word3_t</a> <a class="code" href="structcvmx__wqe__nqm__s.html#ae45d5c13621eac3d1f283b794496a26a">word3</a>;
<a name="l00979"></a>00979 
<a name="l00980"></a>00980     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00981"></a>00981     <span class="comment">/* WORD 4                                                                    */</span>
<a name="l00982"></a>00982     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l00983"></a>00983     <span class="comment">/* NVMe specific information.*/</span>
<a name="l00984"></a><a class="code" href="structcvmx__wqe__nqm__s.html#aa24334ee1e4e372e3a893a842a7fe440">00984</a>     <a class="code" href="unioncvmx__wqe__word4__t.html">cvmx_wqe_word4_t</a> <a class="code" href="structcvmx__wqe__nqm__s.html#aa24334ee1e4e372e3a893a842a7fe440">word4</a>;
<a name="l00985"></a>00985 
<a name="l00986"></a>00986     <span class="comment">/* HW WRITE: OCTEON will fill in a programmable amount from the packet,</span>
<a name="l00987"></a>00987 <span class="comment">     * up to (at most, but perhaps less) the amount needed to fill the work queue</span>
<a name="l00988"></a>00988 <span class="comment">     * entry to 128 bytes. If the packet is recognized to be IP, the hardware</span>
<a name="l00989"></a>00989 <span class="comment">     * starts (except that the IPv4 header is padded for appropriate alignment)</span>
<a name="l00990"></a>00990 <span class="comment">     * writing here where the IP header starts. If the packet is not recognized</span>
<a name="l00991"></a>00991 <span class="comment">     * to be IP, the hardware starts writing the beginning of the packet here.*/</span>
<a name="l00992"></a><a class="code" href="structcvmx__wqe__nqm__s.html#a15f363b6847ca8931124fffe28527393">00992</a>     uint8_t <a class="code" href="structcvmx__wqe__nqm__s.html#a15f363b6847ca8931124fffe28527393">packet_data</a>[88];
<a name="l00993"></a>00993 
<a name="l00994"></a>00994     <span class="comment">/* If desired, SW can make the work Q entry any length.</span>
<a name="l00995"></a>00995 <span class="comment">     * For the purposes of discussion here, assume 128B always, as this is</span>
<a name="l00996"></a>00996 <span class="comment">     * all that the hardware deals with.*/</span>
<a name="l00997"></a>00997 } <a class="code" href="cvmx-utils_8h.html#a1e6d0d75cffd7a15260d42639478e56e">CVMX_CACHE_LINE_ALIGNED</a> <a class="code" href="structcvmx__wqe__nqm__s.html" title="Work queue entry format for NQM Must be 8-byte aligned.">cvmx_wqe_nqm_t</a>;
<a name="l00998"></a>00998 <span class="comment"></span>
<a name="l00999"></a>00999 <span class="comment">/**</span>
<a name="l01000"></a>01000 <span class="comment"> * Work queue entry format for 78XX.</span>
<a name="l01001"></a>01001 <span class="comment"> * In 78XX packet data always resides in WQE buffer unless option</span>
<a name="l01002"></a>01002 <span class="comment"> * DIS_WQ_DAT=1 in PKI_STYLE_BUF, which causes packet data to use separate buffer.</span>
<a name="l01003"></a>01003 <span class="comment"> *</span>
<a name="l01004"></a>01004 <span class="comment"> * Must be 8-byte aligned.</span>
<a name="l01005"></a>01005 <span class="comment"> */</span>
<a name="l01006"></a><a class="code" href="structcvmx__wqe__78xx__t.html">01006</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l01007"></a>01007     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01008"></a>01008     <span class="comment">/* WORD 0                                                                    */</span>
<a name="l01009"></a>01009     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01010"></a>01010     <span class="comment">/* HW WRITE: the following 64 bits are filled by HW when a packet arrives.*/</span>
<a name="l01011"></a><a class="code" href="structcvmx__wqe__78xx__t.html#a68758d02767465949d1eeff8dc9b198b">01011</a>     <a class="code" href="unioncvmx__pki__wqe__word0__t.html">cvmx_pki_wqe_word0_t</a> word0;
<a name="l01012"></a>01012 
<a name="l01013"></a>01013     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01014"></a>01014     <span class="comment">/* WORD 1                                                                    */</span>
<a name="l01015"></a>01015     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01016"></a>01016     <span class="comment">/* HW WRITE: the following 64 bits are filled by HW when a packet arrives.*/</span>
<a name="l01017"></a><a class="code" href="structcvmx__wqe__78xx__t.html#a6e990a1af440fc80e33d0ebe217644b7">01017</a>     <a class="code" href="unioncvmx__pki__wqe__word1__t.html">cvmx_pki_wqe_word1_t</a> word1;
<a name="l01018"></a>01018 
<a name="l01019"></a>01019     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01020"></a>01020     <span class="comment">/* WORD 2                                                                    */</span>
<a name="l01021"></a>01021     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01022"></a>01022     <span class="comment">/* HW WRITE: the following 64-bits are filled in by hardware when a packet</span>
<a name="l01023"></a>01023 <span class="comment">     * arrives. This indicates a variety of status and error conditions.*/</span>
<a name="l01024"></a><a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">01024</a>     <a class="code" href="unioncvmx__pki__wqe__word2__t.html">cvmx_pki_wqe_word2_t</a> word2;
<a name="l01025"></a>01025 
<a name="l01026"></a>01026     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01027"></a>01027     <span class="comment">/* WORD 3                                                                    */</span>
<a name="l01028"></a>01028     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01029"></a>01029     <span class="comment">/* Pointer to the first segment of the packet.*/</span>
<a name="l01030"></a><a class="code" href="structcvmx__wqe__78xx__t.html#afe8eaf89015314c4cb7d44759d5c2aff">01030</a>     <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> packet_ptr;
<a name="l01031"></a>01031 
<a name="l01032"></a>01032     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01033"></a>01033     <span class="comment">/* WORD 4                                                                    */</span>
<a name="l01034"></a>01034     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01035"></a>01035     <span class="comment">/* HW WRITE: the following 64-bits are filled in by hardware when a packet</span>
<a name="l01036"></a>01036 <span class="comment">     * arrives contains a byte pointer to the start of Layer A/B/C/D/E/F/G relative</span>
<a name="l01037"></a>01037 <span class="comment">     * of start of packet.*/</span>
<a name="l01038"></a><a class="code" href="structcvmx__wqe__78xx__t.html#a45149a2754e634ec1f44f73b58dfbc95">01038</a>     <a class="code" href="unioncvmx__pki__wqe__word4__t.html">cvmx_pki_wqe_word4_t</a> word4;
<a name="l01039"></a>01039 
<a name="l01040"></a>01040     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01041"></a>01041     <span class="comment">/* WORDs 5/6/7 may be extended there, if WQE_HSZ is set.                     */</span>
<a name="l01042"></a>01042     <span class="comment">/*---------------------------------------------------------------------------*/</span>
<a name="l01043"></a><a class="code" href="structcvmx__wqe__78xx__t.html#a039bbdb6d82e776ad681066a58137e2c">01043</a>     uint64_t wqe_data[11];
<a name="l01044"></a>01044 
<a name="l01045"></a>01045 } <a class="code" href="cvmx-utils_8h.html#a1e6d0d75cffd7a15260d42639478e56e">CVMX_CACHE_LINE_ALIGNED</a> <a class="code" href="structcvmx__wqe__78xx__t.html" title="Work queue entry format for 78XX.">cvmx_wqe_78xx_t</a>;
<a name="l01046"></a>01046 
<a name="l01047"></a>01047 <span class="comment">/* Node LS-bit position in the WQE[grp] or PKI_QPG_TBL[grp_ok].*/</span>
<a name="l01048"></a><a class="code" href="cvmx-wqe_8h.html#a521186bad50c93c2e6bc54984d21d1ba">01048</a> <span class="preprocessor">#define CVMX_WQE_GRP_NODE_SHIFT  8</span>
<a name="l01049"></a>01049 <span class="preprocessor"></span>
<a name="l01050"></a>01050 <span class="comment">/*</span>
<a name="l01051"></a>01051 <span class="comment"> * This is an accessor function into the WQE that retreives the</span>
<a name="l01052"></a>01052 <span class="comment"> * ingress port number, which can also be used as a destination</span>
<a name="l01053"></a>01053 <span class="comment"> * port number for the same port.</span>
<a name="l01054"></a>01054 <span class="comment"> *</span>
<a name="l01055"></a>01055 <span class="comment"> * @param work - Work Queue Entrey pointer</span>
<a name="l01056"></a>01056 <span class="comment"> * @returns returns the normalized port number, also known as &quot;ipd&quot; port</span>
<a name="l01057"></a>01057 <span class="comment"> */</span>
<a name="l01058"></a><a class="code" href="cvmx-wqe_8h.html#a9570b015bdd999612c72c3200ed1730b">01058</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a9570b015bdd999612c72c3200ed1730b">cvmx_wqe_get_port</a>(cvmx_wqe_t *work)
<a name="l01059"></a>01059 {
<a name="l01060"></a>01060     <span class="keywordtype">int</span> port;
<a name="l01061"></a>01061 
<a name="l01062"></a>01062     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01063"></a>01063         <span class="comment">/* In 78xx wqe entry has channel number not port*/</span>
<a name="l01064"></a>01064         port = work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#a6abc9b41f0ca21e6421e5774e9267956">channel</a>;
<a name="l01065"></a>01065         <span class="comment">/* For BGX interfaces (0x800 - 0xdff) the 4 LSBs indicate</span>
<a name="l01066"></a>01066 <span class="comment">         * the PFC channel, must be cleared to normalize to &quot;ipd&quot;</span>
<a name="l01067"></a>01067 <span class="comment">         */</span>
<a name="l01068"></a>01068         <span class="keywordflow">if</span> (port &amp; 0x800)
<a name="l01069"></a>01069             port &amp;= 0xff0;
<a name="l01070"></a>01070         <span class="comment">/* Node number is in AURA field, make it part of port # */</span>
<a name="l01071"></a>01071         port |= (work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#ae84fcf08ed0965fec5d1ec345887f089">aura</a> &gt;&gt; 10) &lt;&lt; 12;
<a name="l01072"></a>01072     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01073"></a>01073         port = work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a90399c7984e768b0bc3797ddf90f2535">s_cn68xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a1aebfe5d51f9f7cb9d005d3235ebd32e">port</a>;
<a name="l01074"></a>01074     <span class="keywordflow">else</span>
<a name="l01075"></a>01075         port = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#ad95cc6d2e229ed98afcf2c85ac9e3368">ipprt</a>;
<a name="l01076"></a>01076 
<a name="l01077"></a>01077     <span class="keywordflow">return</span> port;
<a name="l01078"></a>01078 }
<a name="l01079"></a>01079 
<a name="l01080"></a><a class="code" href="cvmx-wqe_8h.html#afb2389ac24f38c764dbf9030f9b429a4">01080</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#afb2389ac24f38c764dbf9030f9b429a4">cvmx_wqe_set_port</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> port)
<a name="l01081"></a>01081 {
<a name="l01082"></a>01082     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01083"></a>01083         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#a6abc9b41f0ca21e6421e5774e9267956">channel</a> = port;
<a name="l01084"></a>01084     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01085"></a>01085         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a90399c7984e768b0bc3797ddf90f2535">s_cn68xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a1aebfe5d51f9f7cb9d005d3235ebd32e">port</a> = port;
<a name="l01086"></a>01086     <span class="keywordflow">else</span>
<a name="l01087"></a>01087         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#ad95cc6d2e229ed98afcf2c85ac9e3368">ipprt</a> = port;
<a name="l01088"></a>01088 }
<a name="l01089"></a>01089 
<a name="l01090"></a><a class="code" href="cvmx-wqe_8h.html#a42f948f24b1e68bde1c6fc0ca79832b1">01090</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a42f948f24b1e68bde1c6fc0ca79832b1">cvmx_wqe_get_grp</a>(cvmx_wqe_t *work)
<a name="l01091"></a>01091 {
<a name="l01092"></a>01092     <span class="keywordtype">int</span> grp;
<a name="l01093"></a>01093 
<a name="l01094"></a>01094     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01095"></a>01095         <span class="comment">/* legacy: GRP[0..2] :=QOS */</span>
<a name="l01096"></a>01096         grp = (0xff &amp; work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a>) &gt;&gt; 3;
<a name="l01097"></a>01097     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01098"></a>01098         grp = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a>;
<a name="l01099"></a>01099     <span class="keywordflow">else</span>
<a name="l01100"></a>01100         grp = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a>;
<a name="l01101"></a>01101 
<a name="l01102"></a>01102     <span class="keywordflow">return</span> grp;
<a name="l01103"></a>01103 }
<a name="l01104"></a>01104 
<a name="l01105"></a><a class="code" href="cvmx-wqe_8h.html#a71a9d3e9c72a5ec315920d9f746268b6">01105</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a71a9d3e9c72a5ec315920d9f746268b6">cvmx_wqe_set_xgrp</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> grp)
<a name="l01106"></a>01106 {
<a name="l01107"></a>01107     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01108"></a>01108         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> = grp;
<a name="l01109"></a>01109     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01110"></a>01110         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a> = grp;
<a name="l01111"></a>01111     <span class="keywordflow">else</span>
<a name="l01112"></a>01112         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a> = grp;
<a name="l01113"></a>01113 }
<a name="l01114"></a>01114 
<a name="l01115"></a><a class="code" href="cvmx-wqe_8h.html#a7bc45c44e9da81a8949ea565dfbe0e14">01115</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a7bc45c44e9da81a8949ea565dfbe0e14">cvmx_wqe_get_xgrp</a>(cvmx_wqe_t *work)
<a name="l01116"></a>01116 {
<a name="l01117"></a>01117     <span class="keywordtype">int</span> grp;
<a name="l01118"></a>01118 
<a name="l01119"></a>01119     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01120"></a>01120         grp = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a>;
<a name="l01121"></a>01121     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01122"></a>01122         grp = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a>;
<a name="l01123"></a>01123     <span class="keywordflow">else</span>
<a name="l01124"></a>01124         grp = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a>;
<a name="l01125"></a>01125 
<a name="l01126"></a>01126     <span class="keywordflow">return</span> grp;
<a name="l01127"></a>01127 }
<a name="l01128"></a>01128 
<a name="l01129"></a><a class="code" href="cvmx-wqe_8h.html#af0929172c2fe412b20df8a6dbf5bda79">01129</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#af0929172c2fe412b20df8a6dbf5bda79">cvmx_wqe_set_grp</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> grp)
<a name="l01130"></a>01130 {
<a name="l01131"></a>01131     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01132"></a>01132         <span class="keywordtype">unsigned</span> node = <a class="code" href="cvmx-access_8h.html#a9d019c6d93cab6e1f83e62029631b017" title="Number of the node on which the program is currently running.">cvmx_get_node_num</a>();
<a name="l01133"></a>01133         <span class="comment">/* Legacy: GRP[0..2] :=QOS */</span>
<a name="l01134"></a>01134         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> &amp;= 0x7;
<a name="l01135"></a>01135         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> |= 0xff &amp; (grp &lt;&lt; 3);
<a name="l01136"></a>01136         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> |= (node &lt;&lt; 8);
<a name="l01137"></a>01137     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01138"></a>01138         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a> = grp;
<a name="l01139"></a>01139     <span class="keywordflow">else</span>
<a name="l01140"></a>01140         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a773c52423297d7214524ee012a6d2735">grp</a> = grp;
<a name="l01141"></a>01141 }
<a name="l01142"></a>01142 
<a name="l01143"></a><a class="code" href="cvmx-wqe_8h.html#ac453f4e519c8a9b8b250ea4d375ceb21">01143</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#ac453f4e519c8a9b8b250ea4d375ceb21">cvmx_wqe_get_qos</a>(cvmx_wqe_t *work)
<a name="l01144"></a>01144 {
<a name="l01145"></a>01145     <span class="keywordtype">int</span> qos;
<a name="l01146"></a>01146 
<a name="l01147"></a>01147     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01148"></a>01148         <span class="comment">/* Legacy: GRP[0..2] :=QOS */</span>
<a name="l01149"></a>01149         qos = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> &amp; 0x7;
<a name="l01150"></a>01150     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01151"></a>01151         qos = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#acab54ba0468b02313696079a02626d28">qos</a>;
<a name="l01152"></a>01152     <span class="keywordflow">else</span>
<a name="l01153"></a>01153         qos = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#acab54ba0468b02313696079a02626d28">qos</a>;
<a name="l01154"></a>01154 
<a name="l01155"></a>01155     <span class="keywordflow">return</span> qos;
<a name="l01156"></a>01156 }
<a name="l01157"></a>01157 
<a name="l01158"></a><a class="code" href="cvmx-wqe_8h.html#a46762d5ca42a4421ec26e02773515ece">01158</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a46762d5ca42a4421ec26e02773515ece">cvmx_wqe_set_qos</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> qos)
<a name="l01159"></a>01159 {
<a name="l01160"></a>01160     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01161"></a>01161         <span class="comment">/* legacy: GRP[0..2] :=QOS */</span>
<a name="l01162"></a>01162         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> &amp;= ~0x7;
<a name="l01163"></a>01163         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a3f6cfcd61bee89bf5bdb6b8f933ab2ae">grp</a> |= qos &amp; 0x7;
<a name="l01164"></a>01164     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01165"></a>01165         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#acab54ba0468b02313696079a02626d28">qos</a> = qos;
<a name="l01166"></a>01166     <span class="keywordflow">else</span>
<a name="l01167"></a>01167         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#acab54ba0468b02313696079a02626d28">qos</a> = qos;
<a name="l01168"></a>01168 }
<a name="l01169"></a>01169 
<a name="l01170"></a><a class="code" href="cvmx-wqe_8h.html#aa143d399e373efcfa8774e72d5c20e1e">01170</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#aa143d399e373efcfa8774e72d5c20e1e">cvmx_wqe_get_len</a>(cvmx_wqe_t *work)
<a name="l01171"></a>01171 {
<a name="l01172"></a>01172     <span class="keywordtype">int</span> len;
<a name="l01173"></a>01173 
<a name="l01174"></a>01174     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01175"></a>01175         len = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#adeb99ed638c8bd8112140c1bb569d5fe">len</a>;
<a name="l01176"></a>01176     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01177"></a>01177         len = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a587fc6378df7868e8eb7e6e067eb239a">len</a>;
<a name="l01178"></a>01178     <span class="keywordflow">else</span>
<a name="l01179"></a>01179         len = work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a587fc6378df7868e8eb7e6e067eb239a">len</a>;
<a name="l01180"></a>01180 
<a name="l01181"></a>01181     <span class="keywordflow">return</span> len;
<a name="l01182"></a>01182 }
<a name="l01183"></a>01183 
<a name="l01184"></a><a class="code" href="cvmx-wqe_8h.html#aa84f93905cf1f1ec422d23e4de8e4396">01184</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#aa84f93905cf1f1ec422d23e4de8e4396">cvmx_wqe_set_len</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> len)
<a name="l01185"></a>01185 {
<a name="l01186"></a>01186     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01187"></a>01187         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#adeb99ed638c8bd8112140c1bb569d5fe">len</a> = len;
<a name="l01188"></a>01188     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01189"></a>01189         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a587fc6378df7868e8eb7e6e067eb239a">len</a> = len;
<a name="l01190"></a>01190     <span class="keywordflow">else</span>
<a name="l01191"></a>01191         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a587fc6378df7868e8eb7e6e067eb239a">len</a> = len;
<a name="l01192"></a>01192 }
<a name="l01193"></a>01193 <span class="comment"></span>
<a name="l01194"></a>01194 <span class="comment">/**</span>
<a name="l01195"></a>01195 <span class="comment"> * This function returns, if there was L2/L1 errors detected in packet.</span>
<a name="l01196"></a>01196 <span class="comment"> *</span>
<a name="l01197"></a>01197 <span class="comment"> * @param work  pointer to work queue entry</span>
<a name="l01198"></a>01198 <span class="comment"> *</span>
<a name="l01199"></a>01199 <span class="comment"> * @return  0 if packet had no error, non-zero to indicate error code.</span>
<a name="l01200"></a>01200 <span class="comment"> *</span>
<a name="l01201"></a>01201 <span class="comment"> * Please refer to HRM for the specific model for full enumaration of error codes.</span>
<a name="l01202"></a>01202 <span class="comment"> * With Octeon1/Octeon2 models, the returned code indicates L1/L2 errors.</span>
<a name="l01203"></a>01203 <span class="comment"> * On CN73XX/CN78XX, the return code is the value of PKI_OPCODE_E,</span>
<a name="l01204"></a>01204 <span class="comment"> * if it is non-zero, otherwise the returned code will be derived from</span>
<a name="l01205"></a>01205 <span class="comment"> * PKI_ERRLEV_E such that an error indicated in LayerA will return 0x20,</span>
<a name="l01206"></a>01206 <span class="comment"> * LayerB - 0x30, LayerC - 0x40 and so forth.</span>
<a name="l01207"></a>01207 <span class="comment"> */</span>
<a name="l01208"></a><a class="code" href="cvmx-wqe_8h.html#a8106066d0eebae3d701f505852eecc2d">01208</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a8106066d0eebae3d701f505852eecc2d" title="This function returns, if there was L2/L1 errors detected in packet.">cvmx_wqe_get_rcv_err</a>(cvmx_wqe_t *work)
<a name="l01209"></a>01209 {
<a name="l01210"></a>01210     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01211"></a>01211         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01212"></a>01212         <span class="keywordflow">if</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a0a9cfb3b9504e2c1d6b39394177c3e9c">err_level</a> == <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a1b179967023e9513255260d6a0456a79">CVMX_PKI_ERRLEV_E_RE</a> ||
<a name="l01213"></a>01213                 wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac20df080cfb15cacf0e821c3b9f7b84f">err_code</a> != 0)
<a name="l01214"></a>01214             <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac20df080cfb15cacf0e821c3b9f7b84f">err_code</a>;
<a name="l01215"></a>01215         <span class="keywordflow">else</span>
<a name="l01216"></a>01216             <span class="keywordflow">return</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a0a9cfb3b9504e2c1d6b39394177c3e9c">err_level</a> &lt;&lt; 4) + 0x10;
<a name="l01217"></a>01217     }
<a name="l01218"></a>01218     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a709e90b3fffa02b0d8d4377c49d89d44">snoip</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a0e4c32d6ed697b532f616808827f4808">rcv_error</a>)
<a name="l01219"></a>01219         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a709e90b3fffa02b0d8d4377c49d89d44">snoip</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ae5e3a581782a41ef0a347318b73ddc8f">err_code</a>;
<a name="l01220"></a>01220     <span class="keywordflow">return</span> 0;
<a name="l01221"></a>01221 }
<a name="l01222"></a>01222 
<a name="l01223"></a><a class="code" href="cvmx-wqe_8h.html#a11f6f624231512b827c891f0c10b9777">01223</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint32_t <a class="code" href="cvmx-wqe_8h.html#a11f6f624231512b827c891f0c10b9777">cvmx_wqe_get_tag</a>(cvmx_wqe_t *work)
<a name="l01224"></a>01224 {
<a name="l01225"></a>01225     <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#ab5dd3b96f9a70b6bf21c1449428e58cc">tag</a>;
<a name="l01226"></a>01226 }
<a name="l01227"></a>01227 
<a name="l01228"></a><a class="code" href="cvmx-wqe_8h.html#aa50f7e118bf2bc0196139ed2590e40de">01228</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#aa50f7e118bf2bc0196139ed2590e40de">cvmx_wqe_set_tag</a>(cvmx_wqe_t *work, uint32_t tag)
<a name="l01229"></a>01229 {
<a name="l01230"></a>01230     work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#ab5dd3b96f9a70b6bf21c1449428e58cc">tag</a> = tag;
<a name="l01231"></a>01231 }
<a name="l01232"></a>01232 
<a name="l01233"></a><a class="code" href="cvmx-wqe_8h.html#a5f37b821beefb73dabf798425999c76e">01233</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a5f37b821beefb73dabf798425999c76e">cvmx_wqe_get_tt</a>(cvmx_wqe_t *work)
<a name="l01234"></a>01234 {
<a name="l01235"></a>01235     <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a427803f115140e266fc6f14c990befae">tag_type</a>;
<a name="l01236"></a>01236 }
<a name="l01237"></a>01237 
<a name="l01238"></a><a class="code" href="cvmx-wqe_8h.html#a2bbabe564703cf12a5920d4e92663cd3">01238</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a2bbabe564703cf12a5920d4e92663cd3">cvmx_wqe_set_tt</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> tt)
<a name="l01239"></a>01239 {
<a name="l01240"></a>01240     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01241"></a>01241         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a6cad44db13a3ea8e19f39d808543c6d4">cn78xx</a>.<a class="code" href="unioncvmx__pki__wqe__word1__t.html#a31371f143dd1069e49a69e1ce0b5f091">tag_type</a> = (<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a>) tt;
<a name="l01242"></a>01242     }
<a name="l01243"></a>01243     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>)) {
<a name="l01244"></a>01244         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a427803f115140e266fc6f14c990befae">tag_type</a> = (<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a>) tt;
<a name="l01245"></a>01245         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a30a304de6ce9065fce3f26e2506d916b">cn68xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a194faf2d91b219f59aad77e8181f6de3">zero_2</a> = 0;
<a name="l01246"></a>01246     }
<a name="l01247"></a>01247     <span class="keywordflow">else</span> {
<a name="l01248"></a>01248         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a427803f115140e266fc6f14c990befae">tag_type</a> = (<a class="code" href="cvmx-csr-enums_8h.html#a556896ab26554db9f539b17e5dbc749b" title="Tag type definitions.">cvmx_pow_tag_type_t</a>) tt;
<a name="l01249"></a>01249         work-&gt;<a class="code" href="structcvmx__wqe__s.html#af6703f060661d1ed55792cfd5c5f0d84">word1</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a2bb9e3407451b67b22ed429d54f6fd14">cn38xx</a>.<a class="code" href="unioncvmx__wqe__word1__t.html#a194faf2d91b219f59aad77e8181f6de3">zero_2</a> = 0;
<a name="l01250"></a>01250     }
<a name="l01251"></a>01251 }
<a name="l01252"></a>01252 
<a name="l01253"></a><a class="code" href="cvmx-wqe_8h.html#ad661edcbfdf1d02f1ff6daf590d6bc9d">01253</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="cvmx-wqe_8h.html#ad661edcbfdf1d02f1ff6daf590d6bc9d">cvmx_wqe_get_unused8</a>(cvmx_wqe_t *work)
<a name="l01254"></a>01254 {
<a name="l01255"></a>01255     uint8_t bits;
<a name="l01256"></a>01256 
<a name="l01257"></a>01257     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01258"></a>01258         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01259"></a>01259         bits = wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a1b136bf6b46c90de8e7bc038b3244c92">rsvd_0</a>;
<a name="l01260"></a>01260     }
<a name="l01261"></a>01261     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01262"></a>01262         bits = work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a89d0cb5134e6dbf0a109d23c4b2905e4">pip</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#a6b70e9466ea24a8ccbb1d27dcc1a6c6b">cn68xx</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#acc13fe3a809908850678e57b58418b88">unused1</a>;
<a name="l01263"></a>01263     <span class="keywordflow">else</span>
<a name="l01264"></a>01264         bits = work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a89d0cb5134e6dbf0a109d23c4b2905e4">pip</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#acdaa260c74247c0e4426bbeabfde967f">cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#a9c6f7c2f0e715dbab1c0ec1b17098d9f">unused</a>;
<a name="l01265"></a>01265 
<a name="l01266"></a>01266     <span class="keywordflow">return</span> bits;
<a name="l01267"></a>01267 }
<a name="l01268"></a>01268 
<a name="l01269"></a><a class="code" href="cvmx-wqe_8h.html#aa0b3118686ff0fb29eb003defe611e90">01269</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#aa0b3118686ff0fb29eb003defe611e90">cvmx_wqe_set_unused8</a>(cvmx_wqe_t *work, uint8_t v)
<a name="l01270"></a>01270 {
<a name="l01271"></a>01271     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01272"></a>01272         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01273"></a>01273         wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a1b136bf6b46c90de8e7bc038b3244c92">rsvd_0</a> = v;
<a name="l01274"></a>01274     }
<a name="l01275"></a>01275     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab418091ad74362893e0719ec15a6fe3a" title="CN68XX has different fields in word0 - word2.">OCTEON_FEATURE_CN68XX_WQE</a>))
<a name="l01276"></a>01276         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a89d0cb5134e6dbf0a109d23c4b2905e4">pip</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#a6b70e9466ea24a8ccbb1d27dcc1a6c6b">cn68xx</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#acc13fe3a809908850678e57b58418b88">unused1</a> = v;
<a name="l01277"></a>01277     <span class="keywordflow">else</span>
<a name="l01278"></a>01278         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a89d0cb5134e6dbf0a109d23c4b2905e4">pip</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#acdaa260c74247c0e4426bbeabfde967f">cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word0__t.html#a9c6f7c2f0e715dbab1c0ec1b17098d9f">unused</a> = v;
<a name="l01279"></a>01279 }
<a name="l01280"></a>01280 
<a name="l01281"></a><a class="code" href="cvmx-wqe_8h.html#aa00033af74aba2d1fb420f266c9d8f28">01281</a> <span class="keyword">static</span> <span class="keyword">inline</span> uint8_t <a class="code" href="cvmx-wqe_8h.html#aa00033af74aba2d1fb420f266c9d8f28">cvmx_wqe_get_user_flags</a>(cvmx_wqe_t *work)
<a name="l01282"></a>01282 {
<a name="l01283"></a>01283     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01284"></a>01284         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#a646750df655c08245492987c3d4d3282">rsvd_2</a>;
<a name="l01285"></a>01285     <span class="keywordflow">else</span>
<a name="l01286"></a>01286         <span class="keywordflow">return</span> 0;
<a name="l01287"></a>01287 }
<a name="l01288"></a>01288 
<a name="l01289"></a><a class="code" href="cvmx-wqe_8h.html#a696125584dbee4a5a11450b366fb1b0b">01289</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a696125584dbee4a5a11450b366fb1b0b">cvmx_wqe_set_user_flags</a>(cvmx_wqe_t *work, uint8_t v)
<a name="l01290"></a>01290 {
<a name="l01291"></a>01291     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01292"></a>01292         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#a646750df655c08245492987c3d4d3282">rsvd_2</a> = v;
<a name="l01293"></a>01293 }
<a name="l01294"></a>01294 
<a name="l01295"></a><a class="code" href="cvmx-wqe_8h.html#a42558f90ca8d93f7990a7e24caf977a8">01295</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a42558f90ca8d93f7990a7e24caf977a8">cvmx_wqe_get_channel</a>(cvmx_wqe_t *work)
<a name="l01296"></a>01296 {
<a name="l01297"></a>01297     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01298"></a>01298         <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#a6abc9b41f0ca21e6421e5774e9267956">channel</a>);
<a name="l01299"></a>01299     <span class="keywordflow">else</span>
<a name="l01300"></a>01300         <span class="keywordflow">return</span> <a class="code" href="cvmx-wqe_8h.html#a9570b015bdd999612c72c3200ed1730b">cvmx_wqe_get_port</a>(work);
<a name="l01301"></a>01301 }
<a name="l01302"></a>01302 
<a name="l01303"></a><a class="code" href="cvmx-wqe_8h.html#a828e91f48779e7c2873a74c3a3a37249">01303</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a828e91f48779e7c2873a74c3a3a37249">cvmx_wqe_set_channel</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> channel)
<a name="l01304"></a>01304 {
<a name="l01305"></a>01305     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01306"></a>01306         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#a6abc9b41f0ca21e6421e5774e9267956">channel</a> = channel;
<a name="l01307"></a>01307     <span class="keywordflow">else</span>
<a name="l01308"></a>01308         <a class="code" href="cvmx-utils_8h.html#a50112e4e118a749dcf244ccafcdc37ba">cvmx_dprintf</a>(<span class="stringliteral">&quot;%s: ERROR: not supported for model\n&quot;</span>,__func__);
<a name="l01309"></a>01309 }
<a name="l01310"></a>01310 
<a name="l01311"></a><a class="code" href="cvmx-wqe_8h.html#a5ff61222c8dfc8e44e271bfbb75be3a9">01311</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a5ff61222c8dfc8e44e271bfbb75be3a9">cvmx_wqe_get_aura</a>(cvmx_wqe_t *work)
<a name="l01312"></a>01312 {
<a name="l01313"></a>01313     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01314"></a>01314         <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#ae84fcf08ed0965fec5d1ec345887f089">aura</a>);
<a name="l01315"></a>01315     <span class="keywordflow">else</span>
<a name="l01316"></a>01316         <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#a5dcd5b40716d41209227039d479af803">packet_ptr</a>.<a class="code" href="unioncvmx__buf__ptr.html#a14f33b3072f84ff79b4461a40bf6d00a">s</a>.<a class="code" href="unioncvmx__buf__ptr.html#a97c320c8ab4deb509336215882bd712b">pool</a>);
<a name="l01317"></a>01317 }
<a name="l01318"></a>01318 
<a name="l01319"></a><a class="code" href="cvmx-wqe_8h.html#abbca7b093f836a6793e7abddc51dee49">01319</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#abbca7b093f836a6793e7abddc51dee49">cvmx_wqe_set_aura</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> aura)
<a name="l01320"></a>01320 {
<a name="l01321"></a>01321     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01322"></a>01322         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#ae84fcf08ed0965fec5d1ec345887f089">aura</a> = aura;
<a name="l01323"></a>01323     <span class="keywordflow">else</span>
<a name="l01324"></a>01324         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a5dcd5b40716d41209227039d479af803">packet_ptr</a>.<a class="code" href="unioncvmx__buf__ptr.html#a14f33b3072f84ff79b4461a40bf6d00a">s</a>.<a class="code" href="unioncvmx__buf__ptr.html#a97c320c8ab4deb509336215882bd712b">pool</a> = aura;
<a name="l01325"></a>01325 }
<a name="l01326"></a>01326 
<a name="l01327"></a><a class="code" href="cvmx-wqe_8h.html#adab886d37926b5e50d032411ca5a3212">01327</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#adab886d37926b5e50d032411ca5a3212">cvmx_wqe_get_style</a>(cvmx_wqe_t *work)
<a name="l01328"></a>01328 {
<a name="l01329"></a>01329     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01330"></a>01330         <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#afcc4827133af78c61ae99ae8453d3798">style</a>);
<a name="l01331"></a>01331     <span class="keywordflow">return</span> 0;
<a name="l01332"></a>01332 }
<a name="l01333"></a>01333 
<a name="l01334"></a><a class="code" href="cvmx-wqe_8h.html#a38bb02887ac5b6c0687a0458a42167b9">01334</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a38bb02887ac5b6c0687a0458a42167b9">cvmx_wqe_set_style</a>(cvmx_wqe_t *work, <span class="keywordtype">int</span> style)
<a name="l01335"></a>01335 {
<a name="l01336"></a>01336     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01337"></a>01337         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#afcc4827133af78c61ae99ae8453d3798">style</a> = style;
<a name="l01338"></a>01338 }
<a name="l01339"></a>01339 
<a name="l01340"></a><a class="code" href="cvmx-wqe_8h.html#a5b920185d685fda6e366f778e65ff216">01340</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a5b920185d685fda6e366f778e65ff216">cvmx_wqe_is_l3_ip</a>(cvmx_wqe_t *work)
<a name="l01341"></a>01341 {
<a name="l01342"></a>01342     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01343"></a>01343         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01344"></a>01344         <span class="comment">/* Match all 4 values for v4/v6 with.without options */</span>
<a name="l01345"></a>01345         <span class="keywordflow">if</span>((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> &amp; 0x1c) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>)
<a name="l01346"></a>01346             <span class="keywordflow">return</span> 1;
<a name="l01347"></a>01347         <span class="keywordflow">if</span>((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac3c899f9ff193aa9c0ef73265415cff0">le_hdr_type</a> &amp; 0x1c) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>)
<a name="l01348"></a>01348             <span class="keywordflow">return</span> 1;
<a name="l01349"></a>01349         <span class="keywordflow">return</span> 0;
<a name="l01350"></a>01350     }
<a name="l01351"></a>01351     <span class="keywordflow">else</span>
<a name="l01352"></a>01352         <span class="keywordflow">return</span> !work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>;
<a name="l01353"></a>01353 }
<a name="l01354"></a>01354 
<a name="l01355"></a><a class="code" href="cvmx-wqe_8h.html#a3909041c9688d37bd5bb546446f0a23a">01355</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a3909041c9688d37bd5bb546446f0a23a">cvmx_wqe_is_l3_ipv4</a>(cvmx_wqe_t *work)
<a name="l01356"></a>01356 {
<a name="l01357"></a>01357     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01358"></a>01358         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01359"></a>01359         <span class="comment">/* Match 2 values - with/wotuout options */</span>
<a name="l01360"></a>01360         <span class="keywordflow">if</span>((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> &amp; 0x1e) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>)
<a name="l01361"></a>01361             <span class="keywordflow">return</span> 1;
<a name="l01362"></a>01362         <span class="keywordflow">if</span>((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac3c899f9ff193aa9c0ef73265415cff0">le_hdr_type</a> &amp; 0x1e) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>)
<a name="l01363"></a>01363             <span class="keywordflow">return</span> 1;
<a name="l01364"></a>01364         <span class="keywordflow">return</span> 0;
<a name="l01365"></a>01365     }
<a name="l01366"></a>01366     <span class="keywordflow">else</span>
<a name="l01367"></a>01367         <span class="keywordflow">return</span> (!work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a> &amp;&amp; !work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad95688c6aa3221a7a5171f8cc03efc97">is_v6</a>);
<a name="l01368"></a>01368 }
<a name="l01369"></a>01369 
<a name="l01370"></a><a class="code" href="cvmx-wqe_8h.html#a9dbab61d393162fe564d1517fadbce7d">01370</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a9dbab61d393162fe564d1517fadbce7d">cvmx_wqe_is_l3_ipv6</a>(cvmx_wqe_t *work)
<a name="l01371"></a>01371 {
<a name="l01372"></a>01372     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01373"></a>01373         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01374"></a>01374         <span class="comment">/* Match 2 values - with/wotuout options */</span>
<a name="l01375"></a>01375         <span class="keywordflow">if</span>((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> &amp; 0x1e) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a287e03c1180695755087a4260329ac8a">CVMX_PKI_LTYPE_E_IP6</a>)
<a name="l01376"></a>01376             <span class="keywordflow">return</span> 1;
<a name="l01377"></a>01377         <span class="keywordflow">if</span>((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#ac3c899f9ff193aa9c0ef73265415cff0">le_hdr_type</a> &amp; 0x1e) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a287e03c1180695755087a4260329ac8a">CVMX_PKI_LTYPE_E_IP6</a>)
<a name="l01378"></a>01378             <span class="keywordflow">return</span> 1;
<a name="l01379"></a>01379         <span class="keywordflow">return</span> 0;
<a name="l01380"></a>01380     }
<a name="l01381"></a>01381     <span class="keywordflow">else</span>
<a name="l01382"></a>01382         <span class="keywordflow">return</span> (!work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a> &amp;&amp; work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad95688c6aa3221a7a5171f8cc03efc97">is_v6</a>);
<a name="l01383"></a>01383 }
<a name="l01384"></a>01384 
<a name="l01385"></a><a class="code" href="cvmx-wqe_8h.html#aa7047a0ec1c2ac6016f9ad8c151de123">01385</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="cvmx-wqe_8h.html#aa7047a0ec1c2ac6016f9ad8c151de123">cvmx_wqe_is_l4_udp_or_tcp</a>(cvmx_wqe_t *work)
<a name="l01386"></a>01386 {
<a name="l01387"></a>01387     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01388"></a>01388         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01389"></a>01389         <span class="keywordflow">if</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">lf_hdr_type</a>  == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac8a5a88eb5091c2cf4cee5df00d61784">CVMX_PKI_LTYPE_E_TCP</a>)
<a name="l01390"></a>01390             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01391"></a>01391         <span class="keywordflow">if</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">lf_hdr_type</a>  == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a8ed3c1771823ec89dc8bcf9ed5756d0b">CVMX_PKI_LTYPE_E_UDP</a>)
<a name="l01392"></a>01392             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l01393"></a>01393         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01394"></a>01394     }
<a name="l01395"></a>01395     <span class="keywordflow">else</span> {
<a name="l01396"></a>01396         <span class="keywordflow">if</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>)
<a name="l01397"></a>01397             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01398"></a>01398         <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad7b41e904c8e9d4c4708ea6bee7e21b1">tcp_or_udp</a> != 0);
<a name="l01399"></a>01399     }
<a name="l01400"></a>01400 }
<a name="l01401"></a>01401 
<a name="l01402"></a><a class="code" href="cvmx-wqe_8h.html#a3b9f9c66fb152f14e1493092461e14cc">01402</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a3b9f9c66fb152f14e1493092461e14cc">cvmx_wqe_is_l2_bcast</a>(cvmx_wqe_t *work)
<a name="l01403"></a>01403 {
<a name="l01404"></a>01404     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01405"></a>01405         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01406"></a>01406         <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#af952d8234ac67bf638ef25a8746ba148">is_l2_bcast</a>;
<a name="l01407"></a>01407     }
<a name="l01408"></a>01408     <span class="keywordflow">else</span>
<a name="l01409"></a>01409         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a90088dbf44f647b97de81317aa2aa9a7">is_bcast</a>;
<a name="l01410"></a>01410 }
<a name="l01411"></a>01411 
<a name="l01412"></a><a class="code" href="cvmx-wqe_8h.html#ad2c5654505e45756f79519e79221380c">01412</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#ad2c5654505e45756f79519e79221380c">cvmx_wqe_is_l2_mcast</a>(cvmx_wqe_t *work)
<a name="l01413"></a>01413 {
<a name="l01414"></a>01414     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01415"></a>01415         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01416"></a>01416         <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a7f5e58ff94e53c141ce51d0a7802dd6c">is_l2_mcast</a>;
<a name="l01417"></a>01417     }
<a name="l01418"></a>01418     <span class="keywordflow">else</span>
<a name="l01419"></a>01419         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a0ff646ecfb2c8a252552ff2febb325d7">is_mcast</a>;
<a name="l01420"></a>01420 }
<a name="l01421"></a>01421 
<a name="l01422"></a><a class="code" href="cvmx-wqe_8h.html#a1d9d1df8b49115817d2f25a3caaf3bf2">01422</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a1d9d1df8b49115817d2f25a3caaf3bf2">cvmx_wqe_set_l2_bcast</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> bcast)
<a name="l01423"></a>01423 {
<a name="l01424"></a>01424     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01425"></a>01425         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01426"></a>01426         wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#af952d8234ac67bf638ef25a8746ba148">is_l2_bcast</a> = bcast;
<a name="l01427"></a>01427     }
<a name="l01428"></a>01428     <span class="keywordflow">else</span>
<a name="l01429"></a>01429         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a90088dbf44f647b97de81317aa2aa9a7">is_bcast</a> = bcast;
<a name="l01430"></a>01430 }
<a name="l01431"></a>01431 
<a name="l01432"></a><a class="code" href="cvmx-wqe_8h.html#a3b399ff4b5767d480faf1b55cbf41d0a">01432</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a3b399ff4b5767d480faf1b55cbf41d0a">cvmx_wqe_set_l2_mcast</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> mcast)
<a name="l01433"></a>01433 {
<a name="l01434"></a>01434     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01435"></a>01435         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01436"></a>01436         wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a7f5e58ff94e53c141ce51d0a7802dd6c">is_l2_mcast</a> = mcast;
<a name="l01437"></a>01437     }
<a name="l01438"></a>01438     <span class="keywordflow">else</span>
<a name="l01439"></a>01439         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a0ff646ecfb2c8a252552ff2febb325d7">is_mcast</a> = mcast;
<a name="l01440"></a>01440 }
<a name="l01441"></a>01441 
<a name="l01442"></a><a class="code" href="cvmx-wqe_8h.html#af6a1948688e1a382665ecdbe8da4a2fb">01442</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#af6a1948688e1a382665ecdbe8da4a2fb">cvmx_wqe_is_l3_bcast</a>(cvmx_wqe_t *work)
<a name="l01443"></a>01443 {
<a name="l01444"></a>01444     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01445"></a>01445         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01446"></a>01446         <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a55241918956de3e7a07d24f26eb9ecc6">is_l3_bcast</a>;
<a name="l01447"></a>01447     }
<a name="l01448"></a>01448     <a class="code" href="cvmx-utils_8h.html#a50112e4e118a749dcf244ccafcdc37ba">cvmx_dprintf</a>(<span class="stringliteral">&quot;%s: ERROR: not supported for model\n&quot;</span>,__func__);
<a name="l01449"></a>01449     <span class="keywordflow">return</span> 0;
<a name="l01450"></a>01450 }
<a name="l01451"></a>01451 
<a name="l01452"></a><a class="code" href="cvmx-wqe_8h.html#ac8f830e3209888115ba7fb4f86ea59b3">01452</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#ac8f830e3209888115ba7fb4f86ea59b3">cvmx_wqe_is_l3_mcast</a>(cvmx_wqe_t *work)
<a name="l01453"></a>01453 {
<a name="l01454"></a>01454     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)){
<a name="l01455"></a>01455         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01456"></a>01456         <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a35c3f9b4b3d02438b55a0165a496df3b">is_l3_mcast</a>;
<a name="l01457"></a>01457     }
<a name="l01458"></a>01458     <a class="code" href="cvmx-utils_8h.html#a50112e4e118a749dcf244ccafcdc37ba">cvmx_dprintf</a>(<span class="stringliteral">&quot;%s: ERROR: not supported for model\n&quot;</span>,__func__);
<a name="l01459"></a>01459     <span class="keywordflow">return</span> 0;
<a name="l01460"></a>01460 }
<a name="l01461"></a>01461 <span class="comment"></span>
<a name="l01462"></a>01462 <span class="comment">/**</span>
<a name="l01463"></a>01463 <span class="comment"> * This function returns is there was IP error detected in packet.</span>
<a name="l01464"></a>01464 <span class="comment"> * For 78XX it does not flag ipv4 options and ipv6 extensions.</span>
<a name="l01465"></a>01465 <span class="comment"> * For older chips if PIP_GBL_CTL was proviosned to flag ip4_otions and</span>
<a name="l01466"></a>01466 <span class="comment"> * ipv6 extension, it will be flag them.</span>
<a name="l01467"></a>01467 <span class="comment"> * @param work  pointer to work queue entry</span>
<a name="l01468"></a>01468 <span class="comment"> * @return  1 -- If IP error was found in packet</span>
<a name="l01469"></a>01469 <span class="comment"> *          0 -- If no IP error was found in packet.</span>
<a name="l01470"></a>01470 <span class="comment"> */</span>
<a name="l01471"></a><a class="code" href="cvmx-wqe_8h.html#ab213deeafb8a5d1195b9e2b4d6598666">01471</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#ab213deeafb8a5d1195b9e2b4d6598666" title="This function returns is there was IP error detected in packet.">cvmx_wqe_is_ip_exception</a>(cvmx_wqe_t *work)
<a name="l01472"></a>01472 {
<a name="l01473"></a>01473     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01474"></a>01474         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01475"></a>01475         <span class="keywordflow">if</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a0a9cfb3b9504e2c1d6b39394177c3e9c">err_level</a> == <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a6dedbf5ea90348c845eb723ed19ec21f">CVMX_PKI_ERRLEV_E_LC</a>)
<a name="l01476"></a>01476             <span class="keywordflow">return</span> 1;
<a name="l01477"></a>01477         <span class="keywordflow">else</span>
<a name="l01478"></a>01478             <span class="keywordflow">return</span> 0;
<a name="l01479"></a>01479     }
<a name="l01480"></a>01480     <span class="keywordflow">else</span>
<a name="l01481"></a>01481         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#aad33d272344fbcc137df9315c1181de1">IP_exc</a>;
<a name="l01482"></a>01482 }
<a name="l01483"></a>01483 
<a name="l01484"></a><a class="code" href="cvmx-wqe_8h.html#afc38b429775197ef711cb5be6fc8f739">01484</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#afc38b429775197ef711cb5be6fc8f739">cvmx_wqe_is_l4_error</a>(cvmx_wqe_t *work)
<a name="l01485"></a>01485 {
<a name="l01486"></a>01486     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01487"></a>01487         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01488"></a>01488         <span class="keywordflow">if</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a0a9cfb3b9504e2c1d6b39394177c3e9c">err_level</a> == <a class="code" href="cvmx-wqe_8h.html#a38fbbb10f727c5cb076b4cde6cf18d13a8a0e5cda7dbb307e9d465acaa8473e5b">CVMX_PKI_ERRLEV_E_LF</a>)
<a name="l01489"></a>01489             <span class="keywordflow">return</span> 1;
<a name="l01490"></a>01490         <span class="keywordflow">else</span>
<a name="l01491"></a>01491             <span class="keywordflow">return</span> 0;
<a name="l01492"></a>01492     }
<a name="l01493"></a>01493     <span class="keywordflow">else</span>
<a name="l01494"></a>01494         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a9597b3c74b7fd3b209df1ebb0a625feb">L4_error</a>;
<a name="l01495"></a>01495 }
<a name="l01496"></a>01496 
<a name="l01497"></a><a class="code" href="cvmx-wqe_8h.html#aa53dcbcc29773ce8d08447c84582606e">01497</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#aa53dcbcc29773ce8d08447c84582606e">cvmx_wqe_set_vlan</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01498"></a>01498 {
<a name="l01499"></a>01499     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01500"></a>01500         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01501"></a>01501             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a2c85a7e6359e50da6810eade5884ed15">vlan_valid</a> = <span class="keyword">set</span>;
<a name="l01502"></a>01502     }
<a name="l01503"></a>01503     <span class="keywordflow">else</span>
<a name="l01504"></a>01504         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#acc44385a4f8506e2278a9fdf662f77b1">vlan_valid</a> = <span class="keyword">set</span>;
<a name="l01505"></a>01505 }
<a name="l01506"></a>01506 
<a name="l01507"></a>01507 
<a name="l01508"></a><a class="code" href="cvmx-wqe_8h.html#a1ed4218ed08d555d5ce673bb036f9db1">01508</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a1ed4218ed08d555d5ce673bb036f9db1">cvmx_wqe_is_vlan</a>(cvmx_wqe_t *work)
<a name="l01509"></a>01509 {
<a name="l01510"></a>01510     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01511"></a>01511         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01512"></a>01512             <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a2c85a7e6359e50da6810eade5884ed15">vlan_valid</a>;
<a name="l01513"></a>01513     }
<a name="l01514"></a>01514     <span class="keywordflow">else</span>
<a name="l01515"></a>01515         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#acc44385a4f8506e2278a9fdf662f77b1">vlan_valid</a>;
<a name="l01516"></a>01516 }
<a name="l01517"></a>01517 
<a name="l01518"></a><a class="code" href="cvmx-wqe_8h.html#a559376869bb72a9bdb4105cd284d1e49">01518</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a559376869bb72a9bdb4105cd284d1e49">cvmx_wqe_is_vlan_stacked</a>(cvmx_wqe_t *work)
<a name="l01519"></a>01519 {
<a name="l01520"></a>01520     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01521"></a>01521         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01522"></a>01522         <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a88cfacb4a5729636086dc9d8fd6cf347">vlan_stacked</a>;
<a name="l01523"></a>01523     }
<a name="l01524"></a>01524     <span class="keywordflow">else</span>
<a name="l01525"></a>01525         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a7402e30f048ca5b5eb4731fabd1d3fe0">vlan_stacked</a>;
<a name="l01526"></a>01526 }
<a name="l01527"></a>01527 <span class="comment"></span>
<a name="l01528"></a>01528 <span class="comment">/**</span>
<a name="l01529"></a>01529 <span class="comment"> * Extract packet data buffer pointer from work queue entry.</span>
<a name="l01530"></a>01530 <span class="comment"> *</span>
<a name="l01531"></a>01531 <span class="comment"> * Returns the legacy (Octeon1/Octeon2) buffer pointer structure</span>
<a name="l01532"></a>01532 <span class="comment"> * for the linked buffer list.</span>
<a name="l01533"></a>01533 <span class="comment"> * On CN78XX, the native buffer pointer structure is converted into</span>
<a name="l01534"></a>01534 <span class="comment"> * the legacy format.</span>
<a name="l01535"></a>01535 <span class="comment"> * The legacy buf_ptr is then stored in the WQE, and word0 reserved</span>
<a name="l01536"></a>01536 <span class="comment"> * field is set to indicate that the buffer pointers were translated.</span>
<a name="l01537"></a>01537 <span class="comment"> * If the packet data is only found inside the work queue entry,</span>
<a name="l01538"></a>01538 <span class="comment"> * a standard buffer pointer structure is created for it.</span>
<a name="l01539"></a>01539 <span class="comment"> */</span>
<a name="l01540"></a>01540 <a class="code" href="unioncvmx__buf__ptr.html" title="This structure defines a buffer pointer on Octeon.">cvmx_buf_ptr_t</a> <a class="code" href="cvmx-helper-util_8c.html#a7e6a73696c2727e9282a315900d59002" title="Extract packet data buffer pointer from work queue entry.">cvmx_wqe_get_packet_ptr</a>(cvmx_wqe_t *work);
<a name="l01541"></a>01541 
<a name="l01542"></a><a class="code" href="cvmx-wqe_8h.html#a0c3d2589d8b6c097a7f96cd467c64d71">01542</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="cvmx-wqe_8h.html#a0c3d2589d8b6c097a7f96cd467c64d71">cvmx_wqe_get_bufs</a>(cvmx_wqe_t *work)
<a name="l01543"></a>01543 {
<a name="l01544"></a>01544     <span class="keywordtype">int</span> bufs;
<a name="l01545"></a>01545 
<a name="l01546"></a>01546     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>))
<a name="l01547"></a>01547         bufs = work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#adc41a91c2466a7e545643446db205e61">bufs</a>;
<a name="l01548"></a>01548     <span class="keywordflow">else</span> {
<a name="l01549"></a>01549 <span class="preprocessor">#ifndef CVMX_BUILD_FOR_LINUX_KERNEL</span>
<a name="l01550"></a>01550 <span class="preprocessor"></span>        <span class="comment">/* Adjust for packet-in-WQE cases */</span>
<a name="l01551"></a>01551         <span class="keywordflow">if</span> (<a class="code" href="cvmx-utils_8h.html#a3923c29d957d55949021630348297e03">cvmx_unlikely</a>(work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a8655021d6f8864bdf78413d2599a08de">bufs</a> == 0 &amp;&amp; !work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#afc17346c1b7b2a2127fb2debc00e8aba">software</a>))
<a name="l01552"></a>01552             (void) <a class="code" href="cvmx-helper-util_8c.html#a7e6a73696c2727e9282a315900d59002" title="Extract packet data buffer pointer from work queue entry.">cvmx_wqe_get_packet_ptr</a>(work);
<a name="l01553"></a>01553 <span class="preprocessor">#endif</span>
<a name="l01554"></a>01554 <span class="preprocessor"></span>        bufs = work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a8655021d6f8864bdf78413d2599a08de">bufs</a>;
<a name="l01555"></a>01555     }
<a name="l01556"></a>01556     <span class="keywordflow">return</span> bufs;
<a name="l01557"></a>01557 }
<a name="l01558"></a>01558 <span class="comment"></span>
<a name="l01559"></a>01559 <span class="comment">/**</span>
<a name="l01560"></a>01560 <span class="comment"> * Free Work Queue Entry memory</span>
<a name="l01561"></a>01561 <span class="comment"> *</span>
<a name="l01562"></a>01562 <span class="comment"> * Will return the WQE buffer to its pool, unless the WQE contains</span>
<a name="l01563"></a>01563 <span class="comment"> * non-redundant packet data.</span>
<a name="l01564"></a>01564 <span class="comment"> * This function is intended to be called AFTER the packet data</span>
<a name="l01565"></a>01565 <span class="comment"> * has been passed along to PKO for transmission and release.</span>
<a name="l01566"></a>01566 <span class="comment"> * It can also follow a call to cvmx_helper_free_packet_data()</span>
<a name="l01567"></a>01567 <span class="comment"> * to release the WQE after associated data was released.</span>
<a name="l01568"></a>01568 <span class="comment"> */</span>
<a name="l01569"></a>01569 <span class="keywordtype">void</span> <a class="code" href="cvmx-helper-util_8c.html#a3178b90be403d7078fb5643c9af08ae8" title="Free Work Queue Entry memory.">cvmx_wqe_free</a>(cvmx_wqe_t *work);
<a name="l01570"></a>01570 <span class="comment"></span>
<a name="l01571"></a>01571 <span class="comment">/**</span>
<a name="l01572"></a>01572 <span class="comment"> * Check if a work entry has been intiated by software</span>
<a name="l01573"></a>01573 <span class="comment"> *</span>
<a name="l01574"></a>01574 <span class="comment"> */</span>
<a name="l01575"></a><a class="code" href="cvmx-wqe_8h.html#ab4efc69ad499e9bdd3601fb9d7e35cbe">01575</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="cvmx-wqe_8h.html#ab4efc69ad499e9bdd3601fb9d7e35cbe" title="Check if a work entry has been intiated by software.">cvmx_wqe_is_soft</a>(cvmx_wqe_t *work)
<a name="l01576"></a>01576 {
<a name="l01577"></a>01577     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01578"></a>01578         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01579"></a>01579         <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aea67d86541524721858d8b584dd3c552">software</a>;
<a name="l01580"></a>01580     }
<a name="l01581"></a>01581     <span class="keywordflow">else</span>
<a name="l01582"></a>01582         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#afc17346c1b7b2a2127fb2debc00e8aba">software</a>;
<a name="l01583"></a>01583 }
<a name="l01584"></a>01584 <span class="comment"></span>
<a name="l01585"></a>01585 <span class="comment">/**</span>
<a name="l01586"></a>01586 <span class="comment"> * Allocate a work-queue entry for delivering software-initiated</span>
<a name="l01587"></a>01587 <span class="comment"> * event notifications.</span>
<a name="l01588"></a>01588 <span class="comment"> * The application data is copied into the work-queue entry,</span>
<a name="l01589"></a>01589 <span class="comment"> * if the space is sufficient.</span>
<a name="l01590"></a>01590 <span class="comment"> */</span>
<a name="l01591"></a>01591 <span class="keyword">extern</span> cvmx_wqe_t * <a class="code" href="cvmx-pow_8c.html#ae42836e71192af625b8385283b4ccd62" title="Allocate a work-queue entry for delivering software-initiated event notifications...">cvmx_wqe_soft_create</a>(<span class="keywordtype">void</span> *data_p, <span class="keywordtype">unsigned</span> data_sz);
<a name="l01592"></a>01592 
<a name="l01593"></a>01593 <span class="comment">/* Errata (PKI-20776) PKI_BUFLINK_S&apos;s are endian-swapped</span>
<a name="l01594"></a>01594 <span class="comment"> * CN78XX pass 1.x has a bug where the packet pointer in each segment is</span>
<a name="l01595"></a>01595 <span class="comment"> * written in the opposite endianness of the configured mode. Fix these here.</span>
<a name="l01596"></a>01596 <span class="comment"> */</span>
<a name="l01597"></a><a class="code" href="cvmx-wqe_8h.html#ad8034b4e5ae7b701e327ed69845ab8fd">01597</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#ad8034b4e5ae7b701e327ed69845ab8fd">cvmx_wqe_pki_errata_20776</a>(cvmx_wqe_t *work)
<a name="l01598"></a>01598 {
<a name="l01599"></a>01599 <span class="preprocessor">#ifndef __LITTLE_ENDIAN_BITFIELD</span>
<a name="l01600"></a>01600 <span class="preprocessor"></span>    cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t*) work;
<a name="l01601"></a>01601 
<a name="l01602"></a>01602     <span class="keywordflow">if</span> (<a class="code" href="octeon-model_8h.html#a9234ac9e9f35fafd7fe5eedd37c9b552">OCTEON_IS_MODEL</a>(<a class="code" href="octeon-model_8h.html#a08ed81b882487e00ca2a6577bb41a8fc">OCTEON_CN78XX_PASS1_X</a>) &amp;&amp; !wqe-&gt;pki_errata20776)
<a name="l01603"></a>01603     {
<a name="l01604"></a>01604         uint64_t bufs;
<a name="l01605"></a>01605         <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> buffer_next;
<a name="l01606"></a>01606 
<a name="l01607"></a>01607         bufs = wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a68758d02767465949d1eeff8dc9b198b">word0</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#adc41a91c2466a7e545643446db205e61">bufs</a>;
<a name="l01608"></a>01608         buffer_next = wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#afe8eaf89015314c4cb7d44759d5c2aff">packet_ptr</a>;
<a name="l01609"></a>01609         <span class="keywordflow">while</span> (bufs &gt; 1) {
<a name="l01610"></a>01610             <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> next;
<a name="l01611"></a>01611             <span class="keywordtype">void</span> *nextaddr = <a class="code" href="cvmx-access_8h.html#a9adf20d6b29145111460ecbc6fbca3dd" title="Convert a hardware physical address (uint64_t) into a memory pointer (void *).">cvmx_phys_to_ptr</a>(buffer_next.<a class="code" href="unioncvmx__buf__ptr__pki.html#a79db2ac7a110694c5e89ec299d0e4e3a">addr</a> - 8);
<a name="l01612"></a>01612             memcpy (&amp;next, nextaddr, <span class="keyword">sizeof</span>(next));
<a name="l01613"></a>01613             next.<a class="code" href="unioncvmx__buf__ptr__pki.html#ab2e8eabac27568b494a80e036bb4a142">u64</a> = __builtin_bswap64(next.<a class="code" href="unioncvmx__buf__ptr__pki.html#ab2e8eabac27568b494a80e036bb4a142">u64</a>);
<a name="l01614"></a>01614             memcpy (nextaddr, &amp;next, <span class="keyword">sizeof</span>(next));
<a name="l01615"></a>01615             buffer_next = next;
<a name="l01616"></a>01616             bufs--;
<a name="l01617"></a>01617         }
<a name="l01618"></a>01618         wqe-&gt;pki_errata20776 = 1;
<a name="l01619"></a>01619     }
<a name="l01620"></a>01620 <span class="preprocessor">#endif</span>
<a name="l01621"></a>01621 <span class="preprocessor"></span>}
<a name="l01622"></a>01622 
<a name="l01623"></a>01623 <span class="comment">/* Errata (PKO-22235) PKI_BUFLINK_S&apos;s are endian-swapped</span>
<a name="l01624"></a>01624 <span class="comment"> * CN78XX pass 1.x has a bug where the packet pointer in each segment is</span>
<a name="l01625"></a>01625 <span class="comment"> * written in the opposite endianness of the configured mode. Fix these here.</span>
<a name="l01626"></a>01626 <span class="comment"> */</span>
<a name="l01627"></a><a class="code" href="cvmx-wqe_8h.html#ae899176e592eb9a5f65166a5c101ef67">01627</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#ae899176e592eb9a5f65166a5c101ef67">cvmx_wqe_pko_errata_22235</a>(<a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> packet_ptr, <span class="keywordtype">unsigned</span> len)
<a name="l01628"></a>01628 {
<a name="l01629"></a>01629 <span class="preprocessor">#ifdef __LITTLE_ENDIAN_BITFIELD</span>
<a name="l01630"></a>01630 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="octeon-model_8h.html#a9234ac9e9f35fafd7fe5eedd37c9b552">OCTEON_IS_MODEL</a>(<a class="code" href="octeon-model_8h.html#a08ed81b882487e00ca2a6577bb41a8fc">OCTEON_CN78XX_PASS1_X</a>))
<a name="l01631"></a>01631     {
<a name="l01632"></a>01632         <span class="keywordtype">unsigned</span> total_len = 0;
<a name="l01633"></a>01633         <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> buffer_next;
<a name="l01634"></a>01634         buffer_next = packet_ptr;
<a name="l01635"></a>01635         total_len += packet_ptr.<a class="code" href="unioncvmx__buf__ptr__pki.html#a3c3e9085c153e19e5d5fde626832041b" title="&amp;lt; The size of the segment pointed to by addr (in bytes)">size</a>;
<a name="l01636"></a>01636         <span class="keywordflow">while</span> (total_len &lt; len) {
<a name="l01637"></a>01637             <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> next;
<a name="l01638"></a>01638             <span class="keywordtype">void</span> *nextaddr = <a class="code" href="cvmx-access_8h.html#a9adf20d6b29145111460ecbc6fbca3dd" title="Convert a hardware physical address (uint64_t) into a memory pointer (void *).">cvmx_phys_to_ptr</a>(buffer_next.<a class="code" href="unioncvmx__buf__ptr__pki.html#a79db2ac7a110694c5e89ec299d0e4e3a">addr</a> - 8);
<a name="l01639"></a>01639             buffer_next.<a class="code" href="unioncvmx__buf__ptr__pki.html#ab2e8eabac27568b494a80e036bb4a142">u64</a> = *(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>*)(nextaddr);
<a name="l01640"></a>01640             total_len += buffer_next.<a class="code" href="unioncvmx__buf__ptr__pki.html#a3c3e9085c153e19e5d5fde626832041b" title="&amp;lt; The size of the segment pointed to by addr (in bytes)">size</a>;
<a name="l01641"></a>01641             memcpy(&amp;next, nextaddr, <span class="keyword">sizeof</span>(next));
<a name="l01642"></a>01642             next.<a class="code" href="unioncvmx__buf__ptr__pki.html#ab2e8eabac27568b494a80e036bb4a142">u64</a> = __builtin_bswap64(next.<a class="code" href="unioncvmx__buf__ptr__pki.html#ab2e8eabac27568b494a80e036bb4a142">u64</a>);
<a name="l01643"></a>01643             memcpy(nextaddr, &amp;next, <span class="keyword">sizeof</span>(next));
<a name="l01644"></a>01644         }
<a name="l01645"></a>01645     }
<a name="l01646"></a>01646 <span class="preprocessor">#endif</span>
<a name="l01647"></a>01647 <span class="preprocessor"></span>}
<a name="l01648"></a>01648 <span class="comment"></span>
<a name="l01649"></a>01649 <span class="comment">/**</span>
<a name="l01650"></a>01650 <span class="comment"> * @INTERNAL</span>
<a name="l01651"></a>01651 <span class="comment"> *</span>
<a name="l01652"></a>01652 <span class="comment"> * Extract the native PKI-specific buffer pointer from WQE.</span>
<a name="l01653"></a>01653 <span class="comment"> *</span>
<a name="l01654"></a>01654 <span class="comment"> * NOTE: Provisional, may be superceded.</span>
<a name="l01655"></a>01655 <span class="comment"> */</span>
<a name="l01656"></a><a class="code" href="cvmx-wqe_8h.html#a07daa7033875b4eee6d7f406e627ae6d">01656</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> <a class="code" href="cvmx-wqe_8h.html#a07daa7033875b4eee6d7f406e627ae6d" title="Internal use function.">cvmx_wqe_get_pki_pkt_ptr</a>(cvmx_wqe_t *work)
<a name="l01657"></a>01657 {
<a name="l01658"></a>01658     cvmx_wqe_78xx_t * wqe = (cvmx_wqe_78xx_t *) work;
<a name="l01659"></a>01659     <span class="keywordflow">if</span> (!<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01660"></a>01660         <a class="code" href="unioncvmx__buf__ptr__pki.html">cvmx_buf_ptr_pki_t</a> x = {0};
<a name="l01661"></a>01661         <span class="keywordflow">return</span> x;
<a name="l01662"></a>01662     }
<a name="l01663"></a>01663     <a class="code" href="cvmx-wqe_8h.html#ad8034b4e5ae7b701e327ed69845ab8fd">cvmx_wqe_pki_errata_20776</a>(work);
<a name="l01664"></a>01664     <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#afe8eaf89015314c4cb7d44759d5c2aff">packet_ptr</a>;
<a name="l01665"></a>01665 }<span class="comment"></span>
<a name="l01666"></a>01666 <span class="comment">/**</span>
<a name="l01667"></a>01667 <span class="comment"> * Set the buffer segment count for a packet.</span>
<a name="l01668"></a>01668 <span class="comment"> *</span>
<a name="l01669"></a>01669 <span class="comment"> * @return Returns the actual resulting value in the WQE fielda</span>
<a name="l01670"></a>01670 <span class="comment"> *</span>
<a name="l01671"></a>01671 <span class="comment"> */</span>
<a name="l01672"></a><a class="code" href="cvmx-wqe_8h.html#a454a079816994eb6260a56f50eb785ef">01672</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="cvmx-wqe_8h.html#a454a079816994eb6260a56f50eb785ef" title="Set the buffer segment count for a packet.">cvmx_wqe_set_bufs</a>(cvmx_wqe_t *work, <span class="keywordtype">unsigned</span> bufs)
<a name="l01673"></a>01673 {
<a name="l01674"></a>01674     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01675"></a>01675         work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#adc41a91c2466a7e545643446db205e61">bufs</a> = bufs;
<a name="l01676"></a>01676         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#a3fa6d26c115b4a2d40fdef8ad4974025">word0</a>.<a class="code" href="unioncvmx__wqe__word0__t.html#a35e9039e65817530572269ad523c603a">pki</a>.<a class="code" href="unioncvmx__pki__wqe__word0__t.html#adc41a91c2466a7e545643446db205e61">bufs</a>;
<a name="l01677"></a>01677     } <span class="keywordflow">else</span> {
<a name="l01678"></a>01678         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a8655021d6f8864bdf78413d2599a08de">bufs</a> = bufs;
<a name="l01679"></a>01679         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a8655021d6f8864bdf78413d2599a08de">bufs</a>;
<a name="l01680"></a>01680     }
<a name="l01681"></a>01681 }
<a name="l01682"></a>01682 <span class="comment"></span>
<a name="l01683"></a>01683 <span class="comment">/**</span>
<a name="l01684"></a>01684 <span class="comment"> * Get the offset of Layer-3 header,</span>
<a name="l01685"></a>01685 <span class="comment"> * only supported when Layer-3 protocol is IPv4 or IPv6.</span>
<a name="l01686"></a>01686 <span class="comment"> *</span>
<a name="l01687"></a>01687 <span class="comment"> * @return Returns the offset, or 0 if the offset is not known or unsupported.</span>
<a name="l01688"></a>01688 <span class="comment"> *</span>
<a name="l01689"></a>01689 <span class="comment"> * FIXME: Assuming word4 is present.</span>
<a name="l01690"></a>01690 <span class="comment"> */</span>
<a name="l01691"></a><a class="code" href="cvmx-wqe_8h.html#ac2572ad1350d93b1adcfee41c8979d57">01691</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="cvmx-wqe_8h.html#ac2572ad1350d93b1adcfee41c8979d57" title="Get the offset of Layer-3 header, only supported when Layer-3 protocol is IPv4 or...">cvmx_wqe_get_l3_offset</a>(cvmx_wqe_t *work)
<a name="l01692"></a>01692 {
<a name="l01693"></a>01693     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01694"></a>01694         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01695"></a>01695         <span class="comment">/* Match 4 values: IPv4/v6 w/wo options */</span>
<a name="l01696"></a>01696         <span class="keywordflow">if</span> ((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> &amp; 0x1c) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>)
<a name="l01697"></a>01697             <span class="keywordflow">return</span> wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a45149a2754e634ec1f44f73b58dfbc95">word4</a>.<a class="code" href="unioncvmx__pki__wqe__word4__t.html#a6e19d7df8be7112ba8961233f0f52171">ptr_layer_c</a>;
<a name="l01698"></a>01698     }
<a name="l01699"></a>01699     <span class="keywordflow">else</span>
<a name="l01700"></a>01700         <span class="keywordflow">return</span> work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#aae4aa0c318904e6f6f1719fc2093659f">ip_offset</a>;
<a name="l01701"></a>01701 
<a name="l01702"></a>01702     <span class="keywordflow">return</span> 0;
<a name="l01703"></a>01703 }
<a name="l01704"></a>01704 <span class="comment"></span>
<a name="l01705"></a>01705 <span class="comment">/**</span>
<a name="l01706"></a>01706 <span class="comment"> * Set the offset of Layer-3 header in a packet.</span>
<a name="l01707"></a>01707 <span class="comment"> * Typically used when an IP packet is generated by software</span>
<a name="l01708"></a>01708 <span class="comment"> * or when the Layer-2 header length is modified, and</span>
<a name="l01709"></a>01709 <span class="comment"> * a subsequent recalculation of checksums is anticipated.</span>
<a name="l01710"></a>01710 <span class="comment"> *</span>
<a name="l01711"></a>01711 <span class="comment"> * @return Returns the actual value of the work entry offset field.</span>
<a name="l01712"></a>01712 <span class="comment"> *</span>
<a name="l01713"></a>01713 <span class="comment"> * FIXME: Assuming word4 is present.</span>
<a name="l01714"></a>01714 <span class="comment"> */</span>
<a name="l01715"></a><a class="code" href="cvmx-wqe_8h.html#aee24b0fcf095c6e2e02a358360a1be74">01715</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="cvmx-wqe_8h.html#aee24b0fcf095c6e2e02a358360a1be74" title="Set the offset of Layer-3 header in a packet.">cvmx_wqe_set_l3_offset</a>(cvmx_wqe_t *work, <span class="keywordtype">unsigned</span> ip_off)
<a name="l01716"></a>01716 {
<a name="l01717"></a>01717     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01718"></a>01718         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01719"></a>01719         <span class="comment">/* Match 4 values: IPv4/v6 w/wo options */</span>
<a name="l01720"></a>01720         <span class="keywordflow">if</span> ((wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> &amp; 0x1c) == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>)
<a name="l01721"></a>01721             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a45149a2754e634ec1f44f73b58dfbc95">word4</a>.<a class="code" href="unioncvmx__pki__wqe__word4__t.html#a6e19d7df8be7112ba8961233f0f52171">ptr_layer_c</a> = ip_off;
<a name="l01722"></a>01722     }
<a name="l01723"></a>01723     <span class="keywordflow">else</span>
<a name="l01724"></a>01724         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#aae4aa0c318904e6f6f1719fc2093659f">ip_offset</a> = ip_off;
<a name="l01725"></a>01725 
<a name="l01726"></a>01726     <span class="keywordflow">return</span> <a class="code" href="cvmx-wqe_8h.html#ac2572ad1350d93b1adcfee41c8979d57" title="Get the offset of Layer-3 header, only supported when Layer-3 protocol is IPv4 or...">cvmx_wqe_get_l3_offset</a>(work);
<a name="l01727"></a>01727 }
<a name="l01728"></a>01728 <span class="comment"></span>
<a name="l01729"></a>01729 <span class="comment">/**</span>
<a name="l01730"></a>01730 <span class="comment"> * Set the indication that the packet contains a IPv4 Layer-3 * header.</span>
<a name="l01731"></a>01731 <span class="comment"> * Use &apos;cvmx_wqe_set_l3_ipv6()&apos; if the protocol is IPv6.</span>
<a name="l01732"></a>01732 <span class="comment"> * When &apos;set&apos; is false, the call will result in an indication</span>
<a name="l01733"></a>01733 <span class="comment"> * that the Layer-3 protocol is neither IPv4 nor IPv6.</span>
<a name="l01734"></a>01734 <span class="comment"> *</span>
<a name="l01735"></a>01735 <span class="comment"> * FIXME: Add IPV4_OPT handling based on L3 header length.</span>
<a name="l01736"></a>01736 <span class="comment"> */</span>
<a name="l01737"></a><a class="code" href="cvmx-wqe_8h.html#a11f1ff4ef3a3065f18b13b78a77dd6e9">01737</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a11f1ff4ef3a3065f18b13b78a77dd6e9" title="Set the indication that the packet contains a IPv4 Layer-3 * header.">cvmx_wqe_set_l3_ipv4</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01738"></a>01738 {
<a name="l01739"></a>01739     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01740"></a>01740         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01741"></a>01741         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01742"></a>01742             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a7965849aef6c92ff55f7a65063f9f5c0">CVMX_PKI_LTYPE_E_IP4</a>;
<a name="l01743"></a>01743         <span class="keywordflow">else</span>
<a name="l01744"></a>01744             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>;
<a name="l01745"></a>01745     }
<a name="l01746"></a>01746     <span class="keywordflow">else</span> {
<a name="l01747"></a>01747         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a> = !<span class="keyword">set</span>;
<a name="l01748"></a>01748         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01749"></a>01749             work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad95688c6aa3221a7a5171f8cc03efc97">is_v6</a> = 0;
<a name="l01750"></a>01750     }
<a name="l01751"></a>01751 }
<a name="l01752"></a>01752 <span class="comment"></span>
<a name="l01753"></a>01753 <span class="comment">/**</span>
<a name="l01754"></a>01754 <span class="comment"> * Set packet Layer-3 protocol to IPv6.</span>
<a name="l01755"></a>01755 <span class="comment"> *</span>
<a name="l01756"></a>01756 <span class="comment"> * FIXME: Add IPV6_OPT handling based on presence of extended headers.</span>
<a name="l01757"></a>01757 <span class="comment"> */</span>
<a name="l01758"></a><a class="code" href="cvmx-wqe_8h.html#ae2cc19593313a61db22c8c67c947e7c7">01758</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#ae2cc19593313a61db22c8c67c947e7c7" title="Set packet Layer-3 protocol to IPv6.">cvmx_wqe_set_l3_ipv6</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01759"></a>01759 {
<a name="l01760"></a>01760     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01761"></a>01761         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01762"></a>01762         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01763"></a>01763             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a287e03c1180695755087a4260329ac8a">CVMX_PKI_LTYPE_E_IP6</a>;
<a name="l01764"></a>01764         <span class="keywordflow">else</span>
<a name="l01765"></a>01765             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>;
<a name="l01766"></a>01766     }
<a name="l01767"></a>01767     <span class="keywordflow">else</span> {
<a name="l01768"></a>01768         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a> = !<span class="keyword">set</span>;
<a name="l01769"></a>01769         <span class="keywordflow">if</span>(<span class="keyword">set</span>)
<a name="l01770"></a>01770             work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad95688c6aa3221a7a5171f8cc03efc97">is_v6</a> = 1;
<a name="l01771"></a>01771     }
<a name="l01772"></a>01772 }
<a name="l01773"></a>01773 <span class="comment"></span>
<a name="l01774"></a>01774 <span class="comment">/**</span>
<a name="l01775"></a>01775 <span class="comment"> * Set a packet Layer-4 protocol type to UDP.</span>
<a name="l01776"></a>01776 <span class="comment"> */</span>
<a name="l01777"></a><a class="code" href="cvmx-wqe_8h.html#a788a400eaf9c3371220a5bb76c4cb5c7">01777</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a788a400eaf9c3371220a5bb76c4cb5c7" title="Set a packet Layer-4 protocol type to UDP.">cvmx_wqe_set_l4_udp</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01778"></a>01778 {
<a name="l01779"></a>01779     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01780"></a>01780         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01781"></a>01781         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01782"></a>01782             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">lf_hdr_type</a>  = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a8ed3c1771823ec89dc8bcf9ed5756d0b">CVMX_PKI_LTYPE_E_UDP</a>;
<a name="l01783"></a>01783         <span class="keywordflow">else</span>
<a name="l01784"></a>01784             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">lf_hdr_type</a>  = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>;
<a name="l01785"></a>01785     }
<a name="l01786"></a>01786     <span class="keywordflow">else</span> {
<a name="l01787"></a>01787         <span class="keywordflow">if</span> (!work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>)
<a name="l01788"></a>01788             work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad7b41e904c8e9d4c4708ea6bee7e21b1">tcp_or_udp</a> = <span class="keyword">set</span>;
<a name="l01789"></a>01789     }
<a name="l01790"></a>01790 }
<a name="l01791"></a>01791 <span class="comment"></span>
<a name="l01792"></a>01792 <span class="comment">/**</span>
<a name="l01793"></a>01793 <span class="comment"> * Set a packet Layer-4 protocol type to TCP.</span>
<a name="l01794"></a>01794 <span class="comment"> */</span>
<a name="l01795"></a><a class="code" href="cvmx-wqe_8h.html#a3bfa5d150a58c3a8f65920c2127491b6">01795</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a3bfa5d150a58c3a8f65920c2127491b6" title="Set a packet Layer-4 protocol type to TCP.">cvmx_wqe_set_l4_tcp</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01796"></a>01796 {
<a name="l01797"></a>01797     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01798"></a>01798         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01799"></a>01799         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01800"></a>01800             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">lf_hdr_type</a>  = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679ac8a5a88eb5091c2cf4cee5df00d61784">CVMX_PKI_LTYPE_E_TCP</a>;
<a name="l01801"></a>01801         <span class="keywordflow">else</span>
<a name="l01802"></a>01802             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aec90a29ba282adb88c03e362307637fd">lf_hdr_type</a>  = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>;
<a name="l01803"></a>01803     }
<a name="l01804"></a>01804     <span class="keywordflow">else</span> {
<a name="l01805"></a>01805         <span class="keywordflow">if</span> (!work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>)
<a name="l01806"></a>01806             work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ad7b41e904c8e9d4c4708ea6bee7e21b1">tcp_or_udp</a> = <span class="keyword">set</span>;
<a name="l01807"></a>01807     }
<a name="l01808"></a>01808 }
<a name="l01809"></a>01809 <span class="comment"></span>
<a name="l01810"></a>01810 <span class="comment">/**</span>
<a name="l01811"></a>01811 <span class="comment"> * Set the &quot;software&quot; flag in a work entry.</span>
<a name="l01812"></a>01812 <span class="comment"> */</span>
<a name="l01813"></a><a class="code" href="cvmx-wqe_8h.html#a8b329e5935e0b94293f77302eeb72d3f">01813</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a8b329e5935e0b94293f77302eeb72d3f" title="Set the &amp;quot;software&amp;quot; flag in a work entry.">cvmx_wqe_set_soft</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01814"></a>01814 {
<a name="l01815"></a>01815     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01816"></a>01816         cvmx_wqe_78xx_t* wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01817"></a>01817         wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#aea67d86541524721858d8b584dd3c552">software</a> = <span class="keyword">set</span>;
<a name="l01818"></a>01818     }
<a name="l01819"></a>01819     <span class="keywordflow">else</span> 
<a name="l01820"></a>01820         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#afc17346c1b7b2a2127fb2debc00e8aba">software</a> = <span class="keyword">set</span>;
<a name="l01821"></a>01821 }
<a name="l01822"></a>01822 <span class="comment"></span>
<a name="l01823"></a>01823 <span class="comment">/**</span>
<a name="l01824"></a>01824 <span class="comment"> * Return true if the packet is an IP fragment.</span>
<a name="l01825"></a>01825 <span class="comment"> */</span>
<a name="l01826"></a><a class="code" href="cvmx-wqe_8h.html#a5450248cace9814a46ef4a83c33638ae">01826</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span>  <a class="code" href="cvmx-wqe_8h.html#a5450248cace9814a46ef4a83c33638ae" title="Return true if the packet is an IP fragment.">cvmx_wqe_is_l3_frag</a>(cvmx_wqe_t *work)
<a name="l01827"></a>01827 {
<a name="l01828"></a>01828     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01829"></a>01829         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01830"></a>01830         <span class="keywordflow">return</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a1c37bb0948250519b4c52db891e5fc75">is_frag</a> != 0);
<a name="l01831"></a>01831     }
<a name="l01832"></a>01832     <span class="keywordflow">else</span> {
<a name="l01833"></a>01833         <span class="keywordflow">if</span> (!work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>)
<a name="l01834"></a>01834             <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ade716ff40914addaa9686ae01b663f2a">is_frag</a> != 0);
<a name="l01835"></a>01835         <span class="keywordflow">else</span>
<a name="l01836"></a>01836             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01837"></a>01837     }
<a name="l01838"></a>01838 }
<a name="l01839"></a>01839 <span class="comment"></span>
<a name="l01840"></a>01840 <span class="comment">/**</span>
<a name="l01841"></a>01841 <span class="comment"> * Set the indicator that the packet is an fragmented IP packet.</span>
<a name="l01842"></a>01842 <span class="comment"> */</span>
<a name="l01843"></a><a class="code" href="cvmx-wqe_8h.html#ab287d2f04f903dc0f686f941eec74590">01843</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#ab287d2f04f903dc0f686f941eec74590" title="Set the indicator that the packet is an fragmented IP packet.">cvmx_wqe_set_l3_frag</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01844"></a>01844 {
<a name="l01845"></a>01845     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01846"></a>01846         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01847"></a>01847         wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a1c37bb0948250519b4c52db891e5fc75">is_frag</a> = <span class="keyword">set</span>;
<a name="l01848"></a>01848     }
<a name="l01849"></a>01849     <span class="keywordflow">else</span> {
<a name="l01850"></a>01850         <span class="keywordflow">if</span> (!work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>)
<a name="l01851"></a>01851             work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a5a205e3ed55bb1eddc697f9e686f87d7">s</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#ade716ff40914addaa9686ae01b663f2a">is_frag</a> = <span class="keyword">set</span>;
<a name="l01852"></a>01852     }
<a name="l01853"></a>01853 }
<a name="l01854"></a>01854 <span class="comment"></span>
<a name="l01855"></a>01855 <span class="comment">/**</span>
<a name="l01856"></a>01856 <span class="comment"> * Set the packet Layer-3 protocol to RARP.</span>
<a name="l01857"></a>01857 <span class="comment"> */</span>
<a name="l01858"></a><a class="code" href="cvmx-wqe_8h.html#a5671feda9fb0d690d5c47cf2dc809daf">01858</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#a5671feda9fb0d690d5c47cf2dc809daf" title="Set the packet Layer-3 protocol to RARP.">cvmx_wqe_set_l3_rarp</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01859"></a>01859 {
<a name="l01860"></a>01860     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01861"></a>01861         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01862"></a>01862         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01863"></a>01863             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a2285abced84e000825711f279cad8aa3">CVMX_PKI_LTYPE_E_RARP</a>;
<a name="l01864"></a>01864         <span class="keywordflow">else</span>
<a name="l01865"></a>01865             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>;
<a name="l01866"></a>01866     }
<a name="l01867"></a>01867     <span class="keywordflow">else</span> {
<a name="l01868"></a>01868         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a709e90b3fffa02b0d8d4377c49d89d44">snoip</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#aad98698ab7f79451c0771ff3626fb540">is_rarp</a> = <span class="keyword">set</span>;
<a name="l01869"></a>01869     }
<a name="l01870"></a>01870 }
<a name="l01871"></a>01871 <span class="comment"></span>
<a name="l01872"></a>01872 <span class="comment">/**</span>
<a name="l01873"></a>01873 <span class="comment"> * Set the packet Layer-3 protocol to ARP.</span>
<a name="l01874"></a>01874 <span class="comment"> */</span>
<a name="l01875"></a><a class="code" href="cvmx-wqe_8h.html#ad90d9dbda3b56f4b1bcd5883a87c3a92">01875</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="cvmx-wqe_8h.html#ad90d9dbda3b56f4b1bcd5883a87c3a92" title="Set the packet Layer-3 protocol to ARP.">cvmx_wqe_set_l3_arp</a>(cvmx_wqe_t *work, <span class="keywordtype">bool</span> <span class="keyword">set</span>)
<a name="l01876"></a>01876 {
<a name="l01877"></a>01877     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01878"></a>01878         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01879"></a>01879         <span class="keywordflow">if</span> (<span class="keyword">set</span>)
<a name="l01880"></a>01880             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679adb981613883b31556d85b17617d702f7">CVMX_PKI_LTYPE_E_ARP</a>;
<a name="l01881"></a>01881         <span class="keywordflow">else</span>
<a name="l01882"></a>01882             wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a> = <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679a827105058e1ac02521f9b4b90eeab597">CVMX_PKI_LTYPE_E_NONE</a>;
<a name="l01883"></a>01883     }
<a name="l01884"></a>01884     <span class="keywordflow">else</span> {
<a name="l01885"></a>01885         work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a709e90b3fffa02b0d8d4377c49d89d44">snoip</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2437257aaba1d3e4cba068c0b4212403">is_arp</a> = <span class="keyword">set</span>;
<a name="l01886"></a>01886     }
<a name="l01887"></a>01887 }
<a name="l01888"></a>01888 <span class="comment"></span>
<a name="l01889"></a>01889 <span class="comment">/**</span>
<a name="l01890"></a>01890 <span class="comment"> * Return true if the packet Layer-3 protocol is ARP.</span>
<a name="l01891"></a>01891 <span class="comment"> */</span>
<a name="l01892"></a><a class="code" href="cvmx-wqe_8h.html#a998f11cbbc94d40de1703f815abefcb8">01892</a> <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="cvmx-wqe_8h.html#a998f11cbbc94d40de1703f815abefcb8" title="Return true if the packet Layer-3 protocol is ARP.">cvmx_wqe_is_l3_arp</a>(cvmx_wqe_t *work)
<a name="l01893"></a>01893 {
<a name="l01894"></a>01894     <span class="keywordflow">if</span> (<a class="code" href="octeon-feature_8h.html#aff993843ac5c34fbf4ce933f7274e2f9">octeon_has_feature</a>(<a class="code" href="octeon-feature_8h.html#ae50822e9c863ca2dea27ff57d39ba3d7ab7e1712916ebd1b999bb4415c0d44867" title="CN78XX has different fields in word0 - word2.">OCTEON_FEATURE_CN78XX_WQE</a>)) {
<a name="l01895"></a>01895         cvmx_wqe_78xx_t *wqe = (cvmx_wqe_78xx_t *)work;
<a name="l01896"></a>01896         <span class="keywordflow">return</span> (wqe-&gt;<a class="code" href="structcvmx__wqe__78xx__t.html#a6d6724d81bb4391ad2607594d5434231">word2</a>.<a class="code" href="unioncvmx__pki__wqe__word2__t.html#a69d2a22f5ece9fc959536d395d89c242">lc_hdr_type</a>  == <a class="code" href="cvmx-wqe_8h.html#a1192e8af58f86a0c2a890b74561dc679adb981613883b31556d85b17617d702f7">CVMX_PKI_LTYPE_E_ARP</a>);
<a name="l01897"></a>01897     }
<a name="l01898"></a>01898     <span class="keywordflow">else</span> {
<a name="l01899"></a>01899         <span class="keywordflow">if</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a44bb7c76b5db5ca4152715455d0eff59">s_cn38xx</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2fd682a3394f92f96f1309f42032368a">not_IP</a>)
<a name="l01900"></a>01900             <span class="keywordflow">return</span> (work-&gt;<a class="code" href="structcvmx__wqe__s.html#ad6b3b9bf88cb8aab7fbf274ff379edbc">word2</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a709e90b3fffa02b0d8d4377c49d89d44">snoip</a>.<a class="code" href="unioncvmx__pip__wqe__word2__t.html#a2437257aaba1d3e4cba068c0b4212403">is_arp</a> != 0);
<a name="l01901"></a>01901         <span class="keywordflow">else</span>
<a name="l01902"></a>01902             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l01903"></a>01903     }
<a name="l01904"></a>01904 }
<a name="l01905"></a>01905 
<a name="l01906"></a>01906 <span class="preprocessor">#ifdef  __cplusplus</span>
<a name="l01907"></a>01907 <span class="preprocessor"></span><span class="comment">/* *INDENT-OFF* */</span>
<a name="l01908"></a>01908 }
<a name="l01909"></a>01909 <span class="comment">/* *INDENT-ON* */</span>
<a name="l01910"></a>01910 <span class="preprocessor">#endif</span>
<a name="l01911"></a>01911 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* __CVMX_WQE_H__ */</span>
<a name="l01912"></a>01912 
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
