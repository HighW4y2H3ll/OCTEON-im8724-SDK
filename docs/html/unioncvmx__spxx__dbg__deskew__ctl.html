<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Octeon Software Development Kit: cvmx_spxx_dbg_deskew_ctl Union Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>cvmx_spxx_dbg_deskew_ctl Union Reference</h1><!-- doxytag: class="cvmx_spxx_dbg_deskew_ctl" -->
<p>cvmx_spx::_dbg_deskew_ctl  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="cvmx-spxx-defs_8h_source.html">cvmx-spxx-defs.h</a>&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a></td></tr>
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a4859a572d680db77ff513c3e7212b885">u64</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <br class="typebreak"/>
<a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl::cvmx_spxx_dbg_deskew_ctl_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a3efa6b89f6866d5929e1ba4c278fb0ca">s</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#af6faa753c241a90a23da76a3b2203cbb">cn38xx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#abc3b2e81bbe19c241dc730416e908bc4">cn38xxp2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a888a2887a26a9c5507391f04c255f168">cn58xx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a7c88d3e06ca6264ecd7502bcb2864c23">cn58xxp1</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>cvmx_spx::_dbg_deskew_ctl </p>
<p>Notes: These bits are meant as a backdoor to control Spi4 per-bit deskew. See that Spec for more details.</p>
<p>The basic idea is to allow software to disable the auto-deskew widgets and make any adjustments by hand. These steps should only be taken once the RCVTRN bit is set and before any real traffic is sent on the Spi4 bus. Great care should be taken when messing with these bits as improper programmings can cause catestrophic or intermitent problems.</p>
<p>The params we have to test are the MUX tap selects and the XCV delay tap selects.</p>
<p>For the muxes, we can set each tap to a random value and then read back the taps. To write...</p>
<p>SPXX_DBG_DESKEW_CTL[BITSEL] = bit to set SPXX_DBG_DESKEW_CTL[OFFSET] = mux tap value (2-bits) SPXX_DBG_DESKEW_CTL[MUX] = go bit</p>
<p>Notice this can all happen with a single CSR write. To read, first set the bit you to look at with the SPXX_DBG_DESKEW_CTL[BITSEL], then simply read SPXX_DBG_DESKEW_STATE[MUXSEL]...</p>
<p>SPXX_DBG_DESKEW_CTL[BITSEL] = bit to set SPXX_DBG_DESKEW_STATE[MUXSEL] = 2-bit value</p>
<p>For the xcv delay taps, the CSR controls increment and decrement the 5-bit count value in the XCV. This is a saturating counter, so it will not wrap when decrementing below zero or incrementing above 31.</p>
<p>To write...</p>
<p>SPXX_DBG_DESKEW_CTL[BITSEL] = bit to set SPXX_DBG_DESKEW_CTL[OFFSET] = tap value increment or decrement amount (5-bits) SPXX_DBG_DESKEW_CTL[INC|DEC] = go bit</p>
<p>These values are copied in SPX, so that they can be read back by software by a similar mechanism to the MUX selects...</p>
<p>SPXX_DBG_DESKEW_CTL[BITSEL] = bit to set SPXX_DBG_DESKEW_STATE[OFFSET] = 5-bit value</p>
<p>In addition, there is a reset bit that sets all the state back to the default/starting value of 0x10.</p>
<p>SPXX_DBG_DESKEW_CTL[CLRDLY] = 1</p>
<p>SINGLE STEP TRAINING MODE (WILMA) Debug feature that will enable the user to single-step the debug logic to watch initial movement and trends by putting the training machine in single step mode.</p>
<p>* SPX*_DBG_DESKEW_CTL[SSTEP] This will put the training control logic into single step mode. We will not deskew in this scenario and will require the TX device to send continuous training sequences.</p>
<p>It is required that SRX*_COM_CTL[INF_EN] be clear so that suspect data does not flow into the chip.</p>
<p>Deasserting SPX*_DBG_DESKEW_CTL[SSTEP] will attempt to deskew as per the normal definition. Single step mode is for debug only. Special care must be given to correctly deskew the interface if normal operation is desired.</p>
<p>* SPX*_DBG_DESKEW_CTL[SSTEP_GO] Each write of '1' to SSTEP_GO will go through a single training iteration and will perform...</p>
<ul>
<li>DLL update, if SPX*_DBG_DESKEW_CTL[DLLDIS] is clear</li>
<li>coarse update, if SPX*_TRN4_CTL[MUX_EN] is set</li>
<li>single fine update, if SPX*_TRN4_CTL[MACRO_EN] is set and an edge was detected after walked +/- SPX*_TRN4_CTL[MAXDIST] taps.</li>
</ul>
<p>Writes to this register have no effect if the interface is not in SSTEP mode (SPX*_DBG_DESKEW_CTL[SSTEP]).</p>
<p>The WILMA mode will be cleared at the final state transition, so that software can set SPX*_DBG_DESKEW_CTL[SSTEP] and SPX*_DBG_DESKEW_CTL[SSTEP_GO] before setting SPX*_CLK_CTL[RCVTRN] and the machine will go through the initial iteration and stop - waiting for another SPX*_DBG_DESKEW_CTL[SSTEP_GO] or an interface enable.</p>
<p>* SPX*_DBG_DESKEW_CTL[FALL8] Determines how many pattern matches are required during training operations to fallout of training and begin processing the normal data stream. The default value is 10 pattern matches. The pattern that is used is dependent on the SPX*_DBG_DESKEW_CTL[FALLNOP] CSR which determines between non-training packets (the default) and NOPs.</p>
<p>* SPX*_DBG_DESKEW_CTL[FALLNOP] Determines the pattern that is required during training operations to fallout of training and begin processing the normal data stream. The default value is to match against non-training data. Setting this bit, changes the behavior to watch for NOPs packet instead.</p>
<p>This bit should not be changed dynamically while the link is operational. </p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="af6faa753c241a90a23da76a3b2203cbb"></a><!-- doxytag: member="cvmx_spxx_dbg_deskew_ctl::cn38xx" ref="af6faa753c241a90a23da76a3b2203cbb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a> <a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#af6faa753c241a90a23da76a3b2203cbb">cvmx_spxx_dbg_deskew_ctl::cn38xx</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="abc3b2e81bbe19c241dc730416e908bc4"></a><!-- doxytag: member="cvmx_spxx_dbg_deskew_ctl::cn38xxp2" ref="abc3b2e81bbe19c241dc730416e908bc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a> <a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#abc3b2e81bbe19c241dc730416e908bc4">cvmx_spxx_dbg_deskew_ctl::cn38xxp2</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a888a2887a26a9c5507391f04c255f168"></a><!-- doxytag: member="cvmx_spxx_dbg_deskew_ctl::cn58xx" ref="a888a2887a26a9c5507391f04c255f168" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a> <a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a888a2887a26a9c5507391f04c255f168">cvmx_spxx_dbg_deskew_ctl::cn58xx</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a7c88d3e06ca6264ecd7502bcb2864c23"></a><!-- doxytag: member="cvmx_spxx_dbg_deskew_ctl::cn58xxp1" ref="a7c88d3e06ca6264ecd7502bcb2864c23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl_s</a> <a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a7c88d3e06ca6264ecd7502bcb2864c23">cvmx_spxx_dbg_deskew_ctl::cn58xxp1</a><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3efa6b89f6866d5929e1ba4c278fb0ca"></a><!-- doxytag: member="cvmx_spxx_dbg_deskew_ctl::s" ref="a3efa6b89f6866d5929e1ba4c278fb0ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structcvmx__spxx__dbg__deskew__ctl_1_1cvmx__spxx__dbg__deskew__ctl__s.html">cvmx_spxx_dbg_deskew_ctl::cvmx_spxx_dbg_deskew_ctl_s</a>  <a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a3efa6b89f6866d5929e1ba4c278fb0ca">cvmx_spxx_dbg_deskew_ctl::s</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a4859a572d680db77ff513c3e7212b885"></a><!-- doxytag: member="cvmx_spxx_dbg_deskew_ctl::u64" ref="a4859a572d680db77ff513c3e7212b885" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="unioncvmx__spxx__dbg__deskew__ctl.html#a4859a572d680db77ff513c3e7212b885">cvmx_spxx_dbg_deskew_ctl::u64</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/>The documentation for this union was generated from the following file:<ul>
<li><a class="el" href="cvmx-spxx-defs_8h_source.html">cvmx-spxx-defs.h</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 27 Oct 2017 for Octeon Software Development Kit by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
